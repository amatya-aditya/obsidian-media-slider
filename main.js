/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MediaSliderPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/compression.ts
async function compressImage(imageUrl, maxWidth = 800, maxHeight = 600, quality = 0.7) {
  return new Promise((resolve, reject) => {
    const img = new Image();
    img.crossOrigin = "Anonymous";
    img.onload = () => {
      let { width, height } = img;
      let newWidth = width;
      let newHeight = height;
      if (width > maxWidth || height > maxHeight) {
        const widthRatio = maxWidth / width;
        const heightRatio = maxHeight / height;
        const ratio = Math.min(widthRatio, heightRatio);
        newWidth = width * ratio;
        newHeight = height * ratio;
      }
      const canvas = document.createElement("canvas");
      canvas.width = newWidth;
      canvas.height = newHeight;
      const ctx = canvas.getContext("2d");
      if (!ctx) {
        reject("Canvas context not available");
        return;
      }
      ctx.drawImage(img, 0, 0, newWidth, newHeight);
      const dataUrl = canvas.toDataURL("image/jpeg", quality);
      resolve(dataUrl);
    };
    img.onerror = (err) => reject(err);
    img.src = imageUrl;
  });
}

// src/notes.ts
var NotesManager = class {
  constructor(plugin) {
    this.data = {};
    this.plugin = plugin;
  }
  async load() {
    const loaded = await this.plugin.loadData();
    this.data = loaded || {};
  }
  async save() {
    await this.plugin.saveData(this.data);
  }
  getNote(key) {
    return this.data[key] || "";
  }
  async setNote(key, note) {
    this.data[key] = note;
    await this.save();
  }
  // Removes notes for the specified slider that are not in the validFiles list.
  async cleanupNotesForSlider(sliderId, validFiles) {
    for (const key of Object.keys(this.data)) {
      if (key.startsWith(`${sliderId}-`)) {
        const mediaFile = key.substring(sliderId.length + 1);
        if (!validFiles.includes(mediaFile)) {
          delete this.data[key];
        }
      }
    }
    await this.save();
  }
};

// src/drawing.ts
var DrawingAnnotation = class {
  constructor(container) {
    this.drawing = false;
    this.startX = 0;
    this.startY = 0;
    // The current tool (for freehand, eraser, laser) and for geometric tools.
    this.currentTool = "freehand";
    this.currentGeometricTool = "line";
    // Public drawing settings.
    this.color = "#FF0000";
    // default red
    this.lineWidth = 2;
    this.resizeCanvasBound = () => {
      this.resizeCanvas();
    };
    this.handlePointerDown = (e) => {
      this.drawing = true;
      this.startX = e.offsetX;
      this.startY = e.offsetY;
      if (this.currentTool === "freehand" || this.currentTool === "eraser" || this.currentTool === "laser") {
        this.ctx.beginPath();
        this.ctx.moveTo(this.startX, this.startY);
      }
    };
    this.handlePointerMove = (e) => {
      if (!this.drawing)
        return;
      const currentX = e.offsetX;
      const currentY = e.offsetY;
      if (this.currentTool === "freehand") {
        this.ctx.strokeStyle = this.color;
        this.ctx.lineWidth = this.lineWidth;
        this.ctx.lineCap = "round";
        this.ctx.lineTo(currentX, currentY);
        this.ctx.stroke();
      } else if (this.currentTool === "laser") {
        this.ctx.strokeStyle = this.color;
        this.ctx.lineWidth = 1;
        this.ctx.lineCap = "round";
        this.ctx.shadowColor = this.color;
        this.ctx.shadowBlur = 10;
        this.ctx.lineTo(currentX, currentY);
        this.ctx.stroke();
        this.ctx.shadowBlur = 0;
      } else if (this.currentTool === "eraser") {
        this.ctx.globalCompositeOperation = "destination-out";
        this.ctx.lineWidth = this.lineWidth * 5;
        this.ctx.lineTo(currentX, currentY);
        this.ctx.stroke();
        this.ctx.globalCompositeOperation = "source-over";
      }
    };
    this.handlePointerUp = (e) => {
      if (!this.drawing)
        return;
      this.drawing = false;
      const endX = e.offsetX;
      const endY = e.offsetY;
      this.ctx.strokeStyle = this.currentTool === "eraser" ? "rgba(0,0,0,1)" : this.color;
      this.ctx.lineWidth = this.lineWidth;
      this.ctx.lineCap = "round";
      if (this.currentTool === "line") {
        this.ctx.beginPath();
        this.ctx.moveTo(this.startX, this.startY);
        this.ctx.lineTo(endX, endY);
        this.ctx.stroke();
      } else if (this.currentTool === "rectangle") {
        const rectWidth = endX - this.startX;
        const rectHeight = endY - this.startY;
        this.ctx.strokeRect(this.startX, this.startY, rectWidth, rectHeight);
      } else if (this.currentTool === "circle") {
        const radius = Math.sqrt(Math.pow(endX - this.startX, 2) + Math.pow(endY - this.startY, 2));
        this.ctx.beginPath();
        this.ctx.arc(this.startX, this.startY, radius, 0, Math.PI * 2);
        this.ctx.stroke();
      } else if (this.currentTool === "laser") {
        setTimeout(() => {
          this.clear();
        }, 200);
      }
    };
    this.container = container;
    this.canvas = document.createElement("canvas");
    this.canvas.classList.add("drawing-canvas");
    this.container.appendChild(this.canvas);
    this.resizeCanvas();
    const ctx = this.canvas.getContext("2d");
    if (!ctx)
      throw new Error("Cannot get 2D context");
    this.ctx = ctx;
    this.toolbar = document.createElement("div");
    this.toolbar.classList.add("drawing-toolbar");
    this.container.appendChild(this.toolbar);
    this.createToolbar();
    this.enableDrawing();
    window.addEventListener("resize", this.resizeCanvasBound);
  }
  resizeCanvas() {
    this.canvas.width = this.container.clientWidth;
    this.canvas.height = this.container.clientHeight;
  }
  resetToolbarHighlights() {
    Array.from(this.toolbar.children).forEach((child) => {
      child.classList.remove("active-tool");
    });
  }
  createToolbar() {
    const freehandBtn = document.createElement("button");
    freehandBtn.textContent = "\u270F\uFE0F";
    freehandBtn.title = "Freehand";
    freehandBtn.classList.add("drawing-btn", "freehand-btn");
    freehandBtn.onclick = () => {
      this.currentTool = "freehand";
      this.resetToolbarHighlights();
      freehandBtn.classList.add("active-tool");
    };
    this.toolbar.appendChild(freehandBtn);
    const geomDropdown = document.createElement("details");
    geomDropdown.classList.add("drawing-dropdown");
    const geomSummary = document.createElement("summary");
    geomSummary.textContent = "\u2796";
    geomSummary.title = "Geometric Tools (Line, Rect, Circle)";
    geomSummary.classList.add("drawing-dropdown-summary");
    geomDropdown.appendChild(geomSummary);
    const geomOptions = document.createElement("div");
    geomOptions.classList.add("drawing-dropdown-options");
    const geomTools = [
      { tool: "line", icon: "\u2796", label: "Line" },
      { tool: "rectangle", icon: "\u25AD", label: "Rectangle" },
      { tool: "circle", icon: "\u25EF", label: "Circle" }
    ];
    geomTools.forEach((opt) => {
      const btn = document.createElement("button");
      btn.textContent = opt.icon;
      btn.title = opt.label;
      btn.classList.add("drawing-btn", "geom-tool-btn");
      btn.onclick = (e) => {
        e.stopPropagation();
        this.currentTool = opt.tool;
        this.currentGeometricTool = opt.tool;
        geomSummary.textContent = opt.icon;
        geomDropdown.removeAttribute("open");
      };
      geomOptions.appendChild(btn);
    });
    geomDropdown.appendChild(geomOptions);
    this.toolbar.appendChild(geomDropdown);
    const eraserBtn = document.createElement("button");
    eraserBtn.textContent = "\u{1F9FD}";
    eraserBtn.title = "Eraser";
    eraserBtn.classList.add("drawing-btn", "eraser-btn");
    eraserBtn.onclick = () => {
      this.currentTool = "eraser";
      this.resetToolbarHighlights();
      eraserBtn.classList.add("active-tool");
    };
    this.toolbar.appendChild(eraserBtn);
    const laserBtn = document.createElement("button");
    laserBtn.textContent = "\u{1F526}";
    laserBtn.title = "Laser (temporary)";
    laserBtn.classList.add("drawing-btn", "laser-btn");
    laserBtn.onclick = () => {
      this.currentTool = "laser";
      this.resetToolbarHighlights();
      laserBtn.classList.add("active-tool");
    };
    this.toolbar.appendChild(laserBtn);
    const colorInput = document.createElement("input");
    colorInput.type = "color";
    colorInput.value = this.color;
    colorInput.classList.add("drawing-color-input");
    colorInput.onchange = () => {
      this.color = colorInput.value;
    };
    this.toolbar.appendChild(colorInput);
    const widthInput = document.createElement("input");
    widthInput.type = "number";
    widthInput.min = "1";
    widthInput.max = "10";
    widthInput.value = this.lineWidth.toString();
    widthInput.classList.add("drawing-linewidth-input");
    widthInput.onchange = () => {
      this.lineWidth = Number(widthInput.value);
    };
    this.toolbar.appendChild(widthInput);
  }
  enableDrawing() {
    this.canvas.addEventListener("pointerdown", this.handlePointerDown);
    this.canvas.addEventListener("pointermove", this.handlePointerMove);
    this.canvas.addEventListener("pointerup", this.handlePointerUp);
    this.canvas.addEventListener("pointerout", this.handlePointerUp);
  }
  disableDrawing() {
    this.canvas.removeEventListener("pointerdown", this.handlePointerDown);
    this.canvas.removeEventListener("pointermove", this.handlePointerMove);
    this.canvas.removeEventListener("pointerup", this.handlePointerUp);
    this.canvas.removeEventListener("pointerout", this.handlePointerUp);
  }
  clear() {
    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
  }
  getAnnotation() {
    return this.canvas.toDataURL("image/png");
  }
  destroy() {
    window.removeEventListener("resize", this.resizeCanvasBound);
    this.disableDrawing();
    if (this.toolbar.parentNode)
      this.toolbar.parentNode.removeChild(this.toolbar);
    if (this.canvas.parentNode)
      this.canvas.parentNode.removeChild(this.canvas);
  }
};

// src/visualizer.ts
var Visualizer = class {
  constructor(mediaElement, container, options = {}) {
    var _a, _b;
    this.mediaElement = mediaElement;
    this.container = container;
    this.options = {
      height: (_a = options.height) != null ? _a : "100px",
      gradientType: (_b = options.gradientType) != null ? _b : "blue-red",
      customColors: options.customColors
    };
    this.canvas = document.createElement("canvas");
    this.canvas.classList.add("visualizer-canvas");
    this.canvas.style.setProperty("--visualizer-height", this.options.height || "100px");
    this.canvas.width = container.clientWidth;
    this.canvas.height = parseInt(this.options.height || "80", 10);
    this.canvasCtx = this.canvas.getContext("2d");
    container.appendChild(this.canvas);
    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
    this.source = this.audioContext.createMediaElementSource(this.mediaElement);
    this.analyser = this.audioContext.createAnalyser();
    this.analyser.fftSize = 512;
    this.analyser.smoothingTimeConstant = 0.05;
    this.analyser.minDecibels = -100;
    this.analyser.maxDecibels = -30;
    this.source.connect(this.analyser);
    this.analyser.connect(this.audioContext.destination);
    this.animationFrameId = 0;
    this.draw();
  }
  draw() {
    const bufferLength = this.analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);
    const halfBins = Math.floor(bufferLength / 2);
    const gap = 2;
    const canvasWidth = this.canvas.width;
    const canvasHeight = this.canvas.height;
    const midX = canvasWidth / 2;
    const baseline = canvasHeight / 2;
    const slotWidth = midX / halfBins;
    const barWidth = slotWidth * 0.6;
    const drawBars = () => {
      this.analyser.getByteFrequencyData(dataArray);
      this.canvasCtx.clearRect(0, 0, canvasWidth, canvasHeight);
      for (let i = 0; i < halfBins; i++) {
        const rawIntensity = dataArray[i] / 255;
        const intensity = Math.pow(rawIntensity, 2);
        const barHeight = intensity * baseline;
        let gradient;
        if (this.options.gradientType === "blue-red") {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          gradient.addColorStop(0, "hsl(240,80%,40%)");
          gradient.addColorStop(1, "hsl(0,90%,50%)");
        } else if (this.options.gradientType === "rainbow") {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          gradient.addColorStop(0, "hsl(240,100%,50%)");
          gradient.addColorStop(0.25, "hsl(180,100%,50%)");
          gradient.addColorStop(0.5, "hsl(120,100%,50%)");
          gradient.addColorStop(0.75, "hsl(60,100%,50%)");
          gradient.addColorStop(1, "hsl(0,100%,50%)");
        } else if (this.options.gradientType === "custom" && this.options.customColors && this.options.customColors.length > 0) {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          const n = this.options.customColors.length;
          for (let j = 0; j < n; j++) {
            gradient.addColorStop(j / (n - 1), this.options.customColors[j]);
          }
        } else {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          gradient.addColorStop(0, "hsl(240,100%,50%)");
          gradient.addColorStop(0.25, "hsl(180,100%,50%)");
          gradient.addColorStop(0.5, "hsl(120,100%,50%)");
          gradient.addColorStop(0.75, "hsl(60,100%,50%)");
          gradient.addColorStop(1, "hsl(0,100%,50%)");
        }
        const xRight = midX + i * (barWidth + gap);
        const xLeft = midX - (i + 1) * (barWidth + gap);
        this.canvasCtx.fillStyle = gradient;
        this.canvasCtx.fillRect(xRight, baseline - barHeight, barWidth, barHeight);
        this.canvasCtx.fillRect(xLeft, baseline - barHeight, barWidth, barHeight);
      }
      this.animationFrameId = requestAnimationFrame(drawBars);
    };
    drawBars();
  }
  destroy() {
    cancelAnimationFrame(this.animationFrameId);
    this.canvas.remove();
    this.source.disconnect();
    this.analyser.disconnect();
    if (this.audioContext.state !== "closed") {
      this.audioContext.close();
    }
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  enableDrawingAnnotation: false,
  enableVisualizer: false,
  visualizerColor: "#00ff00",
  visualizerHeight: "50px"
};
var _MediaSliderPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.filePathCache = /* @__PURE__ */ new Map();
    this.markdownCache = /* @__PURE__ */ new Map();
    this.drawingData = {};
  }
  async onload() {
    console.log("Loading Media Slider Plugin...");
    await this.loadSettings();
    this.addSettingTab(new MediaSliderSettingTab(this.app, this));
    this.notesManager = new NotesManager(this);
    await this.notesManager.load();
    await this.loadDrawingData();
    this.registerMarkdownCodeBlockProcessor("media-slider", (source, el, ctx) => {
      this.createMediaSlider(source, el, ctx);
    });
  }
  // --- Settings Persistence ---
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  // --- Force Refresh for Immediate Settings Effect ---
  refreshSliders() {
    this.app.workspace.getLeavesOfType("markdown").forEach((leaf) => {
      if (leaf.view instanceof import_obsidian.MarkdownView && typeof leaf.view.load === "function") {
        leaf.view.load();
      }
    });
  }
  // --- Persistent Drawing Data Management ---
  async loadDrawingData() {
    const data = await this.loadData();
    this.drawingData = (data == null ? void 0 : data.drawings) || {};
  }
  async saveDrawingData() {
    const data = await this.loadData() || {};
    data.drawings = this.drawingData;
    await this.saveData(data);
  }
  async cleanupDrawingData(sliderId, validFiles) {
    for (const key of Object.keys(this.drawingData)) {
      if (key.startsWith(`${sliderId}-`)) {
        const mediaFile = key.substring(sliderId.length + 1);
        if (!validFiles.includes(mediaFile)) {
          delete this.drawingData[key];
        }
      }
    }
    await this.saveDrawingData();
  }
  // --- Simple YAML Parser ---
  parseSimpleYAML(yaml) {
    const result = {};
    const lines = yaml.split("\n");
    for (let line of lines) {
      line = line.trim();
      if (!line)
        continue;
      const separatorIndex = line.indexOf(":");
      if (separatorIndex === -1)
        continue;
      const key = line.substring(0, separatorIndex).trim();
      let rawValue = line.substring(separatorIndex + 1).trim();
      let value;
      if (rawValue.startsWith('"') && rawValue.endsWith('"') || rawValue.startsWith("'") && rawValue.endsWith("'")) {
        value = rawValue.slice(1, -1);
      } else if (rawValue === "true") {
        value = true;
      } else if (rawValue === "false") {
        value = false;
      } else if (!isNaN(Number(rawValue))) {
        value = Number(rawValue);
      } else {
        value = rawValue;
      }
      result[key] = value;
    }
    return result;
  }
  // --- Resource Helpers ---
  getCachedResourcePath(fileName) {
    if (this.filePathCache.has(fileName)) {
      return this.filePathCache.get(fileName);
    }
    const path = this.app.vault.adapter.getResourcePath(fileName);
    this.filePathCache.set(fileName, path);
    return path;
  }
  getMediaSource(fileName) {
    if (fileName.startsWith("http://") || fileName.startsWith("https://")) {
      return fileName;
    }
    let file = this.app.vault.getAbstractFileByPath(fileName);
    if (!file) {
      const matchingFiles = this.app.vault.getFiles().filter(
        (f) => f.name.toLowerCase() === fileName.toLowerCase()
      );
      if (matchingFiles.length > 0) {
        fileName = matchingFiles[0].path;
      } else {
        console.error("File not found in vault:", fileName);
      }
    }
    return this.getCachedResourcePath(fileName);
  }
  // --- Revised getMarkdownContent without unsafe casting ---
  async getMarkdownContent(fileName) {
    if (this.markdownCache.has(fileName)) {
      return this.markdownCache.get(fileName);
    }
    const abstractFile = this.app.vault.getAbstractFileByPath(fileName);
    if (abstractFile && "extension" in abstractFile) {
      const content = await this.app.vault.read(abstractFile);
      this.markdownCache.set(fileName, content);
      return content;
    }
    return "";
  }
  throttle(fn, delay) {
    let lastCall = 0;
    return (...args) => {
      const now = Date.now();
      if (now - lastCall < delay)
        return;
      lastCall = now;
      return fn(...args);
    };
  }
  // --- Slider Creation ---
  createMediaSlider(source, el, ctx) {
    const metadataMatch = source.match(/---\n([\s\S]+?)\n---/);
    const mediaContent = source.replace(/---\n[\s\S]+?\n---/, "").trim();
    const mediaFiles = mediaContent.split("\n").map((line) => line.trim()).filter(Boolean);
    let settings = {
      sliderId: "",
      carouselShowThumbnails: true,
      thumbnailPosition: "bottom",
      captionMode: "below",
      autoplay: false,
      slideshowSpeed: 5,
      width: "100%",
      height: "300px",
      transitionEffect: "fade",
      transitionDuration: 500,
      enhancedView: false,
      interactiveNotes: false
    };
    if (metadataMatch) {
      try {
        const parsedSettings = this.parseSimpleYAML(metadataMatch[1]);
        settings = Object.assign(settings, parsedSettings);
      } catch (error) {
        console.error("Failed to parse media-slider metadata:", error);
      }
    }
    let sliderId = settings.sliderId;
    if (!sliderId) {
      sliderId = `slider-${_MediaSliderPlugin.sliderCounter++}`;
    }
    const validFiles = mediaFiles.map((file) => {
      let match = file.match(/!?\[\[(.*?)\]\]/);
      if (!match) {
        match = file.match(/!\[\]\((.*?)\)/);
      }
      return match ? match[1] : "";
    }).filter(Boolean);
    if (validFiles.length === 0) {
      el.createEl("p", { text: "No valid media files found." });
      return;
    }
    this.notesManager.cleanupNotesForSlider(sliderId, validFiles).catch(console.error);
    this.cleanupDrawingData(sliderId, validFiles).catch(console.error);
    this.renderSlider(el, validFiles, settings, sliderId);
  }
  // --- Render Slider UI ---
  renderSlider(container, files, settings, sliderId) {
    container.empty();
    let updateDrawingOverlay;
    const sliderWrapper = container.createDiv("media-slider-wrapper");
    if (settings.carouselShowThumbnails && (settings.thumbnailPosition === "left" || settings.thumbnailPosition === "right")) {
      sliderWrapper.classList.add("flex-row");
    } else {
      sliderWrapper.classList.add("flex-column", "center");
    }
    const sliderContent = sliderWrapper.createDiv("slider-content");
    const sliderContainer = sliderContent.createDiv("slider-container");
    const captionContainer = sliderContent.createDiv("slider-caption-container");
    let thumbnailContainer = null;
    let thumbnailEls = [];
    if (settings.carouselShowThumbnails) {
      thumbnailContainer = document.createElement("div");
      thumbnailContainer.classList.add("thumbnail-container");
      if (settings.thumbnailPosition === "left" || settings.thumbnailPosition === "right") {
        thumbnailContainer.classList.add("vertical");
      } else {
        thumbnailContainer.classList.add("horizontal");
      }
      if (settings.thumbnailPosition === "top" || settings.thumbnailPosition === "left") {
        sliderWrapper.insertBefore(thumbnailContainer, sliderContent);
      } else if (settings.thumbnailPosition === "bottom" || settings.thumbnailPosition === "right") {
        sliderWrapper.appendChild(thumbnailContainer);
      }
    }
    let currentIndex = 0;
    let currentDirection = "next";
    if (settings.enhancedView) {
      const fullScreenBtn = sliderWrapper.createEl("button", { text: "\u26F6", cls: "fullscreen-btn" });
      fullScreenBtn.onclick = () => {
        if (!document.fullscreenElement) {
          sliderWrapper.requestFullscreen().catch((err) => console.error("Error enabling fullscreen:", err));
          sliderContainer.classList.add("fullscreen-slider");
        } else {
          document.exitFullscreen();
          sliderContainer.classList.remove("fullscreen-slider");
        }
      };
      const copyBtn = sliderWrapper.createEl("button", { text: "\u{1F4CB}", cls: "copy-btn" });
      copyBtn.onclick = async () => {
        const currentEntry = files[currentIndex];
        let [fileName] = currentEntry.split("|").map((s) => s.trim());
        const markdownLink = `![[${fileName}]]`;
        try {
          await navigator.clipboard.writeText(markdownLink);
          console.log("Copied markdown link to clipboard:", markdownLink);
        } catch (err) {
          console.error("Failed to copy markdown link:", err);
        }
      };
    }
    let notesContainer = null;
    let notesTextarea = null;
    let notesToggleBtn = null;
    if (settings.interactiveNotes) {
      notesToggleBtn = sliderWrapper.createEl("button", { text: "\u{1F4DD}", cls: "notes-toggle-btn" });
      notesToggleBtn.onclick = () => {
        if (notesContainer) {
          notesContainer.classList.toggle("visible");
          const mediaKey = `${sliderId}-${files[currentIndex]}`;
          if (notesContainer.classList.contains("visible") && notesTextarea) {
            notesTextarea.value = this.notesManager.getNote(mediaKey);
          }
        }
      };
      notesContainer = sliderWrapper.createDiv("notes-container");
      notesTextarea = document.createElement("textarea");
      notesTextarea.classList.add("notes-textarea");
      notesTextarea.placeholder = "Add your notes here...";
      notesContainer.appendChild(notesTextarea);
      const saveNotesBtn = document.createElement("button");
      saveNotesBtn.textContent = "\u{1F4BE}";
      saveNotesBtn.classList.add("notes-save-btn");
      saveNotesBtn.onclick = async () => {
        const mediaKey = `${sliderId}-${files[currentIndex]}`;
        if (notesTextarea) {
          await this.notesManager.setNote(mediaKey, notesTextarea.value);
        }
        if (notesContainer)
          notesContainer.classList.remove("visible");
      };
      notesContainer.appendChild(saveNotesBtn);
    }
    let drawingAnnotation = null;
    let clearDrawingBtn = null;
    if (this.settings.enableDrawingAnnotation) {
      const drawingToggleBtn = sliderWrapper.createEl("button", { text: "\u270F\uFE0F", cls: "drawing-toggle-btn" });
      updateDrawingOverlay = (mediaKey) => {
        const existingOverlay = sliderContainer.querySelector(".drawing-overlay");
        if (existingOverlay) {
          existingOverlay.remove();
        }
        const savedDrawing = this.drawingData[mediaKey];
        if (savedDrawing) {
          const overlay = sliderContainer.createEl("img", { attr: { src: savedDrawing } });
          overlay.classList.add("drawing-overlay");
          if (!clearDrawingBtn) {
            clearDrawingBtn = sliderWrapper.createEl("button", { text: "\u{1F5D1}\uFE0F", cls: "clear-drawing-btn" });
            clearDrawingBtn.onclick = async () => {
              delete this.drawingData[mediaKey];
              await this.saveDrawingData();
              const existingOverlay2 = sliderContainer.querySelector(".drawing-overlay");
              if (existingOverlay2)
                existingOverlay2.remove();
              clearDrawingBtn.remove();
              clearDrawingBtn = null;
            };
          }
        } else {
          if (clearDrawingBtn) {
            clearDrawingBtn.remove();
            clearDrawingBtn = null;
          }
        }
      };
      drawingToggleBtn.onclick = async () => {
        const mediaKey = `${sliderId}-${files[currentIndex]}`;
        if (drawingAnnotation) {
          const drawingDataUrl = drawingAnnotation.getAnnotation();
          this.drawingData[mediaKey] = drawingDataUrl;
          await this.saveDrawingData();
          drawingAnnotation.destroy();
          drawingAnnotation = null;
          drawingToggleBtn.textContent = "\u270F\uFE0F";
          updateDrawingOverlay == null ? void 0 : updateDrawingOverlay(mediaKey);
        } else {
          if (this.drawingData[mediaKey]) {
            delete this.drawingData[mediaKey];
            await this.saveDrawingData();
            const existingOverlay = sliderContainer.querySelector(".drawing-overlay");
            if (existingOverlay)
              existingOverlay.remove();
            if (clearDrawingBtn) {
              clearDrawingBtn.remove();
              clearDrawingBtn = null;
            }
          }
          drawingAnnotation = new DrawingAnnotation(sliderContainer);
          drawingToggleBtn.textContent = "\u{1F4BE}";
        }
      };
    }
    container.appendChild(sliderWrapper);
    const prevBtn = sliderContent.createEl("button", { text: "\u2B9C", cls: "slider-btn prev" });
    const nextBtn = sliderContent.createEl("button", { text: "\u2B9E", cls: "slider-btn next" });
    const updateMediaDisplay = async () => {
      sliderContainer.classList.remove(
        "transition-fade-out",
        "transition-slide-next-out",
        "transition-slide-prev-out",
        "transition-zoom-out",
        "transition-slide-up-out",
        "transition-slide-down-out",
        "transition-flip-out",
        "transition-flip-vertical-out",
        "transition-rotate-out",
        "transition-blur-out",
        "transition-squeeze-out"
      );
      switch (settings.transitionEffect) {
        case "fade":
          sliderContainer.classList.add("transition-fade-out");
          break;
        case "slide":
          sliderContainer.classList.add(currentDirection === "next" ? "transition-slide-next-out" : "transition-slide-prev-out");
          break;
        case "zoom":
          sliderContainer.classList.add("transition-zoom-out");
          break;
        case "slide-up":
          sliderContainer.classList.add("transition-slide-up-out");
          break;
        case "slide-down":
          sliderContainer.classList.add("transition-slide-down-out");
          break;
        case "flip":
          sliderContainer.classList.add("transition-flip-out");
          break;
        case "flip-vertical":
          sliderContainer.classList.add("transition-flip-vertical-out");
          break;
        case "rotate":
          sliderContainer.classList.add("transition-rotate-out");
          break;
        case "blur":
          sliderContainer.classList.add("transition-blur-out");
          break;
        case "squeeze":
          sliderContainer.classList.add("transition-squeeze-out");
          break;
        default:
          sliderContainer.classList.add("transition-fade-out");
      }
      setTimeout(async () => {
        sliderContainer.empty();
        if (settings.captionMode === "below")
          captionContainer.empty();
        if (thumbnailEls.length > 0) {
          thumbnailEls.forEach((thumb, idx) => {
            thumb.classList.toggle("active-thumbnail", idx === currentIndex);
          });
        }
        const currentEntry = files[currentIndex];
        let [fileName, caption] = currentEntry.split("|").map((s) => s.trim());
        if (!fileName.includes(".")) {
          const mdFile = this.app.metadataCache.getFirstLinkpathDest(fileName, "");
          if (mdFile && mdFile.extension === "md") {
            fileName = mdFile.path;
          }
        }
        const filePath = this.getMediaSource(fileName);
        if (/\.(png|jpg|jpeg|gif)$/i.test(fileName)) {
          try {
            const compressedUrl = await compressImage(filePath, 800, 600, 0.7);
            const img = sliderContainer.createEl("img", { attr: { src: compressedUrl } });
            img.classList.add("slider-media");
          } catch (err) {
            const img = sliderContainer.createEl("img", { attr: { src: filePath } });
            img.classList.add("slider-media");
          }
        } else if (/\.(mp4|webm)$/i.test(fileName)) {
          const video = sliderContainer.createEl("video", { attr: { src: filePath, controls: "true" } });
          if (settings.autoplay)
            video.setAttribute("autoplay", "true");
          video.classList.add("slider-media");
          if (this.settings.enableVisualizer) {
            new Visualizer(video, sliderContainer, {
              color: this.settings.visualizerColor,
              height: this.settings.visualizerHeight
            });
          }
        } else if (/\.(mp3|ogg|wav)$/i.test(fileName)) {
          const audio = sliderContainer.createEl("audio", { attr: { src: filePath, controls: "true" } });
          audio.classList.add("slider-media", "audio-media");
          if (this.settings.enableVisualizer) {
            new Visualizer(audio, sliderContainer, {
              color: this.settings.visualizerColor,
              height: this.settings.visualizerHeight
            });
          }
        } else if (/\.(pdf)$/i.test(fileName)) {
          const iframe = sliderContainer.createEl("iframe", { attr: { src: filePath, width: "100%", height: "100%" } });
          iframe.classList.add("slider-media");
        } else if (/\.(md)$/i.test(fileName)) {
          const abstractFile = this.app.vault.getAbstractFileByPath(fileName);
          if (abstractFile && "extension" in abstractFile) {
            const content = await this.getMarkdownContent(fileName);
            sliderContainer.empty();
            await import_obsidian.MarkdownRenderer.renderMarkdown(content, sliderContainer, abstractFile.path, this);
          }
        } else {
          const link = sliderContainer.createEl("a", { text: "Open File", attr: { href: filePath, target: "_blank" } });
          link.classList.add("slider-media");
        }
        if (caption) {
          if (settings.captionMode === "overlay") {
            const capEl = sliderContainer.createEl("div", { text: caption });
            capEl.classList.add("slider-caption-overlay");
          } else {
            const capEl = captionContainer.createEl("div", { text: caption });
            capEl.classList.add("slider-caption");
          }
        }
        if (settings.interactiveNotes && notesTextarea) {
          const mediaKey = `${sliderId}-${files[currentIndex]}`;
          notesTextarea.value = this.notesManager.getNote(mediaKey);
        }
        if (this.settings.enableDrawingAnnotation) {
          const mediaKey = `${sliderId}-${files[currentIndex]}`;
          updateDrawingOverlay == null ? void 0 : updateDrawingOverlay(mediaKey);
        }
        sliderContainer.classList.remove(
          "transition-fade-out",
          "transition-slide-next-out",
          "transition-slide-prev-out",
          "transition-zoom-out",
          "transition-slide-up-out",
          "transition-slide-down-out",
          "transition-flip-out",
          "transition-flip-vertical-out",
          "transition-rotate-out",
          "transition-blur-out",
          "transition-squeeze-out"
        );
        switch (settings.transitionEffect) {
          case "fade":
            sliderContainer.classList.add("transition-fade-in");
            break;
          case "slide":
            sliderContainer.classList.add(currentDirection === "next" ? "transition-slide-next-in" : "transition-slide-prev-in");
            break;
          case "zoom":
            sliderContainer.classList.add("transition-zoom-in");
            break;
          case "slide-up":
            sliderContainer.classList.add("transition-slide-up-in");
            break;
          case "slide-down":
            sliderContainer.classList.add("transition-slide-down-in");
            break;
          case "flip":
            sliderContainer.classList.add("transition-flip-in");
            break;
          case "flip-vertical":
            sliderContainer.classList.add("transition-flip-vertical-in");
            break;
          case "rotate":
            sliderContainer.classList.add("transition-rotate-in");
            break;
          case "blur":
            sliderContainer.classList.add("transition-blur-in");
            break;
          case "squeeze":
            sliderContainer.classList.add("transition-squeeze-in");
            break;
          default:
            sliderContainer.classList.add("transition-fade-in");
        }
      }, settings.transitionDuration);
    };
    const throttledUpdate = this.throttle(updateMediaDisplay, 100);
    const goPrev = () => {
      currentDirection = "prev";
      currentIndex = (currentIndex - 1 + files.length) % files.length;
      throttledUpdate();
    };
    const goNext = () => {
      currentDirection = "next";
      currentIndex = (currentIndex + 1) % files.length;
      throttledUpdate();
    };
    prevBtn.onclick = goPrev;
    nextBtn.onclick = goNext;
    sliderContent.addEventListener("mouseenter", () => sliderContent.focus());
    sliderContent.addEventListener("mouseleave", () => sliderContent.blur());
    sliderContent.tabIndex = 0;
    sliderContent.addEventListener("keydown", (evt) => {
      if (evt.key === "ArrowLeft")
        goPrev();
      else if (evt.key === "ArrowRight")
        goNext();
    });
    sliderContent.addEventListener("wheel", (evt) => {
      if (Math.abs(evt.deltaX) > Math.abs(evt.deltaY)) {
        if (evt.deltaX > 30) {
          goNext();
          evt.preventDefault();
        } else if (evt.deltaX < -30) {
          goPrev();
          evt.preventDefault();
        }
      }
    });
    let touchStartX = 0;
    sliderContent.addEventListener("touchstart", (evt) => {
      touchStartX = evt.touches[0].clientX;
    });
    sliderContent.addEventListener("touchend", (evt) => {
      const touchEndX = evt.changedTouches[0].clientX;
      const diff = touchStartX - touchEndX;
      if (Math.abs(diff) > 50)
        diff > 0 ? goNext() : goPrev();
    });
    throttledUpdate();
    if (thumbnailContainer) {
      thumbnailContainer.empty();
      files.forEach((entry, index) => {
        var _a;
        let [fileName] = entry.split("|").map((s) => s.trim());
        let thumbEl;
        if (/\.(png|jpg|jpeg|gif)$/i.test(fileName)) {
          thumbEl = thumbnailContainer.createEl("img", {
            attr: { src: this.getMediaSource(fileName) },
            cls: "thumbnail"
          });
        } else {
          const ext = ((_a = fileName.split(".").pop()) == null ? void 0 : _a.toUpperCase()) || "FILE";
          thumbEl = thumbnailContainer.createEl("div", { text: ext });
          thumbEl.classList.add("thumbnail-placeholder");
        }
        if (settings.thumbnailPosition === "left" || settings.thumbnailPosition === "right") {
          thumbEl.classList.add("vertical-thumb");
        }
        thumbEl.onclick = () => {
          currentIndex = index;
          throttledUpdate();
        };
        thumbnailEls.push(thumbEl);
      });
    }
    if (settings.slideshowSpeed > 0) {
      setInterval(goNext, settings.slideshowSpeed * 1e3);
    }
  }
};
var MediaSliderPlugin = _MediaSliderPlugin;
MediaSliderPlugin.sliderCounter = 0;
var MediaSliderSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Media Slider Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Enable Drawing Annotation").setDesc("Toggle to enable drawing annotations on the slider. (Default: off)").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableDrawingAnnotation).onChange(async (value) => {
        this.plugin.settings.enableDrawingAnnotation = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Enable Visualizer").setDesc("Toggle to enable wave-like visualization for audio/video playback.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableVisualizer).onChange(async (value) => {
        this.plugin.settings.enableVisualizer = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Visualizer Color").setDesc("CSS color value for the visualizer wave.").addText(
      (text) => text.setValue(this.plugin.settings.visualizerColor).onChange(async (value) => {
        this.plugin.settings.visualizerColor = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Visualizer Height").setDesc("Height of the visualizer (e.g., '50px').").addText(
      (text) => text.setValue(this.plugin.settings.visualizerHeight).onChange(async (value) => {
        this.plugin.settings.visualizerHeight = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvY29tcHJlc3Npb24udHMiLCAic3JjL25vdGVzLnRzIiwgInNyYy9kcmF3aW5nLnRzIiwgInNyYy92aXN1YWxpemVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBtYWluLnRzXG5pbXBvcnQgeyBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIEFwcCwgU2V0dGluZywgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgVEZpbGUsIE1hcmtkb3duUmVuZGVyZXIsIE1hcmtkb3duVmlldyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgY29tcHJlc3NJbWFnZSB9IGZyb20gXCIuL3NyYy9jb21wcmVzc2lvblwiO1xuaW1wb3J0IHsgTm90ZXNNYW5hZ2VyIH0gZnJvbSBcIi4vc3JjL25vdGVzXCI7XG5pbXBvcnQgeyBEcmF3aW5nQW5ub3RhdGlvbiB9IGZyb20gXCIuL3NyYy9kcmF3aW5nXCI7XG5pbXBvcnQgeyBWaXN1YWxpemVyLCBWaXN1YWxpemVyT3B0aW9ucyB9IGZyb20gXCIuL3NyYy92aXN1YWxpemVyXCI7XG5cbmludGVyZmFjZSBNZWRpYVNsaWRlclNldHRpbmdzIHtcblx0ZW5hYmxlRHJhd2luZ0Fubm90YXRpb246IGJvb2xlYW47XG5cdGVuYWJsZVZpc3VhbGl6ZXI6IGJvb2xlYW47XG5cdHZpc3VhbGl6ZXJDb2xvcjogc3RyaW5nO1xuXHR2aXN1YWxpemVySGVpZ2h0OiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE1lZGlhU2xpZGVyU2V0dGluZ3MgPSB7XG5cdGVuYWJsZURyYXdpbmdBbm5vdGF0aW9uOiBmYWxzZSxcblx0ZW5hYmxlVmlzdWFsaXplcjogZmFsc2UsXG5cdHZpc3VhbGl6ZXJDb2xvcjogXCIjMDBmZjAwXCIsXG5cdHZpc3VhbGl6ZXJIZWlnaHQ6IFwiNTBweFwiXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZWRpYVNsaWRlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBNZWRpYVNsaWRlclNldHRpbmdzO1xuXHRwcml2YXRlIGZpbGVQYXRoQ2FjaGU6IE1hcDxzdHJpbmcsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG5cdHByaXZhdGUgbWFya2Rvd25DYWNoZTogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcblx0cHJpdmF0ZSBub3Rlc01hbmFnZXI6IE5vdGVzTWFuYWdlcjtcblx0cHJpdmF0ZSBkcmF3aW5nRGF0YTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuXHRwcml2YXRlIHN0YXRpYyBzbGlkZXJDb3VudGVyID0gMDtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJMb2FkaW5nIE1lZGlhIFNsaWRlciBQbHVnaW4uLi5cIik7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IE1lZGlhU2xpZGVyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHRcdHRoaXMubm90ZXNNYW5hZ2VyID0gbmV3IE5vdGVzTWFuYWdlcih0aGlzKTtcblx0XHRhd2FpdCB0aGlzLm5vdGVzTWFuYWdlci5sb2FkKCk7XG5cdFx0YXdhaXQgdGhpcy5sb2FkRHJhd2luZ0RhdGEoKTtcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoXCJtZWRpYS1zbGlkZXJcIiwgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xuXHRcdFx0dGhpcy5jcmVhdGVNZWRpYVNsaWRlcihzb3VyY2UsIGVsLCBjdHgpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gLS0tIFNldHRpbmdzIFBlcnNpc3RlbmNlIC0tLVxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdC8vIC0tLSBGb3JjZSBSZWZyZXNoIGZvciBJbW1lZGlhdGUgU2V0dGluZ3MgRWZmZWN0IC0tLVxuXHRyZWZyZXNoU2xpZGVycygpIHtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwibWFya2Rvd25cIikuZm9yRWFjaChsZWFmID0+IHtcblx0XHRcdC8vIEluc3RlYWQgb2YgY2FzdGluZyB0byBhbnksIGNoZWNrIGlmIGxlYWYudmlldyBpcyBhIE1hcmtkb3duVmlldyB3aXRoIGEgbG9hZCBtZXRob2QuXG5cdFx0XHRpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ICYmIHR5cGVvZiBsZWFmLnZpZXcubG9hZCA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdGxlYWYudmlldy5sb2FkKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvLyAtLS0gUGVyc2lzdGVudCBEcmF3aW5nIERhdGEgTWFuYWdlbWVudCAtLS1cblx0cHJpdmF0ZSBhc3luYyBsb2FkRHJhd2luZ0RhdGEoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHRoaXMubG9hZERhdGEoKTtcblx0XHR0aGlzLmRyYXdpbmdEYXRhID0gZGF0YT8uZHJhd2luZ3MgfHwge307XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHNhdmVEcmF3aW5nRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBkYXRhID0gKGF3YWl0IHRoaXMubG9hZERhdGEoKSkgfHwge307XG5cdFx0ZGF0YS5kcmF3aW5ncyA9IHRoaXMuZHJhd2luZ0RhdGE7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YShkYXRhKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgY2xlYW51cERyYXdpbmdEYXRhKHNsaWRlcklkOiBzdHJpbmcsIHZhbGlkRmlsZXM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Zm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcy5kcmF3aW5nRGF0YSkpIHtcblx0XHRcdGlmIChrZXkuc3RhcnRzV2l0aChgJHtzbGlkZXJJZH0tYCkpIHtcblx0XHRcdFx0Y29uc3QgbWVkaWFGaWxlID0ga2V5LnN1YnN0cmluZyhzbGlkZXJJZC5sZW5ndGggKyAxKTtcblx0XHRcdFx0aWYgKCF2YWxpZEZpbGVzLmluY2x1ZGVzKG1lZGlhRmlsZSkpIHtcblx0XHRcdFx0XHRkZWxldGUgdGhpcy5kcmF3aW5nRGF0YVtrZXldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGF3YWl0IHRoaXMuc2F2ZURyYXdpbmdEYXRhKCk7XG5cdH1cblxuXHQvLyAtLS0gU2ltcGxlIFlBTUwgUGFyc2VyIC0tLVxuXHRwcml2YXRlIHBhcnNlU2ltcGxlWUFNTCh5YW1sOiBzdHJpbmcpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcblx0XHRjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblx0XHRjb25zdCBsaW5lcyA9IHlhbWwuc3BsaXQoXCJcXG5cIik7XG5cdFx0Zm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xuXHRcdFx0bGluZSA9IGxpbmUudHJpbSgpO1xuXHRcdFx0aWYgKCFsaW5lKSBjb250aW51ZTtcblx0XHRcdGNvbnN0IHNlcGFyYXRvckluZGV4ID0gbGluZS5pbmRleE9mKFwiOlwiKTtcblx0XHRcdGlmIChzZXBhcmF0b3JJbmRleCA9PT0gLTEpIGNvbnRpbnVlO1xuXHRcdFx0Y29uc3Qga2V5ID0gbGluZS5zdWJzdHJpbmcoMCwgc2VwYXJhdG9ySW5kZXgpLnRyaW0oKTtcblx0XHRcdGxldCByYXdWYWx1ZSA9IGxpbmUuc3Vic3RyaW5nKHNlcGFyYXRvckluZGV4ICsgMSkudHJpbSgpO1xuXHRcdFx0bGV0IHZhbHVlOiBzdHJpbmcgfCBib29sZWFuIHwgbnVtYmVyO1xuXHRcdFx0aWYgKChyYXdWYWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHJhd1ZhbHVlLmVuZHNXaXRoKCdcIicpKSB8fFxuXHRcdFx0XHQocmF3VmFsdWUuc3RhcnRzV2l0aChcIidcIikgJiYgcmF3VmFsdWUuZW5kc1dpdGgoXCInXCIpKSkge1xuXHRcdFx0XHR2YWx1ZSA9IHJhd1ZhbHVlLnNsaWNlKDEsIC0xKTtcblx0XHRcdH0gZWxzZSBpZiAocmF3VmFsdWUgPT09IFwidHJ1ZVwiKSB7XG5cdFx0XHRcdHZhbHVlID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSBpZiAocmF3VmFsdWUgPT09IFwiZmFsc2VcIikge1xuXHRcdFx0XHR2YWx1ZSA9IGZhbHNlO1xuXHRcdFx0fSBlbHNlIGlmICghaXNOYU4oTnVtYmVyKHJhd1ZhbHVlKSkpIHtcblx0XHRcdFx0dmFsdWUgPSBOdW1iZXIocmF3VmFsdWUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFsdWUgPSByYXdWYWx1ZTtcblx0XHRcdH1cblx0XHRcdHJlc3VsdFtrZXldID0gdmFsdWU7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvLyAtLS0gUmVzb3VyY2UgSGVscGVycyAtLS1cblx0cHJpdmF0ZSBnZXRDYWNoZWRSZXNvdXJjZVBhdGgoZmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0aWYgKHRoaXMuZmlsZVBhdGhDYWNoZS5oYXMoZmlsZU5hbWUpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5maWxlUGF0aENhY2hlLmdldChmaWxlTmFtZSkhO1xuXHRcdH1cblx0XHRjb25zdCBwYXRoID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlci5nZXRSZXNvdXJjZVBhdGgoZmlsZU5hbWUpO1xuXHRcdHRoaXMuZmlsZVBhdGhDYWNoZS5zZXQoZmlsZU5hbWUsIHBhdGgpO1xuXHRcdHJldHVybiBwYXRoO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRNZWRpYVNvdXJjZShmaWxlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAoZmlsZU5hbWUuc3RhcnRzV2l0aChcImh0dHA6Ly9cIikgfHwgZmlsZU5hbWUuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpKSB7XG5cdFx0XHRyZXR1cm4gZmlsZU5hbWU7XG5cdFx0fVxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVOYW1lKTtcblx0XHRpZiAoIWZpbGUpIHtcblx0XHRcdGNvbnN0IG1hdGNoaW5nRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLmZpbHRlcihcblx0XHRcdFx0ZiA9PiBmLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gZmlsZU5hbWUudG9Mb3dlckNhc2UoKVxuXHRcdFx0KTtcblx0XHRcdGlmIChtYXRjaGluZ0ZpbGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0ZmlsZU5hbWUgPSBtYXRjaGluZ0ZpbGVzWzBdLnBhdGg7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRmlsZSBub3QgZm91bmQgaW4gdmF1bHQ6XCIsIGZpbGVOYW1lKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZ2V0Q2FjaGVkUmVzb3VyY2VQYXRoKGZpbGVOYW1lKTtcblx0fVxuXG5cdC8vIC0tLSBSZXZpc2VkIGdldE1hcmtkb3duQ29udGVudCB3aXRob3V0IHVuc2FmZSBjYXN0aW5nIC0tLVxuXHRwcml2YXRlIGFzeW5jIGdldE1hcmtkb3duQ29udGVudChmaWxlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRpZiAodGhpcy5tYXJrZG93bkNhY2hlLmhhcyhmaWxlTmFtZSkpIHtcblx0XHRcdHJldHVybiB0aGlzLm1hcmtkb3duQ2FjaGUuZ2V0KGZpbGVOYW1lKSE7XG5cdFx0fVxuXHRcdGNvbnN0IGFic3RyYWN0RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlTmFtZSk7XG5cdFx0Ly8gQ2hlY2sgaWYgdGhlIGFic3RyYWN0RmlsZSBpcyBhIGZpbGUgYnkgdmVyaWZ5aW5nIGl0IGhhcyBhbiBcImV4dGVuc2lvblwiIHByb3BlcnR5LlxuXHRcdGlmIChhYnN0cmFjdEZpbGUgJiYgXCJleHRlbnNpb25cIiBpbiBhYnN0cmFjdEZpbGUpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFic3RyYWN0RmlsZSk7XG5cdFx0XHR0aGlzLm1hcmtkb3duQ2FjaGUuc2V0KGZpbGVOYW1lLCBjb250ZW50KTtcblx0XHRcdHJldHVybiBjb250ZW50O1xuXHRcdH1cblx0XHRyZXR1cm4gXCJcIjtcblx0fVxuXG5cdHByaXZhdGUgdGhyb3R0bGU8VCBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihmbjogVCwgZGVsYXk6IG51bWJlcik6IFQge1xuXHRcdGxldCBsYXN0Q2FsbCA9IDA7XG5cdFx0cmV0dXJuICgoLi4uYXJnczogYW55W10pID0+IHtcblx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0XHRpZiAobm93IC0gbGFzdENhbGwgPCBkZWxheSkgcmV0dXJuO1xuXHRcdFx0bGFzdENhbGwgPSBub3c7XG5cdFx0XHRyZXR1cm4gZm4oLi4uYXJncyk7XG5cdFx0fSkgYXMgVDtcblx0fVxuXG5cdC8vIC0tLSBTbGlkZXIgQ3JlYXRpb24gLS0tXG5cdHByaXZhdGUgY3JlYXRlTWVkaWFTbGlkZXIoc291cmNlOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSB7XG5cdFx0Y29uc3QgbWV0YWRhdGFNYXRjaCA9IHNvdXJjZS5tYXRjaCgvLS0tXFxuKFtcXHNcXFNdKz8pXFxuLS0tLyk7XG5cdFx0Y29uc3QgbWVkaWFDb250ZW50ID0gc291cmNlLnJlcGxhY2UoLy0tLVxcbltcXHNcXFNdKz9cXG4tLS0vLCBcIlwiKS50cmltKCk7XG5cdFx0Y29uc3QgbWVkaWFGaWxlcyA9IG1lZGlhQ29udGVudC5zcGxpdChcIlxcblwiKS5tYXAobGluZSA9PiBsaW5lLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xuXG5cdFx0bGV0IHNldHRpbmdzOiBhbnkgPSB7XG5cdFx0XHRzbGlkZXJJZDogXCJcIixcblx0XHRcdGNhcm91c2VsU2hvd1RodW1ibmFpbHM6IHRydWUsXG5cdFx0XHR0aHVtYm5haWxQb3NpdGlvbjogXCJib3R0b21cIixcblx0XHRcdGNhcHRpb25Nb2RlOiBcImJlbG93XCIsXG5cdFx0XHRhdXRvcGxheTogZmFsc2UsXG5cdFx0XHRzbGlkZXNob3dTcGVlZDogNSxcblx0XHRcdHdpZHRoOiBcIjEwMCVcIixcblx0XHRcdGhlaWdodDogXCIzMDBweFwiLFxuXHRcdFx0dHJhbnNpdGlvbkVmZmVjdDogXCJmYWRlXCIsXG5cdFx0XHR0cmFuc2l0aW9uRHVyYXRpb246IDUwMCxcblx0XHRcdGVuaGFuY2VkVmlldzogZmFsc2UsXG5cdFx0XHRpbnRlcmFjdGl2ZU5vdGVzOiBmYWxzZVxuXHRcdH07XG5cblx0XHRpZiAobWV0YWRhdGFNYXRjaCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgcGFyc2VkU2V0dGluZ3MgPSB0aGlzLnBhcnNlU2ltcGxlWUFNTChtZXRhZGF0YU1hdGNoWzFdKTtcblx0XHRcdFx0c2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHNldHRpbmdzLCBwYXJzZWRTZXR0aW5ncyk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIG1lZGlhLXNsaWRlciBtZXRhZGF0YTpcIiwgZXJyb3IpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGxldCBzbGlkZXJJZCA9IHNldHRpbmdzLnNsaWRlcklkO1xuXHRcdGlmICghc2xpZGVySWQpIHtcblx0XHRcdHNsaWRlcklkID0gYHNsaWRlci0ke01lZGlhU2xpZGVyUGx1Z2luLnNsaWRlckNvdW50ZXIrK31gO1xuXHRcdH1cblxuXHRcdGNvbnN0IHZhbGlkRmlsZXMgPSBtZWRpYUZpbGVzLm1hcChmaWxlID0+IHtcblx0XHRcdGxldCBtYXRjaCA9IGZpbGUubWF0Y2goLyE/XFxbXFxbKC4qPylcXF1cXF0vKTtcblx0XHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdFx0bWF0Y2ggPSBmaWxlLm1hdGNoKC8hXFxbXFxdXFwoKC4qPylcXCkvKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogXCJcIjtcblx0XHR9KS5maWx0ZXIoQm9vbGVhbik7XG5cblx0XHRpZiAodmFsaWRGaWxlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdGVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gdmFsaWQgbWVkaWEgZmlsZXMgZm91bmQuXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5ub3Rlc01hbmFnZXIuY2xlYW51cE5vdGVzRm9yU2xpZGVyKHNsaWRlcklkLCB2YWxpZEZpbGVzKS5jYXRjaChjb25zb2xlLmVycm9yKTtcblx0XHR0aGlzLmNsZWFudXBEcmF3aW5nRGF0YShzbGlkZXJJZCwgdmFsaWRGaWxlcykuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cblx0XHR0aGlzLnJlbmRlclNsaWRlcihlbCwgdmFsaWRGaWxlcywgc2V0dGluZ3MsIHNsaWRlcklkKTtcblx0fVxuXG5cdC8vIC0tLSBSZW5kZXIgU2xpZGVyIFVJIC0tLVxuXHRwcml2YXRlIHJlbmRlclNsaWRlcihjb250YWluZXI6IEhUTUxFbGVtZW50LCBmaWxlczogc3RyaW5nW10sIHNldHRpbmdzOiBhbnksIHNsaWRlcklkOiBzdHJpbmcpIHtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblx0XHRsZXQgdXBkYXRlRHJhd2luZ092ZXJsYXk6ICgobWVkaWFLZXk6IHN0cmluZykgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG5cdFx0Y29uc3Qgc2xpZGVyV3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoXCJtZWRpYS1zbGlkZXItd3JhcHBlclwiKTtcblxuXHRcdC8vIExheW91dCBjbGFzc2VzIGJhc2VkIG9uIHRodW1ibmFpbCBwb3NpdGlvblxuXHRcdGlmIChzZXR0aW5ncy5jYXJvdXNlbFNob3dUaHVtYm5haWxzICYmIChzZXR0aW5ncy50aHVtYm5haWxQb3NpdGlvbiA9PT0gXCJsZWZ0XCIgfHwgc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwicmlnaHRcIikpIHtcblx0XHRcdHNsaWRlcldyYXBwZXIuY2xhc3NMaXN0LmFkZChcImZsZXgtcm93XCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzbGlkZXJXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJmbGV4LWNvbHVtblwiLCBcImNlbnRlclwiKTtcblx0XHR9XG5cblx0XHRjb25zdCBzbGlkZXJDb250ZW50ID0gc2xpZGVyV3JhcHBlci5jcmVhdGVEaXYoXCJzbGlkZXItY29udGVudFwiKTtcblx0XHQvLyBJbmxpbmUgd2lkdGggYXNzaWdubWVudCByZW1vdmVkIGluIGZhdm9yIG9mIENTU1xuXG5cdFx0Y29uc3Qgc2xpZGVyQ29udGFpbmVyID0gc2xpZGVyQ29udGVudC5jcmVhdGVEaXYoXCJzbGlkZXItY29udGFpbmVyXCIpO1xuXHRcdC8vIElubGluZSB3aWR0aCBhbmQgaGVpZ2h0IHJlbW92ZWQ7IENTUyBub3cgaGFuZGxlcyB0aGVzZVxuXG5cdFx0Y29uc3QgY2FwdGlvbkNvbnRhaW5lciA9IHNsaWRlckNvbnRlbnQuY3JlYXRlRGl2KFwic2xpZGVyLWNhcHRpb24tY29udGFpbmVyXCIpO1xuXG5cdFx0bGV0IHRodW1ibmFpbENvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgdGh1bWJuYWlsRWxzOiBIVE1MRWxlbWVudFtdID0gW107XG5cdFx0aWYgKHNldHRpbmdzLmNhcm91c2VsU2hvd1RodW1ibmFpbHMpIHtcblx0XHRcdHRodW1ibmFpbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdFx0XHR0aHVtYm5haWxDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRodW1ibmFpbC1jb250YWluZXJcIik7XG5cdFx0XHRpZiAoc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwibGVmdFwiIHx8IHNldHRpbmdzLnRodW1ibmFpbFBvc2l0aW9uID09PSBcInJpZ2h0XCIpIHtcblx0XHRcdFx0dGh1bWJuYWlsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRodW1ibmFpbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaG9yaXpvbnRhbFwiKTtcblx0XHRcdH1cblx0XHRcdC8vIElubGluZSB0aHVtYm5haWwgZGltZW5zaW9uIGFzc2lnbm1lbnRzIHJlbW92ZWRcblx0XHRcdGlmIChzZXR0aW5ncy50aHVtYm5haWxQb3NpdGlvbiA9PT0gXCJ0b3BcIiB8fCBzZXR0aW5ncy50aHVtYm5haWxQb3NpdGlvbiA9PT0gXCJsZWZ0XCIpIHtcblx0XHRcdFx0c2xpZGVyV3JhcHBlci5pbnNlcnRCZWZvcmUodGh1bWJuYWlsQ29udGFpbmVyLCBzbGlkZXJDb250ZW50KTtcblx0XHRcdH0gZWxzZSBpZiAoc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwiYm90dG9tXCIgfHwgc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwicmlnaHRcIikge1xuXHRcdFx0XHRzbGlkZXJXcmFwcGVyLmFwcGVuZENoaWxkKHRodW1ibmFpbENvbnRhaW5lcik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IGN1cnJlbnRJbmRleCA9IDA7XG5cdFx0bGV0IGN1cnJlbnREaXJlY3Rpb246IFwibmV4dFwiIHwgXCJwcmV2XCIgPSBcIm5leHRcIjtcblxuXHRcdGlmIChzZXR0aW5ncy5lbmhhbmNlZFZpZXcpIHtcblx0XHRcdGNvbnN0IGZ1bGxTY3JlZW5CdG4gPSBzbGlkZXJXcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdTI2RjZcIiwgY2xzOiBcImZ1bGxzY3JlZW4tYnRuXCIgfSk7XG5cdFx0XHRmdWxsU2NyZWVuQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICghZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpIHtcblx0XHRcdFx0XHRzbGlkZXJXcmFwcGVyLnJlcXVlc3RGdWxsc2NyZWVuKCkuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbmFibGluZyBmdWxsc2NyZWVuOlwiLCBlcnIpKTtcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImZ1bGxzY3JlZW4tc2xpZGVyXCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJmdWxsc2NyZWVuLXNsaWRlclwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgY29weUJ0biA9IHNsaWRlcldyYXBwZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlx1RDgzRFx1RENDQlwiLCBjbHM6IFwiY29weS1idG5cIiB9KTtcblx0XHRcdGNvcHlCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgY3VycmVudEVudHJ5ID0gZmlsZXNbY3VycmVudEluZGV4XTtcblx0XHRcdFx0bGV0IFtmaWxlTmFtZV0gPSBjdXJyZW50RW50cnkuc3BsaXQoXCJ8XCIpLm1hcChzID0+IHMudHJpbSgpKTtcblx0XHRcdFx0Y29uc3QgbWFya2Rvd25MaW5rID0gYCFbWyR7ZmlsZU5hbWV9XV1gO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KG1hcmtkb3duTGluayk7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJDb3BpZWQgbWFya2Rvd24gbGluayB0byBjbGlwYm9hcmQ6XCIsIG1hcmtkb3duTGluayk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gY29weSBtYXJrZG93biBsaW5rOlwiLCBlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGxldCBub3Rlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgbm90ZXNUZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBub3Rlc1RvZ2dsZUJ0bjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0XHRpZiAoc2V0dGluZ3MuaW50ZXJhY3RpdmVOb3Rlcykge1xuXHRcdFx0bm90ZXNUb2dnbGVCdG4gPSBzbGlkZXJXcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdUQ4M0RcdURDRERcIiwgY2xzOiBcIm5vdGVzLXRvZ2dsZS1idG5cIiB9KTtcblx0XHRcdG5vdGVzVG9nZ2xlQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdGlmIChub3Rlc0NvbnRhaW5lcikge1xuXHRcdFx0XHRcdG5vdGVzQ29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJ2aXNpYmxlXCIpO1xuXHRcdFx0XHRcdGNvbnN0IG1lZGlhS2V5ID0gYCR7c2xpZGVySWR9LSR7ZmlsZXNbY3VycmVudEluZGV4XX1gO1xuXHRcdFx0XHRcdGlmIChub3Rlc0NvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJ2aXNpYmxlXCIpICYmIG5vdGVzVGV4dGFyZWEpIHtcblx0XHRcdFx0XHRcdG5vdGVzVGV4dGFyZWEudmFsdWUgPSB0aGlzLm5vdGVzTWFuYWdlci5nZXROb3RlKG1lZGlhS2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdG5vdGVzQ29udGFpbmVyID0gc2xpZGVyV3JhcHBlci5jcmVhdGVEaXYoXCJub3Rlcy1jb250YWluZXJcIik7XG5cdFx0XHRub3Rlc1RleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuXHRcdFx0bm90ZXNUZXh0YXJlYS5jbGFzc0xpc3QuYWRkKFwibm90ZXMtdGV4dGFyZWFcIik7XG5cdFx0XHRub3Rlc1RleHRhcmVhLnBsYWNlaG9sZGVyID0gXCJBZGQgeW91ciBub3RlcyBoZXJlLi4uXCI7XG5cdFx0XHRub3Rlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChub3Rlc1RleHRhcmVhKTtcblxuXHRcdFx0Y29uc3Qgc2F2ZU5vdGVzQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblx0XHRcdHNhdmVOb3Rlc0J0bi50ZXh0Q29udGVudCA9IFwiXHVEODNEXHVEQ0JFXCI7XG5cdFx0XHRzYXZlTm90ZXNCdG4uY2xhc3NMaXN0LmFkZChcIm5vdGVzLXNhdmUtYnRuXCIpO1xuXHRcdFx0c2F2ZU5vdGVzQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IG1lZGlhS2V5ID0gYCR7c2xpZGVySWR9LSR7ZmlsZXNbY3VycmVudEluZGV4XX1gO1xuXHRcdFx0XHRpZiAobm90ZXNUZXh0YXJlYSkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMubm90ZXNNYW5hZ2VyLnNldE5vdGUobWVkaWFLZXksIG5vdGVzVGV4dGFyZWEudmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChub3Rlc0NvbnRhaW5lcikgbm90ZXNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XG5cdFx0XHR9O1xuXHRcdFx0bm90ZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoc2F2ZU5vdGVzQnRuKTtcblx0XHR9XG5cblx0XHRsZXQgZHJhd2luZ0Fubm90YXRpb246IERyYXdpbmdBbm5vdGF0aW9uIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGNsZWFyRHJhd2luZ0J0bjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVEcmF3aW5nQW5ub3RhdGlvbikge1xuXHRcdFx0Y29uc3QgZHJhd2luZ1RvZ2dsZUJ0biA9IHNsaWRlcldyYXBwZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlx1MjcwRlx1RkUwRlwiLCBjbHM6IFwiZHJhd2luZy10b2dnbGUtYnRuXCIgfSk7XG5cblx0XHRcdHVwZGF0ZURyYXdpbmdPdmVybGF5ID0gKG1lZGlhS2V5OiBzdHJpbmcpID0+IHtcblx0XHRcdFx0Y29uc3QgZXhpc3RpbmdPdmVybGF5ID0gc2xpZGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuZHJhd2luZy1vdmVybGF5XCIpO1xuXHRcdFx0XHRpZiAoZXhpc3RpbmdPdmVybGF5KSB7XG5cdFx0XHRcdFx0ZXhpc3RpbmdPdmVybGF5LnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHNhdmVkRHJhd2luZyA9IHRoaXMuZHJhd2luZ0RhdGFbbWVkaWFLZXldO1xuXHRcdFx0XHRpZiAoc2F2ZWREcmF3aW5nKSB7XG5cdFx0XHRcdFx0Y29uc3Qgb3ZlcmxheSA9IHNsaWRlckNvbnRhaW5lci5jcmVhdGVFbChcImltZ1wiLCB7IGF0dHI6IHsgc3JjOiBzYXZlZERyYXdpbmcgfSB9KTtcblx0XHRcdFx0XHRvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJkcmF3aW5nLW92ZXJsYXlcIik7XG5cdFx0XHRcdFx0aWYgKCFjbGVhckRyYXdpbmdCdG4pIHtcblx0XHRcdFx0XHRcdGNsZWFyRHJhd2luZ0J0biA9IHNsaWRlcldyYXBwZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlx1RDgzRFx1REREMVx1RkUwRlwiLCBjbHM6IFwiY2xlYXItZHJhd2luZy1idG5cIiB9KTtcblx0XHRcdFx0XHRcdGNsZWFyRHJhd2luZ0J0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgdGhpcy5kcmF3aW5nRGF0YVttZWRpYUtleV07XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZURyYXdpbmdEYXRhKCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nT3ZlcmxheSA9IHNsaWRlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmRyYXdpbmctb3ZlcmxheVwiKTtcblx0XHRcdFx0XHRcdFx0aWYgKGV4aXN0aW5nT3ZlcmxheSkgZXhpc3RpbmdPdmVybGF5LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4hLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4gPSBudWxsO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKGNsZWFyRHJhd2luZ0J0bikge1xuXHRcdFx0XHRcdFx0Y2xlYXJEcmF3aW5nQnRuLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2xlYXJEcmF3aW5nQnRuID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdGRyYXdpbmdUb2dnbGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgbWVkaWFLZXkgPSBgJHtzbGlkZXJJZH0tJHtmaWxlc1tjdXJyZW50SW5kZXhdfWA7XG5cdFx0XHRcdGlmIChkcmF3aW5nQW5ub3RhdGlvbikge1xuXHRcdFx0XHRcdGNvbnN0IGRyYXdpbmdEYXRhVXJsID0gZHJhd2luZ0Fubm90YXRpb24uZ2V0QW5ub3RhdGlvbigpO1xuXHRcdFx0XHRcdHRoaXMuZHJhd2luZ0RhdGFbbWVkaWFLZXldID0gZHJhd2luZ0RhdGFVcmw7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlRHJhd2luZ0RhdGEoKTtcblx0XHRcdFx0XHRkcmF3aW5nQW5ub3RhdGlvbi5kZXN0cm95KCk7XG5cdFx0XHRcdFx0ZHJhd2luZ0Fubm90YXRpb24gPSBudWxsO1xuXHRcdFx0XHRcdGRyYXdpbmdUb2dnbGVCdG4udGV4dENvbnRlbnQgPSBcIlx1MjcwRlx1RkUwRlwiO1xuXHRcdFx0XHRcdHVwZGF0ZURyYXdpbmdPdmVybGF5Py4obWVkaWFLZXkpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICh0aGlzLmRyYXdpbmdEYXRhW21lZGlhS2V5XSkge1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuZHJhd2luZ0RhdGFbbWVkaWFLZXldO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlRHJhd2luZ0RhdGEoKTtcblx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nT3ZlcmxheSA9IHNsaWRlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmRyYXdpbmctb3ZlcmxheVwiKTtcblx0XHRcdFx0XHRcdGlmIChleGlzdGluZ092ZXJsYXkpIGV4aXN0aW5nT3ZlcmxheS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdGlmIChjbGVhckRyYXdpbmdCdG4pIHtcblx0XHRcdFx0XHRcdFx0Y2xlYXJEcmF3aW5nQnRuLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4gPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkcmF3aW5nQW5ub3RhdGlvbiA9IG5ldyBEcmF3aW5nQW5ub3RhdGlvbihzbGlkZXJDb250YWluZXIpO1xuXHRcdFx0XHRcdGRyYXdpbmdUb2dnbGVCdG4udGV4dENvbnRlbnQgPSBcIlx1RDgzRFx1RENCRVwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChzbGlkZXJXcmFwcGVyKTtcblxuXHRcdGNvbnN0IHByZXZCdG4gPSBzbGlkZXJDb250ZW50LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdTJCOUNcIiwgY2xzOiBcInNsaWRlci1idG4gcHJldlwiIH0pO1xuXHRcdGNvbnN0IG5leHRCdG4gPSBzbGlkZXJDb250ZW50LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdTJCOUVcIiwgY2xzOiBcInNsaWRlci1idG4gbmV4dFwiIH0pO1xuXG5cdFx0Y29uc3QgdXBkYXRlTWVkaWFEaXNwbGF5ID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0Ly8gUmVtb3ZlIGFueSBwcmV2aW91cyB0cmFuc2l0aW9uIGNsYXNzZXMuXG5cdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcblx0XHRcdFx0XCJ0cmFuc2l0aW9uLWZhZGUtb3V0XCIsIFwidHJhbnNpdGlvbi1zbGlkZS1uZXh0LW91dFwiLCBcInRyYW5zaXRpb24tc2xpZGUtcHJldi1vdXRcIiwgXCJ0cmFuc2l0aW9uLXpvb20tb3V0XCIsXG5cdFx0XHRcdFwidHJhbnNpdGlvbi1zbGlkZS11cC1vdXRcIiwgXCJ0cmFuc2l0aW9uLXNsaWRlLWRvd24tb3V0XCIsIFwidHJhbnNpdGlvbi1mbGlwLW91dFwiLCBcInRyYW5zaXRpb24tZmxpcC12ZXJ0aWNhbC1vdXRcIixcblx0XHRcdFx0XCJ0cmFuc2l0aW9uLXJvdGF0ZS1vdXRcIiwgXCJ0cmFuc2l0aW9uLWJsdXItb3V0XCIsIFwidHJhbnNpdGlvbi1zcXVlZXplLW91dFwiXG5cdFx0XHQpO1xuXHRcdFx0XG5cdFx0XHRzd2l0Y2ggKHNldHRpbmdzLnRyYW5zaXRpb25FZmZlY3QpIHtcblx0XHRcdFx0Y2FzZSBcImZhZGVcIjpcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tZmFkZS1vdXRcIik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzbGlkZVwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGN1cnJlbnREaXJlY3Rpb24gPT09IFwibmV4dFwiID8gXCJ0cmFuc2l0aW9uLXNsaWRlLW5leHQtb3V0XCIgOiBcInRyYW5zaXRpb24tc2xpZGUtcHJldi1vdXRcIik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJ6b29tXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLXpvb20tb3V0XCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic2xpZGUtdXBcIjpcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tc2xpZGUtdXAtb3V0XCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic2xpZGUtZG93blwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHJhbnNpdGlvbi1zbGlkZS1kb3duLW91dFwiKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImZsaXBcIjpcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tZmxpcC1vdXRcIik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJmbGlwLXZlcnRpY2FsXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLWZsaXAtdmVydGljYWwtb3V0XCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicm90YXRlXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLXJvdGF0ZS1vdXRcIik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJibHVyXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLWJsdXItb3V0XCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic3F1ZWV6ZVwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHJhbnNpdGlvbi1zcXVlZXplLW91dFwiKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tZmFkZS1vdXRcIik7XG5cdFx0XHR9XG5cblx0XHRcdHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRzbGlkZXJDb250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0aWYgKHNldHRpbmdzLmNhcHRpb25Nb2RlID09PSBcImJlbG93XCIpIGNhcHRpb25Db250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0aWYgKHRodW1ibmFpbEVscy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0dGh1bWJuYWlsRWxzLmZvckVhY2goKHRodW1iLCBpZHgpID0+IHtcblx0XHRcdFx0XHRcdHRodW1iLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmUtdGh1bWJuYWlsXCIsIGlkeCA9PT0gY3VycmVudEluZGV4KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRFbnRyeSA9IGZpbGVzW2N1cnJlbnRJbmRleF07XG5cdFx0XHRcdGxldCBbZmlsZU5hbWUsIGNhcHRpb25dID0gY3VycmVudEVudHJ5LnNwbGl0KFwifFwiKS5tYXAocyA9PiBzLnRyaW0oKSk7XG5cdFx0XHRcdGlmICghZmlsZU5hbWUuaW5jbHVkZXMoXCIuXCIpKSB7XG5cdFx0XHRcdFx0Y29uc3QgbWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChmaWxlTmFtZSwgXCJcIik7XG5cdFx0XHRcdFx0aWYgKG1kRmlsZSAmJiBtZEZpbGUuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0XHRcdGZpbGVOYW1lID0gbWRGaWxlLnBhdGg7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gdGhpcy5nZXRNZWRpYVNvdXJjZShmaWxlTmFtZSk7XG5cblx0XHRcdFx0aWYgKC9cXC4ocG5nfGpwZ3xqcGVnfGdpZikkL2kudGVzdChmaWxlTmFtZSkpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29tcHJlc3NlZFVybCA9IGF3YWl0IGNvbXByZXNzSW1hZ2UoZmlsZVBhdGgsIDgwMCwgNjAwLCAwLjcpO1xuXHRcdFx0XHRcdFx0Y29uc3QgaW1nID0gc2xpZGVyQ29udGFpbmVyLmNyZWF0ZUVsKFwiaW1nXCIsIHsgYXR0cjogeyBzcmM6IGNvbXByZXNzZWRVcmwgfSB9KTtcblx0XHRcdFx0XHRcdGltZy5jbGFzc0xpc3QuYWRkKFwic2xpZGVyLW1lZGlhXCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0Y29uc3QgaW1nID0gc2xpZGVyQ29udGFpbmVyLmNyZWF0ZUVsKFwiaW1nXCIsIHsgYXR0cjogeyBzcmM6IGZpbGVQYXRoIH0gfSk7XG5cdFx0XHRcdFx0XHRpbWcuY2xhc3NMaXN0LmFkZChcInNsaWRlci1tZWRpYVwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoL1xcLihtcDR8d2VibSkkL2kudGVzdChmaWxlTmFtZSkpIHtcblx0XHRcdFx0XHRjb25zdCB2aWRlbyA9IHNsaWRlckNvbnRhaW5lci5jcmVhdGVFbChcInZpZGVvXCIsIHsgYXR0cjogeyBzcmM6IGZpbGVQYXRoLCBjb250cm9sczogXCJ0cnVlXCIgfSB9KTtcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuYXV0b3BsYXkpIHZpZGVvLnNldEF0dHJpYnV0ZShcImF1dG9wbGF5XCIsIFwidHJ1ZVwiKTtcblx0XHRcdFx0XHR2aWRlby5jbGFzc0xpc3QuYWRkKFwic2xpZGVyLW1lZGlhXCIpO1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVZpc3VhbGl6ZXIpIHtcblx0XHRcdFx0XHRcdG5ldyBWaXN1YWxpemVyKHZpZGVvLCBzbGlkZXJDb250YWluZXIsIHtcblx0XHRcdFx0XHRcdFx0Y29sb3I6IHRoaXMuc2V0dGluZ3MudmlzdWFsaXplckNvbG9yLFxuXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IHRoaXMuc2V0dGluZ3MudmlzdWFsaXplckhlaWdodFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKC9cXC4obXAzfG9nZ3x3YXYpJC9pLnRlc3QoZmlsZU5hbWUpKSB7XG5cdFx0XHRcdFx0Y29uc3QgYXVkaW8gPSBzbGlkZXJDb250YWluZXIuY3JlYXRlRWwoXCJhdWRpb1wiLCB7IGF0dHI6IHsgc3JjOiBmaWxlUGF0aCwgY29udHJvbHM6IFwidHJ1ZVwiIH0gfSk7XG5cdFx0XHRcdFx0YXVkaW8uY2xhc3NMaXN0LmFkZChcInNsaWRlci1tZWRpYVwiLCBcImF1ZGlvLW1lZGlhXCIpO1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVZpc3VhbGl6ZXIpIHtcblx0XHRcdFx0XHRcdG5ldyBWaXN1YWxpemVyKGF1ZGlvLCBzbGlkZXJDb250YWluZXIsIHtcblx0XHRcdFx0XHRcdFx0Y29sb3I6IHRoaXMuc2V0dGluZ3MudmlzdWFsaXplckNvbG9yLFxuXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IHRoaXMuc2V0dGluZ3MudmlzdWFsaXplckhlaWdodFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKC9cXC4ocGRmKSQvaS50ZXN0KGZpbGVOYW1lKSkge1xuXHRcdFx0XHRcdGNvbnN0IGlmcmFtZSA9IHNsaWRlckNvbnRhaW5lci5jcmVhdGVFbChcImlmcmFtZVwiLCB7IGF0dHI6IHsgc3JjOiBmaWxlUGF0aCwgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiIH0gfSk7XG5cdFx0XHRcdFx0aWZyYW1lLmNsYXNzTGlzdC5hZGQoXCJzbGlkZXItbWVkaWFcIik7XG5cdFx0XHRcdH0gZWxzZSBpZiAoL1xcLihtZCkkL2kudGVzdChmaWxlTmFtZSkpIHtcblx0XHRcdFx0XHRjb25zdCBhYnN0cmFjdEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZU5hbWUpO1xuXHRcdFx0XHRcdGlmIChhYnN0cmFjdEZpbGUgJiYgXCJleHRlbnNpb25cIiBpbiBhYnN0cmFjdEZpbGUpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmdldE1hcmtkb3duQ29udGVudChmaWxlTmFtZSk7XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0XHRcdGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24oY29udGVudCwgc2xpZGVyQ29udGFpbmVyLCBhYnN0cmFjdEZpbGUucGF0aCwgdGhpcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IGxpbmsgPSBzbGlkZXJDb250YWluZXIuY3JlYXRlRWwoXCJhXCIsIHsgdGV4dDogXCJPcGVuIEZpbGVcIiwgYXR0cjogeyBocmVmOiBmaWxlUGF0aCwgdGFyZ2V0OiBcIl9ibGFua1wiIH0gfSk7XG5cdFx0XHRcdFx0bGluay5jbGFzc0xpc3QuYWRkKFwic2xpZGVyLW1lZGlhXCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGNhcHRpb24pIHtcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuY2FwdGlvbk1vZGUgPT09IFwib3ZlcmxheVwiKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjYXBFbCA9IHNsaWRlckNvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGNhcHRpb24gfSk7XG5cdFx0XHRcdFx0XHRjYXBFbC5jbGFzc0xpc3QuYWRkKFwic2xpZGVyLWNhcHRpb24tb3ZlcmxheVwiKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc3QgY2FwRWwgPSBjYXB0aW9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogY2FwdGlvbiB9KTtcblx0XHRcdFx0XHRcdGNhcEVsLmNsYXNzTGlzdC5hZGQoXCJzbGlkZXItY2FwdGlvblwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoc2V0dGluZ3MuaW50ZXJhY3RpdmVOb3RlcyAmJiBub3Rlc1RleHRhcmVhKSB7XG5cdFx0XHRcdFx0Y29uc3QgbWVkaWFLZXkgPSBgJHtzbGlkZXJJZH0tJHtmaWxlc1tjdXJyZW50SW5kZXhdfWA7XG5cdFx0XHRcdFx0bm90ZXNUZXh0YXJlYS52YWx1ZSA9IHRoaXMubm90ZXNNYW5hZ2VyLmdldE5vdGUobWVkaWFLZXkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlRHJhd2luZ0Fubm90YXRpb24pIHtcblx0XHRcdFx0XHRjb25zdCBtZWRpYUtleSA9IGAke3NsaWRlcklkfS0ke2ZpbGVzW2N1cnJlbnRJbmRleF19YDtcblx0XHRcdFx0XHR1cGRhdGVEcmF3aW5nT3ZlcmxheT8uKG1lZGlhS2V5KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlbW92ZSBvdXQgdHJhbnNpdGlvbiBjbGFzc2VzIGFuZCBhZGQgaW4gdHJhbnNpdGlvbiBjbGFzc2VzXG5cdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFxuXHRcdFx0XHRcdFwidHJhbnNpdGlvbi1mYWRlLW91dFwiLCBcInRyYW5zaXRpb24tc2xpZGUtbmV4dC1vdXRcIiwgXCJ0cmFuc2l0aW9uLXNsaWRlLXByZXYtb3V0XCIsIFwidHJhbnNpdGlvbi16b29tLW91dFwiLFxuXHRcdFx0XHRcdFwidHJhbnNpdGlvbi1zbGlkZS11cC1vdXRcIiwgXCJ0cmFuc2l0aW9uLXNsaWRlLWRvd24tb3V0XCIsIFwidHJhbnNpdGlvbi1mbGlwLW91dFwiLCBcInRyYW5zaXRpb24tZmxpcC12ZXJ0aWNhbC1vdXRcIixcblx0XHRcdFx0XHRcInRyYW5zaXRpb24tcm90YXRlLW91dFwiLCBcInRyYW5zaXRpb24tYmx1ci1vdXRcIiwgXCJ0cmFuc2l0aW9uLXNxdWVlemUtb3V0XCJcblx0XHRcdFx0KTtcblx0XHRcdFx0c3dpdGNoIChzZXR0aW5ncy50cmFuc2l0aW9uRWZmZWN0KSB7XG5cdFx0XHRcdFx0Y2FzZSBcImZhZGVcIjpcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHJhbnNpdGlvbi1mYWRlLWluXCIpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInNsaWRlXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChjdXJyZW50RGlyZWN0aW9uID09PSBcIm5leHRcIiA/IFwidHJhbnNpdGlvbi1zbGlkZS1uZXh0LWluXCIgOiBcInRyYW5zaXRpb24tc2xpZGUtcHJldi1pblwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJ6b29tXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tem9vbS1pblwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzbGlkZS11cFwiOlxuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLXNsaWRlLXVwLWluXCIpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInNsaWRlLWRvd25cIjpcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHJhbnNpdGlvbi1zbGlkZS1kb3duLWluXCIpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImZsaXBcIjpcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHJhbnNpdGlvbi1mbGlwLWluXCIpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImZsaXAtdmVydGljYWxcIjpcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHJhbnNpdGlvbi1mbGlwLXZlcnRpY2FsLWluXCIpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInJvdGF0ZVwiOlxuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLXJvdGF0ZS1pblwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJibHVyXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tYmx1ci1pblwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzcXVlZXplXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tc3F1ZWV6ZS1pblwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tZmFkZS1pblwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgc2V0dGluZ3MudHJhbnNpdGlvbkR1cmF0aW9uKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgdGhyb3R0bGVkVXBkYXRlID0gdGhpcy50aHJvdHRsZSh1cGRhdGVNZWRpYURpc3BsYXksIDEwMCk7XG5cdFx0Y29uc3QgZ29QcmV2ID0gKCkgPT4ge1xuXHRcdFx0Y3VycmVudERpcmVjdGlvbiA9IFwicHJldlwiO1xuXHRcdFx0Y3VycmVudEluZGV4ID0gKGN1cnJlbnRJbmRleCAtIDEgKyBmaWxlcy5sZW5ndGgpICUgZmlsZXMubGVuZ3RoO1xuXHRcdFx0dGhyb3R0bGVkVXBkYXRlKCk7XG5cdFx0fTtcblx0XHRjb25zdCBnb05leHQgPSAoKSA9PiB7XG5cdFx0XHRjdXJyZW50RGlyZWN0aW9uID0gXCJuZXh0XCI7XG5cdFx0XHRjdXJyZW50SW5kZXggPSAoY3VycmVudEluZGV4ICsgMSkgJSBmaWxlcy5sZW5ndGg7XG5cdFx0XHR0aHJvdHRsZWRVcGRhdGUoKTtcblx0XHR9O1xuXG5cdFx0cHJldkJ0bi5vbmNsaWNrID0gZ29QcmV2O1xuXHRcdG5leHRCdG4ub25jbGljayA9IGdvTmV4dDtcblxuXHRcdHNsaWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgKCkgPT4gc2xpZGVyQ29udGVudC5mb2N1cygpKTtcblx0XHRzbGlkZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpID0+IHNsaWRlckNvbnRlbnQuYmx1cigpKTtcblx0XHRzbGlkZXJDb250ZW50LnRhYkluZGV4ID0gMDtcblx0XHRzbGlkZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdGlmIChldnQua2V5ID09PSBcIkFycm93TGVmdFwiKSBnb1ByZXYoKTtcblx0XHRcdGVsc2UgaWYgKGV2dC5rZXkgPT09IFwiQXJyb3dSaWdodFwiKSBnb05leHQoKTtcblx0XHR9KTtcblx0XHRzbGlkZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCAoZXZ0OiBXaGVlbEV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoTWF0aC5hYnMoZXZ0LmRlbHRhWCkgPiBNYXRoLmFicyhldnQuZGVsdGFZKSkge1xuXHRcdFx0XHRpZiAoZXZ0LmRlbHRhWCA+IDMwKSB7XG5cdFx0XHRcdFx0Z29OZXh0KCk7XG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZXZ0LmRlbHRhWCA8IC0zMCkge1xuXHRcdFx0XHRcdGdvUHJldigpO1xuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0bGV0IHRvdWNoU3RhcnRYID0gMDtcblx0XHRzbGlkZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIChldnQ6IFRvdWNoRXZlbnQpID0+IHtcblx0XHRcdHRvdWNoU3RhcnRYID0gZXZ0LnRvdWNoZXNbMF0uY2xpZW50WDtcblx0XHR9KTtcblx0XHRzbGlkZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCAoZXZ0OiBUb3VjaEV2ZW50KSA9PiB7XG5cdFx0XHRjb25zdCB0b3VjaEVuZFggPSBldnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WDtcblx0XHRcdGNvbnN0IGRpZmYgPSB0b3VjaFN0YXJ0WCAtIHRvdWNoRW5kWDtcblx0XHRcdGlmIChNYXRoLmFicyhkaWZmKSA+IDUwKSBkaWZmID4gMCA/IGdvTmV4dCgpIDogZ29QcmV2KCk7XG5cdFx0fSk7XG5cblx0XHR0aHJvdHRsZWRVcGRhdGUoKTtcblxuXHRcdGlmICh0aHVtYm5haWxDb250YWluZXIpIHtcblx0XHRcdHRodW1ibmFpbENvbnRhaW5lci5lbXB0eSgpO1xuXHRcdFx0ZmlsZXMuZm9yRWFjaCgoZW50cnksIGluZGV4KSA9PiB7XG5cdFx0XHRcdGxldCBbZmlsZU5hbWVdID0gZW50cnkuc3BsaXQoXCJ8XCIpLm1hcChzID0+IHMudHJpbSgpKTtcblx0XHRcdFx0bGV0IHRodW1iRWw6IEhUTUxFbGVtZW50O1xuXHRcdFx0XHRpZiAoL1xcLihwbmd8anBnfGpwZWd8Z2lmKSQvaS50ZXN0KGZpbGVOYW1lKSkge1xuXHRcdFx0XHRcdHRodW1iRWwgPSB0aHVtYm5haWxDb250YWluZXIuY3JlYXRlRWwoXCJpbWdcIiwge1xuXHRcdFx0XHRcdFx0YXR0cjogeyBzcmM6IHRoaXMuZ2V0TWVkaWFTb3VyY2UoZmlsZU5hbWUpIH0sXG5cdFx0XHRcdFx0XHRjbHM6IFwidGh1bWJuYWlsXCJcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zdCBleHQgPSBmaWxlTmFtZS5zcGxpdCgnLicpLnBvcCgpPy50b1VwcGVyQ2FzZSgpIHx8IFwiRklMRVwiO1xuXHRcdFx0XHRcdHRodW1iRWwgPSB0aHVtYm5haWxDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBleHQgfSk7XG5cdFx0XHRcdFx0dGh1bWJFbC5jbGFzc0xpc3QuYWRkKFwidGh1bWJuYWlsLXBsYWNlaG9sZGVyXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChzZXR0aW5ncy50aHVtYm5haWxQb3NpdGlvbiA9PT0gXCJsZWZ0XCIgfHwgc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwicmlnaHRcIikge1xuXHRcdFx0XHRcdHRodW1iRWwuY2xhc3NMaXN0LmFkZChcInZlcnRpY2FsLXRodW1iXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRodW1iRWwub25jbGljayA9ICgpID0+IHtcblx0XHRcdFx0XHRjdXJyZW50SW5kZXggPSBpbmRleDtcblx0XHRcdFx0XHR0aHJvdHRsZWRVcGRhdGUoKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0dGh1bWJuYWlsRWxzLnB1c2godGh1bWJFbCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoc2V0dGluZ3Muc2xpZGVzaG93U3BlZWQgPiAwKSB7XG5cdFx0XHRzZXRJbnRlcnZhbChnb05leHQsIHNldHRpbmdzLnNsaWRlc2hvd1NwZWVkICogMTAwMCk7XG5cdFx0fVxuXHR9XG59XG5cbmNsYXNzIE1lZGlhU2xpZGVyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IE1lZGlhU2xpZGVyUGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1lZGlhU2xpZGVyUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJNZWRpYSBTbGlkZXIgUGx1Z2luIFNldHRpbmdzXCIgfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiRW5hYmxlIERyYXdpbmcgQW5ub3RhdGlvblwiKVxuXHRcdFx0LnNldERlc2MoXCJUb2dnbGUgdG8gZW5hYmxlIGRyYXdpbmcgYW5ub3RhdGlvbnMgb24gdGhlIHNsaWRlci4gKERlZmF1bHQ6IG9mZilcIilcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRHJhd2luZ0Fubm90YXRpb24pXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVEcmF3aW5nQW5ub3RhdGlvbiA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZnJlc2hTbGlkZXJzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkVuYWJsZSBWaXN1YWxpemVyXCIpXG5cdFx0XHQuc2V0RGVzYyhcIlRvZ2dsZSB0byBlbmFibGUgd2F2ZS1saWtlIHZpc3VhbGl6YXRpb24gZm9yIGF1ZGlvL3ZpZGVvIHBsYXliYWNrLlwiKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVWaXN1YWxpemVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlVmlzdWFsaXplciA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZnJlc2hTbGlkZXJzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlZpc3VhbGl6ZXIgQ29sb3JcIilcblx0XHRcdC5zZXREZXNjKFwiQ1NTIGNvbG9yIHZhbHVlIGZvciB0aGUgdmlzdWFsaXplciB3YXZlLlwiKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy52aXN1YWxpemVyQ29sb3IpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy52aXN1YWxpemVyQ29sb3IgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoU2xpZGVycygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJWaXN1YWxpemVyIEhlaWdodFwiKVxuXHRcdFx0LnNldERlc2MoXCJIZWlnaHQgb2YgdGhlIHZpc3VhbGl6ZXIgKGUuZy4sICc1MHB4JykuXCIpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnZpc3VhbGl6ZXJIZWlnaHQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy52aXN1YWxpemVySGVpZ2h0ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVmcmVzaFNsaWRlcnMoKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cbn1cbiIsICJleHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcHJlc3NJbWFnZShcclxuXHRpbWFnZVVybDogc3RyaW5nLFxyXG5cdG1heFdpZHRoOiBudW1iZXIgPSA4MDAsXHJcblx0bWF4SGVpZ2h0OiBudW1iZXIgPSA2MDAsXHJcblx0cXVhbGl0eTogbnVtYmVyID0gMC43XHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG5cdFx0Ly8gVG8gc3VwcG9ydCBpbWFnZXMgZnJvbSBvdGhlciBkb21haW5zLCBzZXQgY3Jvc3NPcmlnaW4uXHJcblx0XHRpbWcuY3Jvc3NPcmlnaW4gPSBcIkFub255bW91c1wiO1xyXG5cdFx0aW1nLm9ubG9hZCA9ICgpID0+IHtcclxuXHRcdFx0bGV0IHsgd2lkdGgsIGhlaWdodCB9ID0gaW1nO1xyXG5cdFx0XHRsZXQgbmV3V2lkdGggPSB3aWR0aDtcclxuXHRcdFx0bGV0IG5ld0hlaWdodCA9IGhlaWdodDtcclxuXHJcblx0XHRcdC8vIENhbGN1bGF0ZSB0aGUgc2NhbGluZyBmYWN0b3IuXHJcblx0XHRcdGlmICh3aWR0aCA+IG1heFdpZHRoIHx8IGhlaWdodCA+IG1heEhlaWdodCkge1xyXG5cdFx0XHRcdGNvbnN0IHdpZHRoUmF0aW8gPSBtYXhXaWR0aCAvIHdpZHRoO1xyXG5cdFx0XHRcdGNvbnN0IGhlaWdodFJhdGlvID0gbWF4SGVpZ2h0IC8gaGVpZ2h0O1xyXG5cdFx0XHRcdGNvbnN0IHJhdGlvID0gTWF0aC5taW4od2lkdGhSYXRpbywgaGVpZ2h0UmF0aW8pO1xyXG5cdFx0XHRcdG5ld1dpZHRoID0gd2lkdGggKiByYXRpbztcclxuXHRcdFx0XHRuZXdIZWlnaHQgPSBoZWlnaHQgKiByYXRpbztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ3JlYXRlIGEgY2FudmFzIGFuZCBkcmF3IHRoZSByZXNpemVkIGltYWdlLlxyXG5cdFx0XHRjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG5cdFx0XHRjYW52YXMud2lkdGggPSBuZXdXaWR0aDtcclxuXHRcdFx0Y2FudmFzLmhlaWdodCA9IG5ld0hlaWdodDtcclxuXHRcdFx0Y29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHRcdFx0aWYgKCFjdHgpIHtcclxuXHRcdFx0XHRyZWplY3QoXCJDYW52YXMgY29udGV4dCBub3QgYXZhaWxhYmxlXCIpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgbmV3V2lkdGgsIG5ld0hlaWdodCk7XHJcblx0XHRcdGNvbnN0IGRhdGFVcmwgPSBjYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvanBlZ1wiLCBxdWFsaXR5KTtcclxuXHRcdFx0cmVzb2x2ZShkYXRhVXJsKTtcclxuXHRcdH07XHJcblx0XHRpbWcub25lcnJvciA9IChlcnIpID0+IHJlamVjdChlcnIpO1xyXG5cdFx0aW1nLnNyYyA9IGltYWdlVXJsO1xyXG5cdH0pO1xyXG59XHJcbiIsICJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTm90ZXNEYXRhIHtcclxuXHRba2V5OiBzdHJpbmddOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBOb3Rlc01hbmFnZXIge1xyXG5cdHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XHJcblx0cHJpdmF0ZSBkYXRhOiBOb3Rlc0RhdGEgPSB7fTtcclxuXHJcblx0Y29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IGxvYWRlZCA9IGF3YWl0IHRoaXMucGx1Z2luLmxvYWREYXRhKCk7XHJcblx0XHR0aGlzLmRhdGEgPSBsb2FkZWQgfHwge307XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5kYXRhKTtcclxuXHR9XHJcblxyXG5cdGdldE5vdGUoa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuZGF0YVtrZXldIHx8IFwiXCI7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzZXROb3RlKGtleTogc3RyaW5nLCBub3RlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHRoaXMuZGF0YVtrZXldID0gbm90ZTtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZSgpO1xyXG5cdH1cclxuXHJcblx0Ly8gUmVtb3ZlcyBub3RlcyBmb3IgdGhlIHNwZWNpZmllZCBzbGlkZXIgdGhhdCBhcmUgbm90IGluIHRoZSB2YWxpZEZpbGVzIGxpc3QuXHJcblx0YXN5bmMgY2xlYW51cE5vdGVzRm9yU2xpZGVyKHNsaWRlcklkOiBzdHJpbmcsIHZhbGlkRmlsZXM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmRhdGEpKSB7XHJcblx0XHRcdGlmIChrZXkuc3RhcnRzV2l0aChgJHtzbGlkZXJJZH0tYCkpIHtcclxuXHRcdFx0XHQvLyBFeHRyYWN0IHRoZSBtZWRpYSBmaWxlIHBvcnRpb24gZnJvbSB0aGUga2V5LlxyXG5cdFx0XHRcdGNvbnN0IG1lZGlhRmlsZSA9IGtleS5zdWJzdHJpbmcoc2xpZGVySWQubGVuZ3RoICsgMSk7XHJcblx0XHRcdFx0aWYgKCF2YWxpZEZpbGVzLmluY2x1ZGVzKG1lZGlhRmlsZSkpIHtcclxuXHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmRhdGFba2V5XTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGF3YWl0IHRoaXMuc2F2ZSgpO1xyXG5cdH1cclxufVxyXG4iLCAiLy8gZHJhd2luZy50c1xyXG5leHBvcnQgdHlwZSBEcmF3aW5nVG9vbCA9IFwiZnJlZWhhbmRcIiB8IFwibGluZVwiIHwgXCJyZWN0YW5nbGVcIiB8IFwiY2lyY2xlXCIgfCBcImVyYXNlclwiIHwgXCJsYXNlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIERyYXdpbmdBbm5vdGF0aW9uIHtcclxuXHRwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG5cdHByaXZhdGUgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblx0cHJpdmF0ZSB0b29sYmFyOiBIVE1MRGl2RWxlbWVudDtcclxuXHRwcml2YXRlIGRyYXdpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRwcml2YXRlIHN0YXJ0WDogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIHN0YXJ0WTogbnVtYmVyID0gMDtcclxuXHQvLyBUaGUgY3VycmVudCB0b29sIChmb3IgZnJlZWhhbmQsIGVyYXNlciwgbGFzZXIpIGFuZCBmb3IgZ2VvbWV0cmljIHRvb2xzLlxyXG5cdHByaXZhdGUgY3VycmVudFRvb2w6IERyYXdpbmdUb29sID0gXCJmcmVlaGFuZFwiO1xyXG5cdHByaXZhdGUgY3VycmVudEdlb21ldHJpY1Rvb2w6IERyYXdpbmdUb29sID0gXCJsaW5lXCI7XHJcblxyXG5cdC8vIFB1YmxpYyBkcmF3aW5nIHNldHRpbmdzLlxyXG5cdHB1YmxpYyBjb2xvcjogc3RyaW5nID0gXCIjRkYwMDAwXCI7IC8vIGRlZmF1bHQgcmVkXHJcblx0cHVibGljIGxpbmVXaWR0aDogbnVtYmVyID0gMjtcclxuXHJcblx0Y29uc3RydWN0b3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGFuZCBhcHBlbmQgY2FudmFzIG92ZXJsYXkuXHJcblx0XHR0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcblx0XHQvLyBBcHBseSBzdHlsaW5nIHZpYSBDU1MgY2xhc3MuXHJcblx0XHR0aGlzLmNhbnZhcy5jbGFzc0xpc3QuYWRkKFwiZHJhd2luZy1jYW52YXNcIik7XHJcblx0XHR0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XHJcblx0XHR0aGlzLnJlc2l6ZUNhbnZhcygpO1xyXG5cclxuXHRcdGNvbnN0IGN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHRcdGlmICghY3R4KSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZ2V0IDJEIGNvbnRleHRcIik7XHJcblx0XHR0aGlzLmN0eCA9IGN0eDtcclxuXHJcblx0XHQvLyBDcmVhdGUgdG9vbGJhciBvdmVybGF5LlxyXG5cdFx0dGhpcy50b29sYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdC8vIEFwcGx5IHN0eWxpbmcgdmlhIENTUyBjbGFzcy5cclxuXHRcdHRoaXMudG9vbGJhci5jbGFzc0xpc3QuYWRkKFwiZHJhd2luZy10b29sYmFyXCIpO1xyXG5cdFx0dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50b29sYmFyKTtcclxuXHRcdHRoaXMuY3JlYXRlVG9vbGJhcigpO1xyXG5cclxuXHRcdC8vIEJpbmQgcG9pbnRlciBldmVudHMuXHJcblx0XHR0aGlzLmVuYWJsZURyYXdpbmcoKTtcclxuXHJcblx0XHQvLyBVcGRhdGUgY2FudmFzIHNpemUgb24gd2luZG93IHJlc2l6ZS5cclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplQ2FudmFzQm91bmQpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZXNpemVDYW52YXNCb3VuZCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMucmVzaXplQ2FudmFzKCk7XHJcblx0fTtcclxuXHJcblx0cHJpdmF0ZSByZXNpemVDYW52YXMoKTogdm9pZCB7XHJcblx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuY29udGFpbmVyLmNsaWVudFdpZHRoO1xyXG5cdFx0dGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jb250YWluZXIuY2xpZW50SGVpZ2h0O1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZXNldFRvb2xiYXJIaWdobGlnaHRzKCk6IHZvaWQge1xyXG5cdFx0Ly8gUmVtb3ZlIGFjdGl2ZSBjbGFzcyBmcm9tIGVhY2ggYnV0dG9uLlxyXG5cdFx0QXJyYXkuZnJvbSh0aGlzLnRvb2xiYXIuY2hpbGRyZW4pLmZvckVhY2goY2hpbGQgPT4ge1xyXG5cdFx0XHQoY2hpbGQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtdG9vbFwiKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjcmVhdGVUb29sYmFyKCk6IHZvaWQge1xyXG5cdFx0Ly8gRnJlZWhhbmQgYnV0dG9uLlxyXG5cdFx0Y29uc3QgZnJlZWhhbmRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG5cdFx0ZnJlZWhhbmRCdG4udGV4dENvbnRlbnQgPSBcIlx1MjcwRlx1RkUwRlwiO1xyXG5cdFx0ZnJlZWhhbmRCdG4udGl0bGUgPSBcIkZyZWVoYW5kXCI7XHJcblx0XHRmcmVlaGFuZEJ0bi5jbGFzc0xpc3QuYWRkKFwiZHJhd2luZy1idG5cIiwgXCJmcmVlaGFuZC1idG5cIik7XHJcblx0XHRmcmVlaGFuZEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRUb29sID0gXCJmcmVlaGFuZFwiO1xyXG5cdFx0XHR0aGlzLnJlc2V0VG9vbGJhckhpZ2hsaWdodHMoKTtcclxuXHRcdFx0ZnJlZWhhbmRCdG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZS10b29sXCIpO1xyXG5cdFx0fTtcclxuXHRcdHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChmcmVlaGFuZEJ0bik7XHJcblxyXG5cdFx0Ly8gR2VvbWV0cmljIHRvb2xzIGRyb3Bkb3duLlxyXG5cdFx0Y29uc3QgZ2VvbURyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRldGFpbHNcIik7XHJcblx0XHRnZW9tRHJvcGRvd24uY2xhc3NMaXN0LmFkZChcImRyYXdpbmctZHJvcGRvd25cIik7XHJcblx0XHQvLyBTdW1tYXJ5IHNob3dzIGN1cnJlbnQgZ2VvbWV0cmljIHRvb2wgKGRlZmF1bHQgXCJsaW5lXCIpLlxyXG5cdFx0Y29uc3QgZ2VvbVN1bW1hcnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3VtbWFyeVwiKTtcclxuXHRcdGdlb21TdW1tYXJ5LnRleHRDb250ZW50ID0gXCJcdTI3OTZcIjsgLy8gZGVmYXVsdCBmb3IgbGluZVxyXG5cdFx0Z2VvbVN1bW1hcnkudGl0bGUgPSBcIkdlb21ldHJpYyBUb29scyAoTGluZSwgUmVjdCwgQ2lyY2xlKVwiO1xyXG5cdFx0Z2VvbVN1bW1hcnkuY2xhc3NMaXN0LmFkZChcImRyYXdpbmctZHJvcGRvd24tc3VtbWFyeVwiKTtcclxuXHRcdGdlb21Ecm9wZG93bi5hcHBlbmRDaGlsZChnZW9tU3VtbWFyeSk7XHJcblxyXG5cdFx0Ly8gQ29udGFpbmVyIGZvciBkcm9wZG93biBvcHRpb25zLlxyXG5cdFx0Y29uc3QgZ2VvbU9wdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0Z2VvbU9wdGlvbnMuY2xhc3NMaXN0LmFkZChcImRyYXdpbmctZHJvcGRvd24tb3B0aW9uc1wiKTtcclxuXHJcblx0XHRjb25zdCBnZW9tVG9vbHM6IHsgdG9vbDogRHJhd2luZ1Rvb2w7IGljb246IHN0cmluZzsgbGFiZWw6IHN0cmluZyB9W10gPSBbXHJcblx0XHRcdHsgdG9vbDogXCJsaW5lXCIsIGljb246IFwiXHUyNzk2XCIsIGxhYmVsOiBcIkxpbmVcIiB9LFxyXG5cdFx0XHR7IHRvb2w6IFwicmVjdGFuZ2xlXCIsIGljb246IFwiXHUyNUFEXCIsIGxhYmVsOiBcIlJlY3RhbmdsZVwiIH0sXHJcblx0XHRcdHsgdG9vbDogXCJjaXJjbGVcIiwgaWNvbjogXCJcdTI1RUZcIiwgbGFiZWw6IFwiQ2lyY2xlXCIgfSxcclxuXHRcdF07XHJcblxyXG5cdFx0Z2VvbVRvb2xzLmZvckVhY2gob3B0ID0+IHtcclxuXHRcdFx0Y29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHRcdFx0YnRuLnRleHRDb250ZW50ID0gb3B0Lmljb247XHJcblx0XHRcdGJ0bi50aXRsZSA9IG9wdC5sYWJlbDtcclxuXHRcdFx0YnRuLmNsYXNzTGlzdC5hZGQoXCJkcmF3aW5nLWJ0blwiLCBcImdlb20tdG9vbC1idG5cIik7XHJcblx0XHRcdGJ0bi5vbmNsaWNrID0gKGUpID0+IHtcclxuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdHRoaXMuY3VycmVudFRvb2wgPSBvcHQudG9vbDtcclxuXHRcdFx0XHR0aGlzLmN1cnJlbnRHZW9tZXRyaWNUb29sID0gb3B0LnRvb2w7XHJcblx0XHRcdFx0Z2VvbVN1bW1hcnkudGV4dENvbnRlbnQgPSBvcHQuaWNvbjtcclxuXHRcdFx0XHRnZW9tRHJvcGRvd24ucmVtb3ZlQXR0cmlidXRlKFwib3BlblwiKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0Z2VvbU9wdGlvbnMuYXBwZW5kQ2hpbGQoYnRuKTtcclxuXHRcdH0pO1xyXG5cdFx0Z2VvbURyb3Bkb3duLmFwcGVuZENoaWxkKGdlb21PcHRpb25zKTtcclxuXHRcdHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChnZW9tRHJvcGRvd24pO1xyXG5cclxuXHRcdC8vIEVyYXNlciBidXR0b24uXHJcblx0XHRjb25zdCBlcmFzZXJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG5cdFx0ZXJhc2VyQnRuLnRleHRDb250ZW50ID0gXCJcdUQ4M0VcdURERkRcIjtcclxuXHRcdGVyYXNlckJ0bi50aXRsZSA9IFwiRXJhc2VyXCI7XHJcblx0XHRlcmFzZXJCdG4uY2xhc3NMaXN0LmFkZChcImRyYXdpbmctYnRuXCIsIFwiZXJhc2VyLWJ0blwiKTtcclxuXHRcdGVyYXNlckJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRUb29sID0gXCJlcmFzZXJcIjtcclxuXHRcdFx0dGhpcy5yZXNldFRvb2xiYXJIaWdobGlnaHRzKCk7XHJcblx0XHRcdGVyYXNlckJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlLXRvb2xcIik7XHJcblx0XHR9O1xyXG5cdFx0dGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGVyYXNlckJ0bik7XHJcblxyXG5cdFx0Ly8gTGFzZXIgYnV0dG9uLlxyXG5cdFx0Y29uc3QgbGFzZXJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG5cdFx0bGFzZXJCdG4udGV4dENvbnRlbnQgPSBcIlx1RDgzRFx1REQyNlwiO1xyXG5cdFx0bGFzZXJCdG4udGl0bGUgPSBcIkxhc2VyICh0ZW1wb3JhcnkpXCI7XHJcblx0XHRsYXNlckJ0bi5jbGFzc0xpc3QuYWRkKFwiZHJhd2luZy1idG5cIiwgXCJsYXNlci1idG5cIik7XHJcblx0XHRsYXNlckJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRUb29sID0gXCJsYXNlclwiO1xyXG5cdFx0XHR0aGlzLnJlc2V0VG9vbGJhckhpZ2hsaWdodHMoKTtcclxuXHRcdFx0bGFzZXJCdG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZS10b29sXCIpO1xyXG5cdFx0fTtcclxuXHRcdHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChsYXNlckJ0bik7XHJcblxyXG5cdFx0Ly8gQ29sb3IgcGlja2VyLlxyXG5cdFx0Y29uc3QgY29sb3JJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuXHRcdGNvbG9ySW5wdXQudHlwZSA9IFwiY29sb3JcIjtcclxuXHRcdGNvbG9ySW5wdXQudmFsdWUgPSB0aGlzLmNvbG9yO1xyXG5cdFx0Y29sb3JJbnB1dC5jbGFzc0xpc3QuYWRkKFwiZHJhd2luZy1jb2xvci1pbnB1dFwiKTtcclxuXHRcdGNvbG9ySW5wdXQub25jaGFuZ2UgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMuY29sb3IgPSBjb2xvcklucHV0LnZhbHVlO1xyXG5cdFx0fTtcclxuXHRcdHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChjb2xvcklucHV0KTtcclxuXHJcblx0XHQvLyBMaW5lIHdpZHRoIGlucHV0LlxyXG5cdFx0Y29uc3Qgd2lkdGhJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuXHRcdHdpZHRoSW5wdXQudHlwZSA9IFwibnVtYmVyXCI7XHJcblx0XHR3aWR0aElucHV0Lm1pbiA9IFwiMVwiO1xyXG5cdFx0d2lkdGhJbnB1dC5tYXggPSBcIjEwXCI7XHJcblx0XHR3aWR0aElucHV0LnZhbHVlID0gdGhpcy5saW5lV2lkdGgudG9TdHJpbmcoKTtcclxuXHRcdHdpZHRoSW5wdXQuY2xhc3NMaXN0LmFkZChcImRyYXdpbmctbGluZXdpZHRoLWlucHV0XCIpO1xyXG5cdFx0d2lkdGhJbnB1dC5vbmNoYW5nZSA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5saW5lV2lkdGggPSBOdW1iZXIod2lkdGhJbnB1dC52YWx1ZSk7XHJcblx0XHR9O1xyXG5cdFx0dGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHdpZHRoSW5wdXQpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBoYW5kbGVQb2ludGVyRG93biA9IChlOiBQb2ludGVyRXZlbnQpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuZHJhd2luZyA9IHRydWU7XHJcblx0XHR0aGlzLnN0YXJ0WCA9IGUub2Zmc2V0WDtcclxuXHRcdHRoaXMuc3RhcnRZID0gZS5vZmZzZXRZO1xyXG5cdFx0Ly8gRm9yIGZyZWVoYW5kLCBlcmFzZXIsIGFuZCBsYXNlciwgYmVnaW4gYSBwYXRoIGltbWVkaWF0ZWx5LlxyXG5cdFx0aWYgKHRoaXMuY3VycmVudFRvb2wgPT09IFwiZnJlZWhhbmRcIiB8fCB0aGlzLmN1cnJlbnRUb29sID09PSBcImVyYXNlclwiIHx8IHRoaXMuY3VycmVudFRvb2wgPT09IFwibGFzZXJcIikge1xyXG5cdFx0XHR0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuXHRcdFx0dGhpcy5jdHgubW92ZVRvKHRoaXMuc3RhcnRYLCB0aGlzLnN0YXJ0WSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0cHJpdmF0ZSBoYW5kbGVQb2ludGVyTW92ZSA9IChlOiBQb2ludGVyRXZlbnQpOiB2b2lkID0+IHtcclxuXHRcdGlmICghdGhpcy5kcmF3aW5nKSByZXR1cm47XHJcblx0XHRjb25zdCBjdXJyZW50WCA9IGUub2Zmc2V0WDtcclxuXHRcdGNvbnN0IGN1cnJlbnRZID0gZS5vZmZzZXRZO1xyXG5cdFx0aWYgKHRoaXMuY3VycmVudFRvb2wgPT09IFwiZnJlZWhhbmRcIikge1xyXG5cdFx0XHR0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XHJcblx0XHRcdHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lVG8oY3VycmVudFgsIGN1cnJlbnRZKTtcclxuXHRcdFx0dGhpcy5jdHguc3Ryb2tlKCk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudFRvb2wgPT09IFwibGFzZXJcIikge1xyXG5cdFx0XHR0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XHJcblx0XHRcdHRoaXMuY3R4LmxpbmVXaWR0aCA9IDE7XHJcblx0XHRcdHRoaXMuY3R4LmxpbmVDYXAgPSBcInJvdW5kXCI7XHJcblx0XHRcdHRoaXMuY3R4LnNoYWRvd0NvbG9yID0gdGhpcy5jb2xvcjtcclxuXHRcdFx0dGhpcy5jdHguc2hhZG93Qmx1ciA9IDEwO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lVG8oY3VycmVudFgsIGN1cnJlbnRZKTtcclxuXHRcdFx0dGhpcy5jdHguc3Ryb2tlKCk7XHJcblx0XHRcdHRoaXMuY3R4LnNoYWRvd0JsdXIgPSAwO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRUb29sID09PSBcImVyYXNlclwiKSB7XHJcblx0XHRcdHRoaXMuY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiZGVzdGluYXRpb24tb3V0XCI7XHJcblx0XHRcdHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoICogNTtcclxuXHRcdFx0dGhpcy5jdHgubGluZVRvKGN1cnJlbnRYLCBjdXJyZW50WSk7XHJcblx0XHRcdHRoaXMuY3R4LnN0cm9rZSgpO1xyXG5cdFx0XHR0aGlzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1vdmVyXCI7XHJcblx0XHR9XHJcblx0XHQvLyBGb3IgZ2VvbWV0cmljIHRvb2xzLCBkcmF3aW5nIGlzIGRlZmVycmVkIHVudGlsIHBvaW50ZXIgdXAuXHJcblx0fTtcclxuXHJcblx0cHJpdmF0ZSBoYW5kbGVQb2ludGVyVXAgPSAoZTogUG9pbnRlckV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHRpZiAoIXRoaXMuZHJhd2luZykgcmV0dXJuO1xyXG5cdFx0dGhpcy5kcmF3aW5nID0gZmFsc2U7XHJcblx0XHRjb25zdCBlbmRYID0gZS5vZmZzZXRYO1xyXG5cdFx0Y29uc3QgZW5kWSA9IGUub2Zmc2V0WTtcclxuXHRcdHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jdXJyZW50VG9vbCA9PT0gXCJlcmFzZXJcIiA/IFwicmdiYSgwLDAsMCwxKVwiIDogdGhpcy5jb2xvcjtcclxuXHRcdHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG5cdFx0dGhpcy5jdHgubGluZUNhcCA9IFwicm91bmRcIjtcclxuXHJcblx0XHRpZiAodGhpcy5jdXJyZW50VG9vbCA9PT0gXCJsaW5lXCIpIHtcclxuXHRcdFx0dGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcblx0XHRcdHRoaXMuY3R4Lm1vdmVUbyh0aGlzLnN0YXJ0WCwgdGhpcy5zdGFydFkpO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lVG8oZW5kWCwgZW5kWSk7XHJcblx0XHRcdHRoaXMuY3R4LnN0cm9rZSgpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRUb29sID09PSBcInJlY3RhbmdsZVwiKSB7XHJcblx0XHRcdGNvbnN0IHJlY3RXaWR0aCA9IGVuZFggLSB0aGlzLnN0YXJ0WDtcclxuXHRcdFx0Y29uc3QgcmVjdEhlaWdodCA9IGVuZFkgLSB0aGlzLnN0YXJ0WTtcclxuXHRcdFx0dGhpcy5jdHguc3Ryb2tlUmVjdCh0aGlzLnN0YXJ0WCwgdGhpcy5zdGFydFksIHJlY3RXaWR0aCwgcmVjdEhlaWdodCk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudFRvb2wgPT09IFwiY2lyY2xlXCIpIHtcclxuXHRcdFx0Y29uc3QgcmFkaXVzID0gTWF0aC5zcXJ0KE1hdGgucG93KGVuZFggLSB0aGlzLnN0YXJ0WCwgMikgKyBNYXRoLnBvdyhlbmRZIC0gdGhpcy5zdGFydFksIDIpKTtcclxuXHRcdFx0dGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcblx0XHRcdHRoaXMuY3R4LmFyYyh0aGlzLnN0YXJ0WCwgdGhpcy5zdGFydFksIHJhZGl1cywgMCwgTWF0aC5QSSAqIDIpO1xyXG5cdFx0XHR0aGlzLmN0eC5zdHJva2UoKTtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50VG9vbCA9PT0gXCJsYXNlclwiKSB7XHJcblx0XHRcdC8vIEZvciBsYXNlciwgY2xlYXIgdGhlIGRyYXduIGxpbmUgYWZ0ZXIgYSBicmllZiBkZWxheS5cclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5jbGVhcigpO1xyXG5cdFx0XHR9LCAyMDApO1xyXG5cdFx0fVxyXG5cdFx0Ly8gRm9yIGZyZWVoYW5kIGFuZCBlcmFzZXIsIG5vdGhpbmcgZXh0cmEgaXMgbmVlZGVkLlxyXG5cdH07XHJcblxyXG5cdHB1YmxpYyBlbmFibGVEcmF3aW5nKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMuaGFuZGxlUG9pbnRlckRvd24pO1xyXG5cdFx0dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIHRoaXMuaGFuZGxlUG9pbnRlck1vdmUpO1xyXG5cdFx0dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCB0aGlzLmhhbmRsZVBvaW50ZXJVcCk7XHJcblx0XHR0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm91dFwiLCB0aGlzLmhhbmRsZVBvaW50ZXJVcCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZGlzYWJsZURyYXdpbmcoKTogdm9pZCB7XHJcblx0XHR0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgdGhpcy5oYW5kbGVQb2ludGVyRG93bik7XHJcblx0XHR0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5oYW5kbGVQb2ludGVyTW92ZSk7XHJcblx0XHR0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMuaGFuZGxlUG9pbnRlclVwKTtcclxuXHRcdHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyb3V0XCIsIHRoaXMuaGFuZGxlUG9pbnRlclVwKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRBbm5vdGF0aW9uKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gdGhpcy5jYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLnJlc2l6ZUNhbnZhc0JvdW5kKTtcclxuXHRcdHRoaXMuZGlzYWJsZURyYXdpbmcoKTtcclxuXHRcdGlmICh0aGlzLnRvb2xiYXIucGFyZW50Tm9kZSkgdGhpcy50b29sYmFyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy50b29sYmFyKTtcclxuXHRcdGlmICh0aGlzLmNhbnZhcy5wYXJlbnROb2RlKSB0aGlzLmNhbnZhcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuY2FudmFzKTtcclxuXHR9XHJcbn1cclxuIiwgIi8vIHZpc3VhbGl6ZXIudHNcclxuZXhwb3J0IGludGVyZmFjZSBWaXN1YWxpemVyT3B0aW9ucyB7XHJcblx0LyoqIEhlaWdodCBvZiB0aGUgdmlzdWFsaXplciBjYW52YXMgKGUuZy4sIFwiODBweFwiKSAqL1xyXG5cdGhlaWdodD86IHN0cmluZztcclxuXHQvKiogU2VsZWN0IHRoZSBncmFkaWVudCB0eXBlOiBcImJsdWUtcmVkXCIsIFwicmFpbmJvd1wiLCBvciBcImN1c3RvbVwiICovXHJcblx0Z3JhZGllbnRUeXBlPzogXCJibHVlLXJlZFwiIHwgXCJyYWluYm93XCIgfCBcImN1c3RvbVwiO1xyXG5cdC8qKiBJZiB1c2luZyBhIGN1c3RvbSBncmFkaWVudCwgc3VwcGx5IGFuIGFycmF5IG9mIENTUyBjb2xvciBzdHJpbmdzICovXHJcblx0Y3VzdG9tQ29sb3JzPzogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBWaXN1YWxpemVyIHtcclxuXHRwcml2YXRlIG1lZGlhRWxlbWVudDogSFRNTE1lZGlhRWxlbWVudDtcclxuXHRwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBvcHRpb25zOiBWaXN1YWxpemVyT3B0aW9ucztcclxuXHRwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcblx0cHJpdmF0ZSBjYW52YXNDdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuXHRwcml2YXRlIGF1ZGlvQ29udGV4dDogQXVkaW9Db250ZXh0O1xyXG5cdHByaXZhdGUgYW5hbHlzZXI6IEFuYWx5c2VyTm9kZTtcclxuXHRwcml2YXRlIHNvdXJjZTogTWVkaWFFbGVtZW50QXVkaW9Tb3VyY2VOb2RlO1xyXG5cdHByaXZhdGUgYW5pbWF0aW9uRnJhbWVJZDogbnVtYmVyO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihtZWRpYUVsZW1lbnQ6IEhUTUxNZWRpYUVsZW1lbnQsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG9wdGlvbnM6IFZpc3VhbGl6ZXJPcHRpb25zID0ge30pIHtcclxuXHRcdHRoaXMubWVkaWFFbGVtZW50ID0gbWVkaWFFbGVtZW50O1xyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcblx0XHQvLyBEZWZhdWx0IG9wdGlvbnM6IGluY3JlYXNlZCBoZWlnaHQsIHJhaW5ib3cgZ3JhZGllbnQuXHJcblx0XHR0aGlzLm9wdGlvbnMgPSB7XHJcblx0XHRcdGhlaWdodDogb3B0aW9ucy5oZWlnaHQgPz8gXCIxMDBweFwiLFxyXG5cdFx0XHRncmFkaWVudFR5cGU6IG9wdGlvbnMuZ3JhZGllbnRUeXBlID8/IFwiYmx1ZS1yZWRcIixcclxuXHRcdFx0Y3VzdG9tQ29sb3JzOiBvcHRpb25zLmN1c3RvbUNvbG9yc1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBDcmVhdGUgYSBjYW52YXMgb3ZlcmxheS5cclxuXHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuXHRcdHRoaXMuY2FudmFzLmNsYXNzTGlzdC5hZGQoXCJ2aXN1YWxpemVyLWNhbnZhc1wiKTtcclxuXHRcdC8vIFNldCBDU1MgdmFyaWFibGUgZm9yIGhlaWdodC5cclxuXHRcdHRoaXMuY2FudmFzLnN0eWxlLnNldFByb3BlcnR5KCctLXZpc3VhbGl6ZXItaGVpZ2h0JywgdGhpcy5vcHRpb25zLmhlaWdodCB8fCBcIjEwMHB4XCIpO1xyXG5cdFx0Ly8gU2V0IGV4cGxpY2l0IGRpbWVuc2lvbnMuXHJcblx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcclxuXHRcdHRoaXMuY2FudmFzLmhlaWdodCA9IHBhcnNlSW50KHRoaXMub3B0aW9ucy5oZWlnaHQgfHwgXCI4MFwiLCAxMCk7XHJcblx0XHR0aGlzLmNhbnZhc0N0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSE7XHJcblx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG5cclxuXHRcdC8vIFNldCB1cCB0aGUgYXVkaW8gY29udGV4dCBhbmQgYW5hbHlzZXIuXHJcblx0XHR0aGlzLmF1ZGlvQ29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCAod2luZG93IGFzIGFueSkud2Via2l0QXVkaW9Db250ZXh0KSgpO1xyXG5cdFx0dGhpcy5zb3VyY2UgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UodGhpcy5tZWRpYUVsZW1lbnQpO1xyXG5cdFx0dGhpcy5hbmFseXNlciA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7XHJcblx0XHQvLyBJbmNyZWFzZSByZXNvbHV0aW9uIGFuZCByZXNwb25zaXZlbmVzcy5cclxuXHRcdHRoaXMuYW5hbHlzZXIuZmZ0U2l6ZSA9IDUxMjtcclxuXHRcdHRoaXMuYW5hbHlzZXIuc21vb3RoaW5nVGltZUNvbnN0YW50ID0gMC4wNTtcclxuXHRcdHRoaXMuYW5hbHlzZXIubWluRGVjaWJlbHMgPSAtMTAwO1xyXG5cdFx0dGhpcy5hbmFseXNlci5tYXhEZWNpYmVscyA9IC0zMDtcclxuXHRcdHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5hbmFseXNlcik7XHJcblx0XHR0aGlzLmFuYWx5c2VyLmNvbm5lY3QodGhpcy5hdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xyXG5cclxuXHRcdHRoaXMuYW5pbWF0aW9uRnJhbWVJZCA9IDA7XHJcblx0XHR0aGlzLmRyYXcoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZHJhdygpIHtcclxuXHRcdGNvbnN0IGJ1ZmZlckxlbmd0aCA9IHRoaXMuYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQ7XHJcblx0XHRjb25zdCBkYXRhQXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXJMZW5ndGgpO1xyXG5cdFx0Ly8gTWlycm9yIHRoZSBsZWZ0IGFuZCByaWdodCBoYWx2ZXMgZm9yIHN5bW1ldHJ5LlxyXG5cdFx0Y29uc3QgaGFsZkJpbnMgPSBNYXRoLmZsb29yKGJ1ZmZlckxlbmd0aCAvIDIpO1xyXG5cdFx0Y29uc3QgZ2FwID0gMjsgLy8gR2FwIGJldHdlZW4gYmFycy5cclxuXHRcdGNvbnN0IGNhbnZhc1dpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XHJcblx0XHRjb25zdCBjYW52YXNIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcblx0XHRjb25zdCBtaWRYID0gY2FudmFzV2lkdGggLyAyO1xyXG5cdFx0Ly8gU2V0IGJhc2VsaW5lIGF0IHZlcnRpY2FsIGNlbnRlci5cclxuXHRcdGNvbnN0IGJhc2VsaW5lID0gY2FudmFzSGVpZ2h0IC8gMjtcclxuXHRcdC8vIENhbGN1bGF0ZSB0aGUgd2lkdGggYXZhaWxhYmxlIG9uIG9uZSBzaWRlLlxyXG5cdFx0Y29uc3Qgc2xvdFdpZHRoID0gbWlkWCAvIGhhbGZCaW5zO1xyXG5cdFx0Ly8gVXNlIDYwJSBvZiB0aGUgc2xvdCB3aWR0aCBmb3IgYSB0aGluIGJhci5cclxuXHRcdGNvbnN0IGJhcldpZHRoID0gc2xvdFdpZHRoICogMC42O1xyXG5cdFx0XHJcblx0XHRjb25zdCBkcmF3QmFycyA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5hbmFseXNlci5nZXRCeXRlRnJlcXVlbmN5RGF0YShkYXRhQXJyYXkpO1xyXG5cdFx0XHR0aGlzLmNhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcblx0XHRcdFxyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGhhbGZCaW5zOyBpKyspIHtcclxuXHRcdFx0XHQvLyBHZXQgbm9ybWFsaXplZCBpbnRlbnNpdHkgYW5kIGFjY2VudHVhdGUgZGlmZmVyZW5jZXMuXHJcblx0XHRcdFx0Y29uc3QgcmF3SW50ZW5zaXR5ID0gZGF0YUFycmF5W2ldIC8gMjU1O1xyXG5cdFx0XHRcdGNvbnN0IGludGVuc2l0eSA9IE1hdGgucG93KHJhd0ludGVuc2l0eSwgMik7XHJcblx0XHRcdFx0Ly8gQmFyIGhlaWdodDogbWF4aW11bSBoZWlnaHQgaXMgdGhlIGRpc3RhbmNlIGZyb20gYmFzZWxpbmUgdG8gdG9wLlxyXG5cdFx0XHRcdGNvbnN0IGJhckhlaWdodCA9IGludGVuc2l0eSAqIGJhc2VsaW5lO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEJ1aWxkIGEgZ3JhZGllbnQgZnJvbSB0aGUgYmFzZWxpbmUgdXB3YXJkLlxyXG5cdFx0XHRcdGxldCBncmFkaWVudDogQ2FudmFzR3JhZGllbnQ7XHJcblx0XHRcdFx0aWYgKHRoaXMub3B0aW9ucy5ncmFkaWVudFR5cGUgPT09IFwiYmx1ZS1yZWRcIikge1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQgPSB0aGlzLmNhbnZhc0N0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCBiYXNlbGluZSwgMCwgYmFzZWxpbmUgLSBiYXJIZWlnaHQpO1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIFwiaHNsKDI0MCw4MCUsNDAlKVwiKTtcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCBcImhzbCgwLDkwJSw1MCUpXCIpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyYWRpZW50VHlwZSA9PT0gXCJyYWluYm93XCIpIHtcclxuXHRcdFx0XHRcdGdyYWRpZW50ID0gdGhpcy5jYW52YXNDdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgYmFzZWxpbmUsIDAsIGJhc2VsaW5lIC0gYmFySGVpZ2h0KTtcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBcImhzbCgyNDAsMTAwJSw1MCUpXCIpOyAgLy8gYmx1ZVxyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuMjUsIFwiaHNsKDE4MCwxMDAlLDUwJSlcIik7IC8vIGN5YW5cclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjUsIFwiaHNsKDEyMCwxMDAlLDUwJSlcIik7ICAvLyBncmVlblxyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNzUsIFwiaHNsKDYwLDEwMCUsNTAlKVwiKTsgIC8vIHllbGxvd1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwiaHNsKDAsMTAwJSw1MCUpXCIpOyAgICAgIC8vIHJlZFxyXG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyYWRpZW50VHlwZSA9PT0gXCJjdXN0b21cIiAmJiB0aGlzLm9wdGlvbnMuY3VzdG9tQ29sb3JzICYmIHRoaXMub3B0aW9ucy5jdXN0b21Db2xvcnMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQgPSB0aGlzLmNhbnZhc0N0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCBiYXNlbGluZSwgMCwgYmFzZWxpbmUgLSBiYXJIZWlnaHQpO1xyXG5cdFx0XHRcdFx0Y29uc3QgbiA9IHRoaXMub3B0aW9ucy5jdXN0b21Db2xvcnMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDA7IGogPCBuOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKGogLyAobiAtIDEpLCB0aGlzLm9wdGlvbnMuY3VzdG9tQ29sb3JzW2pdKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gcmFpbmJvdy5cclxuXHRcdFx0XHRcdGdyYWRpZW50ID0gdGhpcy5jYW52YXNDdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgYmFzZWxpbmUsIDAsIGJhc2VsaW5lIC0gYmFySGVpZ2h0KTtcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBcImhzbCgyNDAsMTAwJSw1MCUpXCIpO1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuMjUsIFwiaHNsKDE4MCwxMDAlLDUwJSlcIik7XHJcblx0XHRcdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoMC41LCBcImhzbCgxMjAsMTAwJSw1MCUpXCIpO1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNzUsIFwiaHNsKDYwLDEwMCUsNTAlKVwiKTtcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCBcImhzbCgwLDEwMCUsNTAlKVwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRGV0ZXJtaW5lIHggcG9zaXRpb25zIGZvciBzeW1tZXRyaWMgYmFycy5cclxuXHRcdFx0XHRjb25zdCB4UmlnaHQgPSBtaWRYICsgaSAqIChiYXJXaWR0aCArIGdhcCk7XHJcblx0XHRcdFx0Y29uc3QgeExlZnQgPSBtaWRYIC0gKGkgKyAxKSAqIChiYXJXaWR0aCArIGdhcCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRHJhdyBiYXJzIHJpc2luZyB1cHdhcmQgZnJvbSB0aGUgYmFzZWxpbmUuXHJcblx0XHRcdFx0dGhpcy5jYW52YXNDdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7XHJcblx0XHRcdFx0dGhpcy5jYW52YXNDdHguZmlsbFJlY3QoeFJpZ2h0LCBiYXNlbGluZSAtIGJhckhlaWdodCwgYmFyV2lkdGgsIGJhckhlaWdodCk7XHJcblx0XHRcdFx0dGhpcy5jYW52YXNDdHguZmlsbFJlY3QoeExlZnQsIGJhc2VsaW5lIC0gYmFySGVpZ2h0LCBiYXJXaWR0aCwgYmFySGVpZ2h0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmFuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0JhcnMpO1xyXG5cdFx0fTtcclxuXHRcdGRyYXdCYXJzKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZGVzdHJveSgpIHtcclxuXHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCk7XHJcblx0XHR0aGlzLmNhbnZhcy5yZW1vdmUoKTtcclxuXHRcdHRoaXMuc291cmNlLmRpc2Nvbm5lY3QoKTtcclxuXHRcdHRoaXMuYW5hbHlzZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0aWYgKHRoaXMuYXVkaW9Db250ZXh0LnN0YXRlICE9PSBcImNsb3NlZFwiKSB7XHJcblx0XHRcdHRoaXMuYXVkaW9Db250ZXh0LmNsb3NlKCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQSxzQkFBNEg7OztBQ0Q1SCxlQUFzQixjQUNyQixVQUNBLFdBQW1CLEtBQ25CLFlBQW9CLEtBQ3BCLFVBQWtCLEtBQ0E7QUFDbEIsU0FBTyxJQUFJLFFBQVEsQ0FBQyxTQUFTLFdBQVc7QUFDdkMsVUFBTSxNQUFNLElBQUksTUFBTTtBQUV0QixRQUFJLGNBQWM7QUFDbEIsUUFBSSxTQUFTLE1BQU07QUFDbEIsVUFBSSxFQUFFLE9BQU8sT0FBTyxJQUFJO0FBQ3hCLFVBQUksV0FBVztBQUNmLFVBQUksWUFBWTtBQUdoQixVQUFJLFFBQVEsWUFBWSxTQUFTLFdBQVc7QUFDM0MsY0FBTSxhQUFhLFdBQVc7QUFDOUIsY0FBTSxjQUFjLFlBQVk7QUFDaEMsY0FBTSxRQUFRLEtBQUssSUFBSSxZQUFZLFdBQVc7QUFDOUMsbUJBQVcsUUFBUTtBQUNuQixvQkFBWSxTQUFTO0FBQUEsTUFDdEI7QUFH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
