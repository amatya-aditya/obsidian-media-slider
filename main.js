/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MediaSliderPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/compression.ts
async function compressImage(imageUrl, maxWidth = 800, maxHeight = 600, quality = 0.7) {
  return new Promise((resolve, reject) => {
    const img = new Image();
    img.crossOrigin = "Anonymous";
    img.onload = () => {
      let { width, height } = img;
      let newWidth = width;
      let newHeight = height;
      if (width > maxWidth || height > maxHeight) {
        const widthRatio = maxWidth / width;
        const heightRatio = maxHeight / height;
        const ratio = Math.min(widthRatio, heightRatio);
        newWidth = width * ratio;
        newHeight = height * ratio;
      }
      const canvas = document.createElement("canvas");
      canvas.width = newWidth;
      canvas.height = newHeight;
      const ctx = canvas.getContext("2d");
      if (!ctx) {
        reject("Canvas context not available");
        return;
      }
      ctx.drawImage(img, 0, 0, newWidth, newHeight);
      const dataUrl = canvas.toDataURL("image/jpeg", quality);
      resolve(dataUrl);
    };
    img.onerror = (err) => reject(err);
    img.src = imageUrl;
  });
}

// src/notes.ts
var NotesManager = class {
  constructor(plugin) {
    this.data = {};
    this.plugin = plugin;
  }
  async load() {
    const loaded = await this.plugin.loadData();
    this.data = loaded || {};
  }
  async save() {
    await this.plugin.saveData(this.data);
  }
  getNote(key) {
    return this.data[key] || "";
  }
  async setNote(key, note) {
    this.data[key] = note;
    await this.save();
  }
  // Removes notes for the specified slider that are not in the validFiles list.
  async cleanupNotesForSlider(sliderId, validFiles) {
    for (const key of Object.keys(this.data)) {
      if (key.startsWith(`${sliderId}-`)) {
        const mediaFile = key.substring(sliderId.length + 1);
        if (!validFiles.includes(mediaFile)) {
          delete this.data[key];
        }
      }
    }
    await this.save();
  }
};

// src/drawing.ts
var DrawingAnnotation = class {
  constructor(container) {
    this.drawing = false;
    this.startX = 0;
    this.startY = 0;
    // The current tool (for freehand, eraser, laser) and for geometric tools.
    this.currentTool = "freehand";
    this.currentGeometricTool = "line";
    // Public drawing settings.
    this.color = "#FF0000";
    // default red
    this.lineWidth = 2;
    this.resizeCanvasBound = () => {
      this.resizeCanvas();
    };
    this.handlePointerDown = (e) => {
      this.drawing = true;
      this.startX = e.offsetX;
      this.startY = e.offsetY;
      if (this.currentTool === "freehand" || this.currentTool === "eraser" || this.currentTool === "laser") {
        this.ctx.beginPath();
        this.ctx.moveTo(this.startX, this.startY);
      }
    };
    this.handlePointerMove = (e) => {
      if (!this.drawing)
        return;
      const currentX = e.offsetX;
      const currentY = e.offsetY;
      if (this.currentTool === "freehand") {
        this.ctx.strokeStyle = this.color;
        this.ctx.lineWidth = this.lineWidth;
        this.ctx.lineCap = "round";
        this.ctx.lineTo(currentX, currentY);
        this.ctx.stroke();
      } else if (this.currentTool === "laser") {
        this.ctx.strokeStyle = this.color;
        this.ctx.lineWidth = 1;
        this.ctx.lineCap = "round";
        this.ctx.shadowColor = this.color;
        this.ctx.shadowBlur = 10;
        this.ctx.lineTo(currentX, currentY);
        this.ctx.stroke();
        this.ctx.shadowBlur = 0;
      } else if (this.currentTool === "eraser") {
        this.ctx.globalCompositeOperation = "destination-out";
        this.ctx.lineWidth = this.lineWidth * 5;
        this.ctx.lineTo(currentX, currentY);
        this.ctx.stroke();
        this.ctx.globalCompositeOperation = "source-over";
      }
    };
    this.handlePointerUp = (e) => {
      if (!this.drawing)
        return;
      this.drawing = false;
      const endX = e.offsetX;
      const endY = e.offsetY;
      this.ctx.strokeStyle = this.currentTool === "eraser" ? "rgba(0,0,0,1)" : this.color;
      this.ctx.lineWidth = this.lineWidth;
      this.ctx.lineCap = "round";
      if (this.currentTool === "line") {
        this.ctx.beginPath();
        this.ctx.moveTo(this.startX, this.startY);
        this.ctx.lineTo(endX, endY);
        this.ctx.stroke();
      } else if (this.currentTool === "rectangle") {
        const rectWidth = endX - this.startX;
        const rectHeight = endY - this.startY;
        this.ctx.strokeRect(this.startX, this.startY, rectWidth, rectHeight);
      } else if (this.currentTool === "circle") {
        const radius = Math.sqrt(Math.pow(endX - this.startX, 2) + Math.pow(endY - this.startY, 2));
        this.ctx.beginPath();
        this.ctx.arc(this.startX, this.startY, radius, 0, Math.PI * 2);
        this.ctx.stroke();
      } else if (this.currentTool === "laser") {
        setTimeout(() => {
          this.clear();
        }, 200);
      }
    };
    this.container = container;
    this.canvas = document.createElement("canvas");
    this.canvas.style.position = "absolute";
    this.canvas.style.top = "0";
    this.canvas.style.left = "0";
    this.canvas.style.width = "100%";
    this.canvas.style.height = "100%";
    this.canvas.style.zIndex = "10";
    this.canvas.style.pointerEvents = "auto";
    this.container.appendChild(this.canvas);
    this.resizeCanvas();
    const ctx = this.canvas.getContext("2d");
    if (!ctx)
      throw new Error("Cannot get 2D context");
    this.ctx = ctx;
    this.toolbar = document.createElement("div");
    this.toolbar.style.position = "absolute";
    this.toolbar.style.top = "5px";
    this.toolbar.style.left = "50%";
    this.toolbar.style.transform = "translateX(-50%)";
    this.toolbar.style.backgroundColor = "rgba(0, 0, 0, 0.5)";
    this.toolbar.style.borderRadius = "4px";
    this.toolbar.style.padding = "4px";
    this.toolbar.style.display = "flex";
    this.toolbar.style.gap = "4px";
    this.toolbar.style.zIndex = "20";
    this.toolbar.className = "drawing-toolbar";
    this.container.appendChild(this.toolbar);
    this.createToolbar();
    this.enableDrawing();
    window.addEventListener("resize", this.resizeCanvasBound);
  }
  resizeCanvas() {
    this.canvas.width = this.container.clientWidth;
    this.canvas.height = this.container.clientHeight;
  }
  resetToolbarHighlights() {
    Array.from(this.toolbar.children).forEach((child) => {
      child.style.backgroundColor = "rgba(0, 0, 0, 0.5)";
    });
  }
  createToolbar() {
    const btnStyle = {
      fontSize: "14px",
      background: "rgba(0, 0, 0, 0.5)",
      color: "#fff",
      border: "none",
      cursor: "pointer",
      padding: "4px",
      borderRadius: "4px"
    };
    const applyStyles = (el, styles) => {
      for (const key in styles) {
        el.style[key] = styles[key];
      }
    };
    const freehandBtn = document.createElement("button");
    freehandBtn.textContent = "\u270F\uFE0F";
    freehandBtn.title = "Freehand";
    applyStyles(freehandBtn, btnStyle);
    freehandBtn.onclick = () => {
      this.currentTool = "freehand";
      this.resetToolbarHighlights();
      freehandBtn.style.backgroundColor = "rgba(0, 0, 0, 0.7)";
    };
    this.toolbar.appendChild(freehandBtn);
    const geomDropdown = document.createElement("details");
    geomDropdown.style.position = "relative";
    geomDropdown.style.display = "inline-block";
    geomDropdown.style.fontSize = "14px";
    geomDropdown.style.background = "rgba(0, 0, 0, 0.5)";
    geomDropdown.style.border = "none";
    geomDropdown.style.borderRadius = "4px";
    const geomSummary = document.createElement("summary");
    geomSummary.textContent = "\u2796";
    geomSummary.title = "Geometric Tools (Line, Rect, Circle)";
    geomSummary.style.listStyle = "none";
    geomSummary.style.cursor = "pointer";
    geomSummary.style.background = "transparent";
    geomSummary.style.color = "#fff";
    geomSummary.style.outline = "none";
    geomDropdown.appendChild(geomSummary);
    const geomOptions = document.createElement("div");
    geomOptions.style.display = "flex";
    geomOptions.style.flexDirection = "column";
    geomOptions.style.position = "absolute";
    geomOptions.style.top = "100%";
    geomOptions.style.left = "0";
    geomOptions.style.background = "rgba(0, 0, 0, 0.5)";
    geomOptions.style.border = "none";
    geomOptions.style.borderRadius = "4px";
    geomOptions.style.zIndex = "30";
    const geomTools = [
      { tool: "line", icon: "\u2796", label: "Line" },
      { tool: "rectangle", icon: "\u25AD", label: "Rectangle" },
      { tool: "circle", icon: "\u25EF", label: "Circle" }
    ];
    geomTools.forEach((opt) => {
      const btn = document.createElement("button");
      btn.textContent = opt.icon;
      btn.title = opt.label;
      applyStyles(btn, { fontSize: "14px", padding: "2px", border: "none", background: "transparent", color: "#fff", cursor: "pointer" });
      btn.onclick = (e) => {
        e.stopPropagation();
        this.currentTool = opt.tool;
        this.currentGeometricTool = opt.tool;
        geomSummary.textContent = opt.icon;
        geomDropdown.removeAttribute("open");
      };
      geomOptions.appendChild(btn);
    });
    geomDropdown.appendChild(geomOptions);
    this.toolbar.appendChild(geomDropdown);
    const eraserBtn = document.createElement("button");
    eraserBtn.textContent = "\u{1F9FD}";
    eraserBtn.title = "Eraser";
    applyStyles(eraserBtn, btnStyle);
    eraserBtn.onclick = () => {
      this.currentTool = "eraser";
      this.resetToolbarHighlights();
      eraserBtn.style.backgroundColor = "rgba(0, 0, 0, 0.7)";
    };
    this.toolbar.appendChild(eraserBtn);
    const laserBtn = document.createElement("button");
    laserBtn.textContent = "\u{1F526}";
    laserBtn.title = "Laser (temporary)";
    applyStyles(laserBtn, btnStyle);
    laserBtn.onclick = () => {
      this.currentTool = "laser";
      this.resetToolbarHighlights();
      laserBtn.style.backgroundColor = "rgba(0, 0, 0, 0.7)";
    };
    this.toolbar.appendChild(laserBtn);
    const colorInput = document.createElement("input");
    colorInput.type = "color";
    colorInput.value = this.color;
    applyStyles(colorInput, { width: "30px", height: "30px", border: "none", cursor: "pointer" });
    colorInput.onchange = () => {
      this.color = colorInput.value;
    };
    this.toolbar.appendChild(colorInput);
    const widthInput = document.createElement("input");
    widthInput.type = "number";
    widthInput.min = "1";
    widthInput.max = "10";
    widthInput.value = this.lineWidth.toString();
    applyStyles(widthInput, { width: "40px", border: "none", background: "rgba(0,0,0,0.5)", color: "#fff", textAlign: "center" });
    widthInput.onchange = () => {
      this.lineWidth = Number(widthInput.value);
    };
    this.toolbar.appendChild(widthInput);
  }
  enableDrawing() {
    this.canvas.addEventListener("pointerdown", this.handlePointerDown);
    this.canvas.addEventListener("pointermove", this.handlePointerMove);
    this.canvas.addEventListener("pointerup", this.handlePointerUp);
    this.canvas.addEventListener("pointerout", this.handlePointerUp);
  }
  disableDrawing() {
    this.canvas.removeEventListener("pointerdown", this.handlePointerDown);
    this.canvas.removeEventListener("pointermove", this.handlePointerMove);
    this.canvas.removeEventListener("pointerup", this.handlePointerUp);
    this.canvas.removeEventListener("pointerout", this.handlePointerUp);
  }
  clear() {
    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
  }
  getAnnotation() {
    return this.canvas.toDataURL("image/png");
  }
  destroy() {
    window.removeEventListener("resize", this.resizeCanvasBound);
    this.disableDrawing();
    if (this.toolbar.parentNode)
      this.toolbar.parentNode.removeChild(this.toolbar);
    if (this.canvas.parentNode)
      this.canvas.parentNode.removeChild(this.canvas);
  }
};

// src/visualizer.ts
var Visualizer = class {
  constructor(mediaElement, container, options = {}) {
    var _a, _b, _c, _d;
    this.mediaElement = mediaElement;
    this.container = container;
    this.options = {
      height: (_a = options.height) != null ? _a : "100px",
      gradientType: (_b = options.gradientType) != null ? _b : "blue-red",
      customColors: options.customColors
    };
    this.canvas = document.createElement("canvas");
    this.canvas.style.position = "absolute";
    this.canvas.style.bottom = "0";
    this.canvas.style.left = "0";
    this.canvas.style.width = "100%";
    this.canvas.style.height = (_c = this.options.height) != null ? _c : "80px";
    this.canvas.style.pointerEvents = "none";
    this.canvas.style.zIndex = "100";
    this.canvas.width = container.clientWidth;
    this.canvas.height = parseInt((_d = this.options.height) != null ? _d : "80", 10);
    this.canvasCtx = this.canvas.getContext("2d");
    container.appendChild(this.canvas);
    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
    this.source = this.audioContext.createMediaElementSource(this.mediaElement);
    this.analyser = this.audioContext.createAnalyser();
    this.analyser.fftSize = 512;
    this.analyser.smoothingTimeConstant = 0.05;
    this.analyser.minDecibels = -100;
    this.analyser.maxDecibels = -30;
    this.source.connect(this.analyser);
    this.analyser.connect(this.audioContext.destination);
    this.animationFrameId = 0;
    this.draw();
  }
  draw() {
    const bufferLength = this.analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);
    const halfBins = Math.floor(bufferLength / 2);
    const gap = 2;
    const canvasWidth = this.canvas.width;
    const canvasHeight = this.canvas.height;
    const midX = canvasWidth / 2;
    const baseline = canvasHeight / 2;
    const slotWidth = midX / halfBins;
    const barWidth = slotWidth * 0.6;
    const drawBars = () => {
      this.analyser.getByteFrequencyData(dataArray);
      this.canvasCtx.clearRect(0, 0, canvasWidth, canvasHeight);
      for (let i = 0; i < halfBins; i++) {
        const rawIntensity = dataArray[i] / 255;
        const intensity = Math.pow(rawIntensity, 2);
        const barHeight = intensity * baseline;
        let gradient;
        if (this.options.gradientType === "blue-red") {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          gradient.addColorStop(0, "hsl(240,80%,40%)");
          gradient.addColorStop(1, "hsl(0,90%,50%)");
        } else if (this.options.gradientType === "rainbow") {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          gradient.addColorStop(0, "hsl(240,100%,50%)");
          gradient.addColorStop(0.25, "hsl(180,100%,50%)");
          gradient.addColorStop(0.5, "hsl(120,100%,50%)");
          gradient.addColorStop(0.75, "hsl(60,100%,50%)");
          gradient.addColorStop(1, "hsl(0,100%,50%)");
        } else if (this.options.gradientType === "custom" && this.options.customColors && this.options.customColors.length > 0) {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          const n = this.options.customColors.length;
          for (let j = 0; j < n; j++) {
            gradient.addColorStop(j / (n - 1), this.options.customColors[j]);
          }
        } else {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          gradient.addColorStop(0, "hsl(240,100%,50%)");
          gradient.addColorStop(0.25, "hsl(180,100%,50%)");
          gradient.addColorStop(0.5, "hsl(120,100%,50%)");
          gradient.addColorStop(0.75, "hsl(60,100%,50%)");
          gradient.addColorStop(1, "hsl(0,100%,50%)");
        }
        const xRight = midX + i * (barWidth + gap);
        const xLeft = midX - (i + 1) * (barWidth + gap);
        this.canvasCtx.fillStyle = gradient;
        this.canvasCtx.fillRect(xRight, baseline - barHeight, barWidth, barHeight);
        this.canvasCtx.fillRect(xLeft, baseline - barHeight, barWidth, barHeight);
      }
      this.animationFrameId = requestAnimationFrame(drawBars);
    };
    drawBars();
  }
  destroy() {
    cancelAnimationFrame(this.animationFrameId);
    this.canvas.remove();
    this.source.disconnect();
    this.analyser.disconnect();
    if (this.audioContext.state !== "closed") {
      this.audioContext.close();
    }
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  enableDrawingAnnotation: false,
  enableVisualizer: false,
  visualizerColor: "#00ff00",
  visualizerHeight: "50px"
};
var _MediaSliderPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.filePathCache = /* @__PURE__ */ new Map();
    this.markdownCache = /* @__PURE__ */ new Map();
    this.drawingData = {};
  }
  async onload() {
    console.log("Loading Media Slider Plugin...");
    await this.loadSettings();
    this.addSettingTab(new MediaSliderSettingTab(this.app, this));
    this.notesManager = new NotesManager(this);
    await this.notesManager.load();
    await this.loadDrawingData();
    this.registerMarkdownCodeBlockProcessor("media-slider", (source, el, ctx) => {
      this.createMediaSlider(source, el, ctx);
    });
  }
  // --- Settings Persistence ---
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  // --- Force Refresh for Immediate Settings Effect ---
  refreshSliders() {
    this.app.workspace.getLeavesOfType("markdown").forEach((leaf) => {
      if (leaf.view instanceof import_obsidian.MarkdownView) {
        leaf.view.load();
      }
    });
  }
  // --- Persistent Drawing Data Management ---
  async loadDrawingData() {
    const data = await this.loadData();
    this.drawingData = (data == null ? void 0 : data.drawings) || {};
  }
  async saveDrawingData() {
    const data = await this.loadData() || {};
    data.drawings = this.drawingData;
    await this.saveData(data);
  }
  async cleanupDrawingData(sliderId, validFiles) {
    for (const key of Object.keys(this.drawingData)) {
      if (key.startsWith(`${sliderId}-`)) {
        const mediaFile = key.substring(sliderId.length + 1);
        if (!validFiles.includes(mediaFile)) {
          delete this.drawingData[key];
        }
      }
    }
    await this.saveDrawingData();
  }
  // --- Simple YAML Parser ---
  parseSimpleYAML(yaml) {
    const result = {};
    const lines = yaml.split("\n");
    for (let line of lines) {
      line = line.trim();
      if (!line)
        continue;
      const separatorIndex = line.indexOf(":");
      if (separatorIndex === -1)
        continue;
      const key = line.substring(0, separatorIndex).trim();
      let rawValue = line.substring(separatorIndex + 1).trim();
      let value;
      if (rawValue.startsWith('"') && rawValue.endsWith('"') || rawValue.startsWith("'") && rawValue.endsWith("'")) {
        value = rawValue.slice(1, -1);
      } else if (rawValue === "true") {
        value = true;
      } else if (rawValue === "false") {
        value = false;
      } else if (!isNaN(Number(rawValue))) {
        value = Number(rawValue);
      } else {
        value = rawValue;
      }
      result[key] = value;
    }
    return result;
  }
  // --- Resource Helpers ---
  getCachedResourcePath(fileName) {
    if (this.filePathCache.has(fileName)) {
      return this.filePathCache.get(fileName);
    }
    const path = this.app.vault.adapter.getResourcePath(fileName);
    this.filePathCache.set(fileName, path);
    return path;
  }
  getMediaSource(fileName) {
    if (fileName.startsWith("http://") || fileName.startsWith("https://")) {
      return fileName;
    }
    let file = this.app.vault.getAbstractFileByPath(fileName);
    if (!file) {
      const matchingFiles = this.app.vault.getFiles().filter(
        (f) => f.name.toLowerCase() === fileName.toLowerCase()
      );
      if (matchingFiles.length > 0) {
        fileName = matchingFiles[0].path;
      } else {
        console.error("File not found in vault:", fileName);
      }
    }
    return this.getCachedResourcePath(fileName);
  }
  async getMarkdownContent(fileName) {
    if (this.markdownCache.has(fileName)) {
      return this.markdownCache.get(fileName);
    }
    const mdFile = this.app.vault.getAbstractFileByPath(fileName);
    if (mdFile) {
      const content = await this.app.vault.read(mdFile);
      this.markdownCache.set(fileName, content);
      return content;
    }
    return "";
  }
  throttle(fn, delay) {
    let lastCall = 0;
    return (...args) => {
      const now = Date.now();
      if (now - lastCall < delay)
        return;
      lastCall = now;
      return fn(...args);
    };
  }
  // --- Slider Creation ---
  createMediaSlider(source, el, ctx) {
    const metadataMatch = source.match(/---\n([\s\S]+?)\n---/);
    const mediaContent = source.replace(/---\n[\s\S]+?\n---/, "").trim();
    const mediaFiles = mediaContent.split("\n").map((line) => line.trim()).filter(Boolean);
    let settings = {
      sliderId: "",
      carouselShowThumbnails: true,
      thumbnailPosition: "bottom",
      captionMode: "below",
      autoplay: false,
      slideshowSpeed: 5,
      width: "100%",
      height: "300px",
      transitionEffect: "fade",
      transitionDuration: 500,
      enhancedView: false,
      interactiveNotes: false
    };
    if (metadataMatch) {
      try {
        const parsedSettings = this.parseSimpleYAML(metadataMatch[1]);
        settings = Object.assign(settings, parsedSettings);
      } catch (error) {
        console.error("Failed to parse media-slider metadata:", error);
      }
    }
    let sliderId = settings.sliderId;
    if (!sliderId) {
      sliderId = `slider-${_MediaSliderPlugin.sliderCounter++}`;
    }
    const validFiles = mediaFiles.map((file) => {
      let match = file.match(/!?\[\[(.*?)\]\]/);
      if (!match) {
        match = file.match(/!\[\]\((.*?)\)/);
      }
      return match ? match[1] : "";
    }).filter(Boolean);
    if (validFiles.length === 0) {
      el.createEl("p", { text: "No valid media files found." });
      return;
    }
    this.notesManager.cleanupNotesForSlider(sliderId, validFiles).catch(console.error);
    this.cleanupDrawingData(sliderId, validFiles).catch(console.error);
    this.renderSlider(el, validFiles, settings, sliderId);
  }
  // --- Render Slider UI ---
  renderSlider(container, files, settings, sliderId) {
    container.empty();
    let updateDrawingOverlay;
    const sliderWrapper = container.createDiv("media-slider-wrapper");
    sliderWrapper.style.position = "relative";
    if (settings.carouselShowThumbnails && (settings.thumbnailPosition === "left" || settings.thumbnailPosition === "right")) {
      sliderWrapper.classList.add("flex-row");
    } else {
      sliderWrapper.style.display = "flex";
      sliderWrapper.style.flexDirection = "column";
      sliderWrapper.style.alignItems = "center";
    }
    const sliderContent = sliderWrapper.createDiv("slider-content");
    sliderContent.style.position = "relative";
    sliderContent.style.display = "flex";
    sliderContent.style.flexDirection = "column";
    sliderContent.style.alignItems = "center";
    sliderContent.style.width = settings.width;
    const sliderContainer = sliderContent.createDiv("slider-container");
    sliderContainer.style.width = settings.width;
    sliderContainer.style.height = settings.height;
    sliderContainer.style.opacity = "1";
    sliderContainer.style.position = "relative";
    const captionContainer = sliderContent.createDiv("slider-caption-container");
    let thumbnailContainer = null;
    let thumbnailEls = [];
    if (settings.carouselShowThumbnails) {
      thumbnailContainer = document.createElement("div");
      thumbnailContainer.className = "thumbnail-container";
      if (settings.thumbnailPosition === "left" || settings.thumbnailPosition === "right") {
        thumbnailContainer.classList.add("vertical");
        thumbnailContainer.style.height = settings.height;
        thumbnailContainer.style.overflowY = "auto";
      } else {
        thumbnailContainer.classList.add("horizontal");
        thumbnailContainer.style.width = settings.width;
        thumbnailContainer.style.overflowX = "auto";
        thumbnailContainer.style.whiteSpace = "nowrap";
        thumbnailContainer.style.margin = "10px 0";
      }
      if (settings.thumbnailPosition === "top" || settings.thumbnailPosition === "left") {
        sliderWrapper.insertBefore(thumbnailContainer, sliderContent);
      } else if (settings.thumbnailPosition === "bottom" || settings.thumbnailPosition === "right") {
        sliderWrapper.appendChild(thumbnailContainer);
      }
    }
    let currentIndex = 0;
    let currentDirection = "next";
    if (settings.enhancedView) {
      const fullScreenBtn = sliderWrapper.createEl("button", { text: "\u26F6", cls: "fullscreen-btn" });
      fullScreenBtn.style.position = "absolute";
      fullScreenBtn.style.top = "10px";
      fullScreenBtn.style.right = "10px";
      fullScreenBtn.onclick = () => {
        if (!document.fullscreenElement) {
          sliderWrapper.requestFullscreen().catch((err) => console.error("Error enabling fullscreen:", err));
        } else {
          document.exitFullscreen();
        }
      };
      const copyBtn = sliderWrapper.createEl("button", { text: "\u{1F4CB}", cls: "copy-btn" });
      copyBtn.style.position = "absolute";
      copyBtn.style.top = "10px";
      copyBtn.style.right = "70px";
      copyBtn.style.zIndex = "110";
      copyBtn.onclick = async () => {
        const currentEntry = files[currentIndex];
        let [fileName] = currentEntry.split("|").map((s) => s.trim());
        const markdownLink = `![[${fileName}]]`;
        try {
          await navigator.clipboard.writeText(markdownLink);
          console.log("Copied markdown link to clipboard:", markdownLink);
        } catch (err) {
          console.error("Failed to copy markdown link:", err);
        }
      };
    }
    sliderWrapper.addEventListener("fullscreenchange", () => {
      if (document.fullscreenElement === sliderWrapper) {
        sliderContainer.style.height = "85vh";
      } else {
        sliderContainer.style.height = settings.height;
      }
    });
    let notesContainer = null;
    let notesTextarea = null;
    let notesToggleBtn = null;
    if (settings.interactiveNotes) {
      notesToggleBtn = sliderWrapper.createEl("button", { text: "\u{1F4DD}", cls: "notes-toggle-btn" });
      notesToggleBtn.style.position = "absolute";
      notesToggleBtn.style.top = "10px";
      notesToggleBtn.style.left = "10px";
      notesToggleBtn.style.zIndex = "110";
      notesToggleBtn.onclick = () => {
        if (notesContainer) {
          notesContainer.style.display = notesContainer.style.display === "block" ? "none" : "block";
          const mediaKey = `${sliderId}-${files[currentIndex]}`;
          if (notesContainer.style.display === "block" && notesTextarea) {
            notesTextarea.value = this.notesManager.getNote(mediaKey);
          }
        }
      };
      notesContainer = sliderWrapper.createDiv("notes-container");
      notesContainer.style.position = "absolute";
      notesContainer.style.bottom = "10px";
      notesContainer.style.left = "10px";
      notesContainer.style.width = "calc(100% - 20px)";
      notesContainer.style.background = "rgba(255,255,255,0.8)";
      notesContainer.style.padding = "5px";
      notesContainer.style.display = "none";
      notesTextarea = document.createElement("textarea");
      notesTextarea.style.width = "100%";
      notesTextarea.style.height = "60px";
      notesTextarea.placeholder = "Add your notes here...";
      notesContainer.appendChild(notesTextarea);
      const saveNotesBtn = document.createElement("button");
      saveNotesBtn.textContent = "\u{1F4BE}";
      saveNotesBtn.className = "notes-save-btn";
      saveNotesBtn.style.marginTop = "5px";
      saveNotesBtn.onclick = async () => {
        const mediaKey = `${sliderId}-${files[currentIndex]}`;
        if (notesTextarea) {
          await this.notesManager.setNote(mediaKey, notesTextarea.value);
        }
        if (notesContainer)
          notesContainer.style.display = "none";
      };
      notesContainer.appendChild(saveNotesBtn);
    }
    let drawingAnnotation = null;
    let clearDrawingBtn = null;
    if (this.settings.enableDrawingAnnotation) {
      const drawingToggleBtn = sliderWrapper.createEl("button", { text: "\u270F\uFE0F", cls: "drawing-toggle-btn" });
      drawingToggleBtn.style.position = "absolute";
      drawingToggleBtn.style.top = "10px";
      drawingToggleBtn.style.right = "50px";
      drawingToggleBtn.style.zIndex = "110";
      updateDrawingOverlay = (mediaKey) => {
        const existingOverlay = sliderContainer.querySelector(".drawing-overlay");
        if (existingOverlay) {
          existingOverlay.remove();
        }
        const savedDrawing = this.drawingData[mediaKey];
        if (savedDrawing) {
          const overlay = sliderContainer.createEl("img", { attr: { src: savedDrawing } });
          overlay.classList.add("drawing-overlay");
          overlay.style.position = "absolute";
          overlay.style.top = "0";
          overlay.style.left = "0";
          overlay.style.width = "100%";
          overlay.style.height = "100%";
          overlay.style.pointerEvents = "none";
          if (!clearDrawingBtn) {
            clearDrawingBtn = sliderWrapper.createEl("button", { text: "\u{1F5D1}\uFE0F", cls: "clear-drawing-btn" });
            clearDrawingBtn.style.position = "absolute";
            clearDrawingBtn.style.top = "10px";
            clearDrawingBtn.style.right = "110px";
            clearDrawingBtn.style.zIndex = "110";
            clearDrawingBtn.onclick = async () => {
              delete this.drawingData[mediaKey];
              await this.saveDrawingData();
              const existingOverlay2 = sliderContainer.querySelector(".drawing-overlay");
              if (existingOverlay2)
                existingOverlay2.remove();
              clearDrawingBtn.remove();
              clearDrawingBtn = null;
            };
          }
        } else {
          if (clearDrawingBtn) {
            clearDrawingBtn.remove();
            clearDrawingBtn = null;
          }
        }
      };
      drawingToggleBtn.onclick = async () => {
        const mediaKey = `${sliderId}-${files[currentIndex]}`;
        if (drawingAnnotation) {
          const drawingDataUrl = drawingAnnotation.getAnnotation();
          this.drawingData[mediaKey] = drawingDataUrl;
          await this.saveDrawingData();
          drawingAnnotation.destroy();
          drawingAnnotation = null;
          drawingToggleBtn.textContent = "\u270F\uFE0F";
          updateDrawingOverlay == null ? void 0 : updateDrawingOverlay(mediaKey);
        } else {
          if (this.drawingData[mediaKey]) {
            delete this.drawingData[mediaKey];
            await this.saveDrawingData();
            const existingOverlay = sliderContainer.querySelector(".drawing-overlay");
            if (existingOverlay)
              existingOverlay.remove();
            if (clearDrawingBtn) {
              clearDrawingBtn.remove();
              clearDrawingBtn = null;
            }
          }
          drawingAnnotation = new DrawingAnnotation(sliderContainer);
          drawingToggleBtn.textContent = "\u{1F4BE}";
        }
      };
    }
    container.appendChild(sliderWrapper);
    const prevBtn = sliderContent.createEl("button", { text: "\u2B9C", cls: "slider-btn prev" });
    const nextBtn = sliderContent.createEl("button", { text: "\u2B9E", cls: "slider-btn next" });
    prevBtn.style.position = "absolute";
    nextBtn.style.position = "absolute";
    prevBtn.style.top = "50%";
    nextBtn.style.top = "50%";
    prevBtn.style.left = "10px";
    nextBtn.style.right = "10px";
    prevBtn.style.transform = "translateY(-50%)";
    nextBtn.style.transform = "translateY(-50%)";
    const updateMediaDisplay = async () => {
      switch (settings.transitionEffect) {
        case "fade":
          sliderContainer.style.transition = `opacity ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.opacity = "0";
          break;
        case "slide":
          sliderContainer.style.transition = `transform ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.transform = currentDirection === "next" ? "translateX(-100%)" : "translateX(100%)";
          break;
        case "zoom":
          sliderContainer.style.transition = `transform ${settings.transitionDuration}ms ease-in-out, opacity ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.transform = "scale(0.8)";
          sliderContainer.style.opacity = "0";
          break;
        case "slide-up":
          sliderContainer.style.transition = `transform ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.transform = "translateY(-100%)";
          break;
        case "slide-down":
          sliderContainer.style.transition = `transform ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.transform = "translateY(100%)";
          break;
        case "flip":
          sliderContainer.style.transition = `transform ${settings.transitionDuration}ms ease-in-out, opacity ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.transform = "rotateY(90deg)";
          sliderContainer.style.opacity = "0";
          break;
        case "flip-vertical":
          sliderContainer.style.transition = `transform ${settings.transitionDuration}ms ease-in-out, opacity ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.transform = "rotateX(90deg)";
          sliderContainer.style.opacity = "0";
          break;
        case "rotate":
          sliderContainer.style.transition = `transform ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.transform = "rotate(15deg)";
          break;
        case "blur":
          sliderContainer.style.transition = `filter ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.filter = "blur(10px)";
          break;
        case "squeeze":
          sliderContainer.style.transition = `transform ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.transform = "scaleX(0.8)";
          break;
        default:
          sliderContainer.style.transition = `opacity ${settings.transitionDuration}ms ease-in-out`;
          sliderContainer.style.opacity = "0";
      }
      setTimeout(async () => {
        sliderContainer.empty();
        if (settings.captionMode === "below")
          captionContainer.empty();
        if (thumbnailEls.length > 0) {
          thumbnailEls.forEach((thumb, idx) => {
            thumb.classList.toggle("active-thumbnail", idx === currentIndex);
          });
        }
        const currentEntry = files[currentIndex];
        let [fileName, caption] = currentEntry.split("|").map((s) => s.trim());
        if (!fileName.includes(".")) {
          const mdFile = this.app.metadataCache.getFirstLinkpathDest(fileName, "");
          if (mdFile && mdFile.extension === "md") {
            fileName = mdFile.path;
          }
        }
        const filePath = this.getMediaSource(fileName);
        if (/\.(png|jpg|jpeg|gif)$/i.test(fileName)) {
          try {
            const compressedUrl = await compressImage(filePath, 800, 600, 0.7);
            const img = sliderContainer.createEl("img", { attr: { src: compressedUrl } });
            img.classList.add("slider-media");
          } catch (err) {
            const img = sliderContainer.createEl("img", { attr: { src: filePath } });
            img.classList.add("slider-media");
          }
        } else if (/\.(mp4|webm)$/i.test(fileName)) {
          const video = sliderContainer.createEl("video", { attr: { src: filePath, controls: "true" } });
          if (settings.autoplay)
            video.setAttribute("autoplay", "true");
          video.classList.add("slider-media");
          if (this.settings.enableVisualizer) {
            new Visualizer(video, sliderContainer, {
              color: this.settings.visualizerColor,
              height: this.settings.visualizerHeight
            });
          }
        } else if (/\.(mp3|ogg|wav)$/i.test(fileName)) {
          const audio = sliderContainer.createEl("audio", { attr: { src: filePath, controls: "true" } });
          audio.classList.add("slider-media");
          audio.style.marginTop = "80px";
          if (this.settings.enableVisualizer) {
            new Visualizer(audio, sliderContainer, {
              color: this.settings.visualizerColor,
              height: this.settings.visualizerHeight
            });
          }
        } else if (/\.(pdf)$/i.test(fileName)) {
          const iframe = sliderContainer.createEl("iframe", { attr: { src: filePath, width: "100%", height: "100%" } });
          iframe.style.border = "none";
          iframe.classList.add("slider-media");
        } else if (/\.(md)$/i.test(fileName)) {
          const mdFile = this.app.vault.getAbstractFileByPath(fileName);
          if (mdFile) {
            const content = await this.getMarkdownContent(fileName);
            sliderContainer.empty();
            await import_obsidian.MarkdownRenderer.renderMarkdown(content, sliderContainer, mdFile.path, this);
          }
        } else {
          const link = sliderContainer.createEl("a", { text: "Open File", attr: { href: filePath, target: "_blank" } });
          link.classList.add("slider-media");
        }
        if (caption) {
          if (settings.captionMode === "overlay") {
            const capEl = sliderContainer.createEl("div", { text: caption });
            capEl.classList.add("slider-caption-overlay");
          } else {
            const capEl = captionContainer.createEl("div", { text: caption });
            capEl.classList.add("slider-caption");
          }
        }
        if (settings.interactiveNotes && notesTextarea) {
          const mediaKey = `${sliderId}-${files[currentIndex]}`;
          notesTextarea.value = this.notesManager.getNote(mediaKey);
        }
        if (this.settings.enableDrawingAnnotation) {
          const mediaKey = `${sliderId}-${files[currentIndex]}`;
          updateDrawingOverlay == null ? void 0 : updateDrawingOverlay(mediaKey);
        }
        switch (settings.transitionEffect) {
          case "fade":
            sliderContainer.style.opacity = "1";
            break;
          case "slide":
            sliderContainer.style.transform = currentDirection === "next" ? "translateX(100%)" : "translateX(-100%)";
            sliderContainer.offsetHeight;
            sliderContainer.style.transition = `transform ${settings.transitionDuration}ms ease-in-out`;
            sliderContainer.style.transform = "translateX(0)";
            break;
          case "zoom":
            sliderContainer.style.transform = "scale(1)";
            sliderContainer.style.opacity = "1";
            break;
          case "slide-up":
            sliderContainer.style.transform = "translateY(0)";
            break;
          case "slide-down":
            sliderContainer.style.transform = "translateY(0)";
            break;
          case "flip":
            sliderContainer.style.transform = "rotateY(0deg)";
            sliderContainer.style.opacity = "1";
            break;
          case "flip-vertical":
            sliderContainer.style.transform = "rotateX(0deg)";
            sliderContainer.style.opacity = "1";
            break;
          case "rotate":
            sliderContainer.style.transform = "rotate(0deg)";
            break;
          case "blur":
            sliderContainer.style.filter = "blur(0px)";
            break;
          case "squeeze":
            sliderContainer.style.transform = "scaleX(1)";
            break;
          default:
            sliderContainer.style.opacity = "1";
        }
      }, settings.transitionDuration);
    };
    const throttledUpdate = this.throttle(updateMediaDisplay, 100);
    const goPrev = () => {
      currentDirection = "prev";
      currentIndex = (currentIndex - 1 + files.length) % files.length;
      throttledUpdate();
    };
    const goNext = () => {
      currentDirection = "next";
      currentIndex = (currentIndex + 1) % files.length;
      throttledUpdate();
    };
    prevBtn.onclick = goPrev;
    nextBtn.onclick = goNext;
    sliderContent.addEventListener("mouseenter", () => sliderContent.focus());
    sliderContent.addEventListener("mouseleave", () => sliderContent.blur());
    sliderContent.tabIndex = 0;
    sliderContent.style.outline = "none";
    sliderContent.addEventListener("keydown", (evt) => {
      if (evt.key === "ArrowLeft")
        goPrev();
      else if (evt.key === "ArrowRight")
        goNext();
    });
    sliderContent.addEventListener("wheel", (evt) => {
      if (Math.abs(evt.deltaX) > Math.abs(evt.deltaY)) {
        if (evt.deltaX > 30) {
          goNext();
          evt.preventDefault();
        } else if (evt.deltaX < -30) {
          goPrev();
          evt.preventDefault();
        }
      }
    });
    let touchStartX = 0;
    sliderContent.addEventListener("touchstart", (evt) => {
      touchStartX = evt.touches[0].clientX;
    });
    sliderContent.addEventListener("touchend", (evt) => {
      const touchEndX = evt.changedTouches[0].clientX;
      const diff = touchStartX - touchEndX;
      if (Math.abs(diff) > 50)
        diff > 0 ? goNext() : goPrev();
    });
    throttledUpdate();
    if (thumbnailContainer) {
      thumbnailContainer.empty();
      files.forEach((entry, index) => {
        var _a;
        let [fileName] = entry.split("|").map((s) => s.trim());
        let thumbEl;
        if (/\.(png|jpg|jpeg|gif)$/i.test(fileName)) {
          thumbEl = thumbnailContainer.createEl("img", {
            attr: { src: this.getMediaSource(fileName) },
            cls: "thumbnail"
          });
        } else {
          const ext = ((_a = fileName.split(".").pop()) == null ? void 0 : _a.toUpperCase()) || "FILE";
          thumbEl = thumbnailContainer.createEl("div", { text: ext });
          thumbEl.classList.add("thumbnail-placeholder");
        }
        if (settings.thumbnailPosition === "left" || settings.thumbnailPosition === "right") {
          thumbEl.classList.add("vertical-thumb");
        }
        thumbEl.onclick = () => {
          currentIndex = index;
          throttledUpdate();
        };
        thumbnailEls.push(thumbEl);
      });
    }
    if (settings.slideshowSpeed > 0) {
      setInterval(goNext, settings.slideshowSpeed * 1e3);
    }
  }
};
var MediaSliderPlugin = _MediaSliderPlugin;
MediaSliderPlugin.sliderCounter = 0;
var MediaSliderSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Media Slider Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Enable Drawing Annotation").setDesc("Toggle to enable drawing annotations on the slider. (Default: off)").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableDrawingAnnotation).onChange(async (value) => {
        this.plugin.settings.enableDrawingAnnotation = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Enable Visualizer").setDesc("Toggle to enable wave-like visualization for audio/video playback.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableVisualizer).onChange(async (value) => {
        this.plugin.settings.enableVisualizer = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Visualizer Color").setDesc("CSS color value for the visualizer wave.").addText(
      (text) => text.setValue(this.plugin.settings.visualizerColor).onChange(async (value) => {
        this.plugin.settings.visualizerColor = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Visualizer Height").setDesc("Height of the visualizer (e.g., '50px').").addText(
      (text) => text.setValue(this.plugin.settings.visualizerHeight).onChange(async (value) => {
        this.plugin.settings.visualizerHeight = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvY29tcHJlc3Npb24udHMiLCAic3JjL25vdGVzLnRzIiwgInNyYy9kcmF3aW5nLnRzIiwgInNyYy92aXN1YWxpemVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIEFwcCwgU2V0dGluZywgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgVEZpbGUsIE1hcmtkb3duUmVuZGVyZXIsIE1hcmtkb3duVmlldyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgY29tcHJlc3NJbWFnZSB9IGZyb20gXCIuL3NyYy9jb21wcmVzc2lvblwiO1xuaW1wb3J0IHsgTm90ZXNNYW5hZ2VyIH0gZnJvbSBcIi4vc3JjL25vdGVzXCI7XG5pbXBvcnQgeyBEcmF3aW5nQW5ub3RhdGlvbiB9IGZyb20gXCIuL3NyYy9kcmF3aW5nXCI7XG5pbXBvcnQgeyBWaXN1YWxpemVyLCBWaXN1YWxpemVyT3B0aW9ucyB9IGZyb20gXCIuL3NyYy92aXN1YWxpemVyXCI7XG5cbmludGVyZmFjZSBNZWRpYVNsaWRlclNldHRpbmdzIHtcblx0ZW5hYmxlRHJhd2luZ0Fubm90YXRpb246IGJvb2xlYW47XG5cdGVuYWJsZVZpc3VhbGl6ZXI6IGJvb2xlYW47XG5cdHZpc3VhbGl6ZXJDb2xvcjogc3RyaW5nO1xuXHR2aXN1YWxpemVySGVpZ2h0OiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE1lZGlhU2xpZGVyU2V0dGluZ3MgPSB7XG5cdGVuYWJsZURyYXdpbmdBbm5vdGF0aW9uOiBmYWxzZSxcblx0ZW5hYmxlVmlzdWFsaXplcjogZmFsc2UsXG5cdHZpc3VhbGl6ZXJDb2xvcjogXCIjMDBmZjAwXCIsXG5cdHZpc3VhbGl6ZXJIZWlnaHQ6IFwiNTBweFwiXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZWRpYVNsaWRlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBNZWRpYVNsaWRlclNldHRpbmdzO1xuXHRwcml2YXRlIGZpbGVQYXRoQ2FjaGU6IE1hcDxzdHJpbmcsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG5cdHByaXZhdGUgbWFya2Rvd25DYWNoZTogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcblx0cHJpdmF0ZSBub3Rlc01hbmFnZXI6IE5vdGVzTWFuYWdlcjtcblx0cHJpdmF0ZSBkcmF3aW5nRGF0YTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuXHRwcml2YXRlIHN0YXRpYyBzbGlkZXJDb3VudGVyID0gMDtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJMb2FkaW5nIE1lZGlhIFNsaWRlciBQbHVnaW4uLi5cIik7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IE1lZGlhU2xpZGVyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHRcdHRoaXMubm90ZXNNYW5hZ2VyID0gbmV3IE5vdGVzTWFuYWdlcih0aGlzKTtcblx0XHRhd2FpdCB0aGlzLm5vdGVzTWFuYWdlci5sb2FkKCk7XG5cdFx0YXdhaXQgdGhpcy5sb2FkRHJhd2luZ0RhdGEoKTtcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoXCJtZWRpYS1zbGlkZXJcIiwgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xuXHRcdFx0dGhpcy5jcmVhdGVNZWRpYVNsaWRlcihzb3VyY2UsIGVsLCBjdHgpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gLS0tIFNldHRpbmdzIFBlcnNpc3RlbmNlIC0tLVxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdC8vIC0tLSBGb3JjZSBSZWZyZXNoIGZvciBJbW1lZGlhdGUgU2V0dGluZ3MgRWZmZWN0IC0tLVxuXHRyZWZyZXNoU2xpZGVycygpIHtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwibWFya2Rvd25cIikuZm9yRWFjaChsZWFmID0+IHtcblx0XHRcdGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHtcblx0XHRcdFx0KGxlYWYudmlldyBhcyBhbnkpLmxvYWQoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIC0tLSBQZXJzaXN0ZW50IERyYXdpbmcgRGF0YSBNYW5hZ2VtZW50IC0tLVxuXHRwcml2YXRlIGFzeW5jIGxvYWREcmF3aW5nRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuXHRcdHRoaXMuZHJhd2luZ0RhdGEgPSBkYXRhPy5kcmF3aW5ncyB8fCB7fTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc2F2ZURyYXdpbmdEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGRhdGEgPSAoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKSB8fCB7fTtcblx0XHRkYXRhLmRyYXdpbmdzID0gdGhpcy5kcmF3aW5nRGF0YTtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKGRhdGEpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBjbGVhbnVwRHJhd2luZ0RhdGEoc2xpZGVySWQ6IHN0cmluZywgdmFsaWRGaWxlczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmRyYXdpbmdEYXRhKSkge1xuXHRcdFx0aWYgKGtleS5zdGFydHNXaXRoKGAke3NsaWRlcklkfS1gKSkge1xuXHRcdFx0XHRjb25zdCBtZWRpYUZpbGUgPSBrZXkuc3Vic3RyaW5nKHNsaWRlcklkLmxlbmd0aCArIDEpO1xuXHRcdFx0XHRpZiAoIXZhbGlkRmlsZXMuaW5jbHVkZXMobWVkaWFGaWxlKSkge1xuXHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmRyYXdpbmdEYXRhW2tleV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0YXdhaXQgdGhpcy5zYXZlRHJhd2luZ0RhdGEoKTtcblx0fVxuXG5cdC8vIC0tLSBTaW1wbGUgWUFNTCBQYXJzZXIgLS0tXG5cdHByaXZhdGUgcGFyc2VTaW1wbGVZQU1MKHlhbWw6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuXHRcdGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXHRcdGNvbnN0IGxpbmVzID0geWFtbC5zcGxpdChcIlxcblwiKTtcblx0XHRmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0XHRsaW5lID0gbGluZS50cmltKCk7XG5cdFx0XHRpZiAoIWxpbmUpIGNvbnRpbnVlO1xuXHRcdFx0Y29uc3Qgc2VwYXJhdG9ySW5kZXggPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHRcdFx0aWYgKHNlcGFyYXRvckluZGV4ID09PSAtMSkgY29udGludWU7XG5cdFx0XHRjb25zdCBrZXkgPSBsaW5lLnN1YnN0cmluZygwLCBzZXBhcmF0b3JJbmRleCkudHJpbSgpO1xuXHRcdFx0bGV0IHJhd1ZhbHVlID0gbGluZS5zdWJzdHJpbmcoc2VwYXJhdG9ySW5kZXggKyAxKS50cmltKCk7XG5cdFx0XHRsZXQgdmFsdWU6IHN0cmluZyB8IGJvb2xlYW4gfCBudW1iZXI7XG5cdFx0XHRpZiAoKHJhd1ZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgcmF3VmFsdWUuZW5kc1dpdGgoJ1wiJykpIHx8XG5cdFx0XHRcdChyYXdWYWx1ZS5zdGFydHNXaXRoKFwiJ1wiKSAmJiByYXdWYWx1ZS5lbmRzV2l0aChcIidcIikpKSB7XG5cdFx0XHRcdHZhbHVlID0gcmF3VmFsdWUuc2xpY2UoMSwgLTEpO1xuXHRcdFx0fSBlbHNlIGlmIChyYXdWYWx1ZSA9PT0gXCJ0cnVlXCIpIHtcblx0XHRcdFx0dmFsdWUgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIGlmIChyYXdWYWx1ZSA9PT0gXCJmYWxzZVwiKSB7XG5cdFx0XHRcdHZhbHVlID0gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIocmF3VmFsdWUpKSkge1xuXHRcdFx0XHR2YWx1ZSA9IE51bWJlcihyYXdWYWx1ZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YWx1ZSA9IHJhd1ZhbHVlO1xuXHRcdFx0fVxuXHRcdFx0cmVzdWx0W2tleV0gPSB2YWx1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdC8vIC0tLSBSZXNvdXJjZSBIZWxwZXJzIC0tLVxuXHRwcml2YXRlIGdldENhY2hlZFJlc291cmNlUGF0aChmaWxlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAodGhpcy5maWxlUGF0aENhY2hlLmhhcyhmaWxlTmFtZSkpIHtcblx0XHRcdHJldHVybiB0aGlzLmZpbGVQYXRoQ2FjaGUuZ2V0KGZpbGVOYW1lKSE7XG5cdFx0fVxuXHRcdGNvbnN0IHBhdGggPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmdldFJlc291cmNlUGF0aChmaWxlTmFtZSk7XG5cdFx0dGhpcy5maWxlUGF0aENhY2hlLnNldChmaWxlTmFtZSwgcGF0aCk7XG5cdFx0cmV0dXJuIHBhdGg7XG5cdH1cblxuXHRwcml2YXRlIGdldE1lZGlhU291cmNlKGZpbGVOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGlmIChmaWxlTmFtZS5zdGFydHNXaXRoKFwiaHR0cDovL1wiKSB8fCBmaWxlTmFtZS5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikpIHtcblx0XHRcdHJldHVybiBmaWxlTmFtZTtcblx0XHR9XG5cdFx0bGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZU5hbWUpO1xuXHRcdGlmICghZmlsZSkge1xuXHRcdFx0Y29uc3QgbWF0Y2hpbmdGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCkuZmlsdGVyKFxuXHRcdFx0XHRmID0+IGYubmFtZS50b0xvd2VyQ2FzZSgpID09PSBmaWxlTmFtZS50b0xvd2VyQ2FzZSgpXG5cdFx0XHQpO1xuXHRcdFx0aWYgKG1hdGNoaW5nRmlsZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRmaWxlTmFtZSA9IG1hdGNoaW5nRmlsZXNbMF0ucGF0aDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGaWxlIG5vdCBmb3VuZCBpbiB2YXVsdDpcIiwgZmlsZU5hbWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5nZXRDYWNoZWRSZXNvdXJjZVBhdGgoZmlsZU5hbWUpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBnZXRNYXJrZG93bkNvbnRlbnQoZmlsZU5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0aWYgKHRoaXMubWFya2Rvd25DYWNoZS5oYXMoZmlsZU5hbWUpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5tYXJrZG93bkNhY2hlLmdldChmaWxlTmFtZSkhO1xuXHRcdH1cblx0XHRjb25zdCBtZEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZU5hbWUpIGFzIFRGaWxlO1xuXHRcdGlmIChtZEZpbGUpIHtcblx0XHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKG1kRmlsZSk7XG5cdFx0XHR0aGlzLm1hcmtkb3duQ2FjaGUuc2V0KGZpbGVOYW1lLCBjb250ZW50KTtcblx0XHRcdHJldHVybiBjb250ZW50O1xuXHRcdH1cblx0XHRyZXR1cm4gXCJcIjtcblx0fVxuXG5cdHByaXZhdGUgdGhyb3R0bGU8VCBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihmbjogVCwgZGVsYXk6IG51bWJlcik6IFQge1xuXHRcdGxldCBsYXN0Q2FsbCA9IDA7XG5cdFx0cmV0dXJuICgoLi4uYXJnczogYW55W10pID0+IHtcblx0XHRcdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0XHRpZiAobm93IC0gbGFzdENhbGwgPCBkZWxheSkgcmV0dXJuO1xuXHRcdFx0bGFzdENhbGwgPSBub3c7XG5cdFx0XHRyZXR1cm4gZm4oLi4uYXJncyk7XG5cdFx0fSkgYXMgVDtcblx0fVxuXG5cdC8vIC0tLSBTbGlkZXIgQ3JlYXRpb24gLS0tXG5cdHByaXZhdGUgY3JlYXRlTWVkaWFTbGlkZXIoc291cmNlOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCwgY3R4OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSB7XG5cdFx0Y29uc3QgbWV0YWRhdGFNYXRjaCA9IHNvdXJjZS5tYXRjaCgvLS0tXFxuKFtcXHNcXFNdKz8pXFxuLS0tLyk7XG5cdFx0Y29uc3QgbWVkaWFDb250ZW50ID0gc291cmNlLnJlcGxhY2UoLy0tLVxcbltcXHNcXFNdKz9cXG4tLS0vLCBcIlwiKS50cmltKCk7XG5cdFx0Y29uc3QgbWVkaWFGaWxlcyA9IG1lZGlhQ29udGVudC5zcGxpdChcIlxcblwiKS5tYXAobGluZSA9PiBsaW5lLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pO1xuXG5cdFx0bGV0IHNldHRpbmdzOiBhbnkgPSB7XG5cdFx0XHRzbGlkZXJJZDogXCJcIixcblx0XHRcdGNhcm91c2VsU2hvd1RodW1ibmFpbHM6IHRydWUsXG5cdFx0XHR0aHVtYm5haWxQb3NpdGlvbjogXCJib3R0b21cIixcblx0XHRcdGNhcHRpb25Nb2RlOiBcImJlbG93XCIsXG5cdFx0XHRhdXRvcGxheTogZmFsc2UsXG5cdFx0XHRzbGlkZXNob3dTcGVlZDogNSxcblx0XHRcdHdpZHRoOiBcIjEwMCVcIixcblx0XHRcdGhlaWdodDogXCIzMDBweFwiLFxuXHRcdFx0dHJhbnNpdGlvbkVmZmVjdDogXCJmYWRlXCIsXG5cdFx0XHR0cmFuc2l0aW9uRHVyYXRpb246IDUwMCxcblx0XHRcdGVuaGFuY2VkVmlldzogZmFsc2UsXG5cdFx0XHRpbnRlcmFjdGl2ZU5vdGVzOiBmYWxzZVxuXHRcdH07XG5cblx0XHRpZiAobWV0YWRhdGFNYXRjaCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgcGFyc2VkU2V0dGluZ3MgPSB0aGlzLnBhcnNlU2ltcGxlWUFNTChtZXRhZGF0YU1hdGNoWzFdKTtcblx0XHRcdFx0c2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHNldHRpbmdzLCBwYXJzZWRTZXR0aW5ncyk7XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIG1lZGlhLXNsaWRlciBtZXRhZGF0YTpcIiwgZXJyb3IpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGxldCBzbGlkZXJJZCA9IHNldHRpbmdzLnNsaWRlcklkO1xuXHRcdGlmICghc2xpZGVySWQpIHtcblx0XHRcdHNsaWRlcklkID0gYHNsaWRlci0ke01lZGlhU2xpZGVyUGx1Z2luLnNsaWRlckNvdW50ZXIrK31gO1xuXHRcdH1cblxuXHRcdGNvbnN0IHZhbGlkRmlsZXMgPSBtZWRpYUZpbGVzLm1hcChmaWxlID0+IHtcblx0XHRcdGxldCBtYXRjaCA9IGZpbGUubWF0Y2goLyE/XFxbXFxbKC4qPylcXF1cXF0vKTtcblx0XHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdFx0bWF0Y2ggPSBmaWxlLm1hdGNoKC8hXFxbXFxdXFwoKC4qPylcXCkvKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogXCJcIjtcblx0XHR9KS5maWx0ZXIoQm9vbGVhbik7XG5cblx0XHRpZiAodmFsaWRGaWxlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdGVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gdmFsaWQgbWVkaWEgZmlsZXMgZm91bmQuXCIgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5ub3Rlc01hbmFnZXIuY2xlYW51cE5vdGVzRm9yU2xpZGVyKHNsaWRlcklkLCB2YWxpZEZpbGVzKS5jYXRjaChjb25zb2xlLmVycm9yKTtcblx0XHR0aGlzLmNsZWFudXBEcmF3aW5nRGF0YShzbGlkZXJJZCwgdmFsaWRGaWxlcykuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cblx0XHR0aGlzLnJlbmRlclNsaWRlcihlbCwgdmFsaWRGaWxlcywgc2V0dGluZ3MsIHNsaWRlcklkKTtcblx0fVxuXG5cdC8vIC0tLSBSZW5kZXIgU2xpZGVyIFVJIC0tLVxuXHRwcml2YXRlIHJlbmRlclNsaWRlcihjb250YWluZXI6IEhUTUxFbGVtZW50LCBmaWxlczogc3RyaW5nW10sIHNldHRpbmdzOiBhbnksIHNsaWRlcklkOiBzdHJpbmcpIHtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblx0XHRsZXQgdXBkYXRlRHJhd2luZ092ZXJsYXk6ICgobWVkaWFLZXk6IHN0cmluZykgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG5cdFx0Y29uc3Qgc2xpZGVyV3JhcHBlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoXCJtZWRpYS1zbGlkZXItd3JhcHBlclwiKTtcblx0XHRzbGlkZXJXcmFwcGVyLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXHRcdGlmIChzZXR0aW5ncy5jYXJvdXNlbFNob3dUaHVtYm5haWxzICYmIChzZXR0aW5ncy50aHVtYm5haWxQb3NpdGlvbiA9PT0gXCJsZWZ0XCIgfHwgc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwicmlnaHRcIikpIHtcblx0XHRcdHNsaWRlcldyYXBwZXIuY2xhc3NMaXN0LmFkZChcImZsZXgtcm93XCIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzbGlkZXJXcmFwcGVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcblx0XHRcdHNsaWRlcldyYXBwZXIuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XG5cdFx0XHRzbGlkZXJXcmFwcGVyLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNsaWRlckNvbnRlbnQgPSBzbGlkZXJXcmFwcGVyLmNyZWF0ZURpdihcInNsaWRlci1jb250ZW50XCIpO1xuXHRcdHNsaWRlckNvbnRlbnQuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5cdFx0c2xpZGVyQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG5cdFx0c2xpZGVyQ29udGVudC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcblx0XHRzbGlkZXJDb250ZW50LnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuXHRcdHNsaWRlckNvbnRlbnQuc3R5bGUud2lkdGggPSBzZXR0aW5ncy53aWR0aDtcblxuXHRcdGNvbnN0IHNsaWRlckNvbnRhaW5lciA9IHNsaWRlckNvbnRlbnQuY3JlYXRlRGl2KFwic2xpZGVyLWNvbnRhaW5lclwiKTtcblx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUud2lkdGggPSBzZXR0aW5ncy53aWR0aDtcblx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gc2V0dGluZ3MuaGVpZ2h0O1xuXHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG5cdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXG5cdFx0Y29uc3QgY2FwdGlvbkNvbnRhaW5lciA9IHNsaWRlckNvbnRlbnQuY3JlYXRlRGl2KFwic2xpZGVyLWNhcHRpb24tY29udGFpbmVyXCIpO1xuXHRcdGxldCB0aHVtYm5haWxDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IHRodW1ibmFpbEVsczogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXHRcdGlmIChzZXR0aW5ncy5jYXJvdXNlbFNob3dUaHVtYm5haWxzKSB7XG5cdFx0XHR0aHVtYm5haWxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdFx0dGh1bWJuYWlsQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwidGh1bWJuYWlsLWNvbnRhaW5lclwiO1xuXHRcdFx0aWYgKHNldHRpbmdzLnRodW1ibmFpbFBvc2l0aW9uID09PSBcImxlZnRcIiB8fCBzZXR0aW5ncy50aHVtYm5haWxQb3NpdGlvbiA9PT0gXCJyaWdodFwiKSB7XG5cdFx0XHRcdHRodW1ibmFpbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIik7XG5cdFx0XHRcdHRodW1ibmFpbENvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBzZXR0aW5ncy5oZWlnaHQ7XG5cdFx0XHRcdHRodW1ibmFpbENvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSBcImF1dG9cIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRodW1ibmFpbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaG9yaXpvbnRhbFwiKTtcblx0XHRcdFx0dGh1bWJuYWlsQ29udGFpbmVyLnN0eWxlLndpZHRoID0gc2V0dGluZ3Mud2lkdGg7XG5cdFx0XHRcdHRodW1ibmFpbENvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1ggPSBcImF1dG9cIjtcblx0XHRcdFx0dGh1bWJuYWlsQ29udGFpbmVyLnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vd3JhcFwiO1xuXHRcdFx0XHR0aHVtYm5haWxDb250YWluZXIuc3R5bGUubWFyZ2luID0gXCIxMHB4IDBcIjtcblx0XHRcdH1cblx0XHRcdGlmIChzZXR0aW5ncy50aHVtYm5haWxQb3NpdGlvbiA9PT0gXCJ0b3BcIiB8fCBzZXR0aW5ncy50aHVtYm5haWxQb3NpdGlvbiA9PT0gXCJsZWZ0XCIpIHtcblx0XHRcdFx0c2xpZGVyV3JhcHBlci5pbnNlcnRCZWZvcmUodGh1bWJuYWlsQ29udGFpbmVyLCBzbGlkZXJDb250ZW50KTtcblx0XHRcdH0gZWxzZSBpZiAoc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwiYm90dG9tXCIgfHwgc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwicmlnaHRcIikge1xuXHRcdFx0XHRzbGlkZXJXcmFwcGVyLmFwcGVuZENoaWxkKHRodW1ibmFpbENvbnRhaW5lcik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRGVjbGFyZSBjdXJyZW50IGluZGV4IGFuZCBkaXJlY3Rpb24gZWFybHkgc28gdGhleSBhcmUgYXZhaWxhYmxlIGZvciBhbGwgaGFuZGxlcnMuXG5cdFx0bGV0IGN1cnJlbnRJbmRleCA9IDA7XG5cdFx0bGV0IGN1cnJlbnREaXJlY3Rpb246IFwibmV4dFwiIHwgXCJwcmV2XCIgPSBcIm5leHRcIjtcblxuXHRcdC8vIEVuaGFuY2VkIHZpZXc6IGZ1bGxzY3JlZW4gYW5kIGNvcHkgYnV0dG9ucy5cblx0XHRpZiAoc2V0dGluZ3MuZW5oYW5jZWRWaWV3KSB7XG5cdFx0XHRjb25zdCBmdWxsU2NyZWVuQnRuID0gc2xpZGVyV3JhcHBlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHUyNkY2XCIsIGNsczogXCJmdWxsc2NyZWVuLWJ0blwiIH0pO1xuXHRcdFx0ZnVsbFNjcmVlbkJ0bi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHRcdGZ1bGxTY3JlZW5CdG4uc3R5bGUudG9wID0gXCIxMHB4XCI7XG5cdFx0XHRmdWxsU2NyZWVuQnRuLnN0eWxlLnJpZ2h0ID0gXCIxMHB4XCI7XG5cdFx0XHRmdWxsU2NyZWVuQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICghZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQpIHtcblx0XHRcdFx0XHRzbGlkZXJXcmFwcGVyLnJlcXVlc3RGdWxsc2NyZWVuKCkuY2F0Y2goZXJyID0+IGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbmFibGluZyBmdWxsc2NyZWVuOlwiLCBlcnIpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBjb3B5QnRuID0gc2xpZGVyV3JhcHBlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHVEODNEXHVEQ0NCXCIsIGNsczogXCJjb3B5LWJ0blwiIH0pO1xuXHRcdFx0Y29weUJ0bi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHRcdGNvcHlCdG4uc3R5bGUudG9wID0gXCIxMHB4XCI7XG5cdFx0XHRjb3B5QnRuLnN0eWxlLnJpZ2h0ID0gXCI3MHB4XCI7XG5cdFx0XHRjb3B5QnRuLnN0eWxlLnpJbmRleCA9IFwiMTEwXCI7XG5cdFx0XHRjb3B5QnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdC8vIFNpbXBseSBjb3B5IHRoZSBtYXJrZG93biBpbWFnZSBsaW5rIGZyb20gdGhlIG1lZGlhLXNsaWRlciBjb2RlYmxvY2suXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRFbnRyeSA9IGZpbGVzW2N1cnJlbnRJbmRleF07XG5cdFx0XHRcdGxldCBbZmlsZU5hbWVdID0gY3VycmVudEVudHJ5LnNwbGl0KFwifFwiKS5tYXAocyA9PiBzLnRyaW0oKSk7XG5cdFx0XHRcdGNvbnN0IG1hcmtkb3duTGluayA9IGAhW1ske2ZpbGVOYW1lfV1dYDtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChtYXJrZG93bkxpbmspO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiQ29waWVkIG1hcmtkb3duIGxpbmsgdG8gY2xpcGJvYXJkOlwiLCBtYXJrZG93bkxpbmspO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNvcHkgbWFya2Rvd24gbGluazpcIiwgZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRzbGlkZXJXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJmdWxsc2NyZWVuY2hhbmdlXCIsICgpID0+IHtcblx0XHRcdGlmIChkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCA9PT0gc2xpZGVyV3JhcHBlcikge1xuXHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gXCI4NXZoXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gc2V0dGluZ3MuaGVpZ2h0O1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gSW50ZXJhY3RpdmUgbm90ZXMuXG5cdFx0bGV0IG5vdGVzQ29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBub3Rlc1RleHRhcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IG5vdGVzVG9nZ2xlQnRuOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRcdGlmIChzZXR0aW5ncy5pbnRlcmFjdGl2ZU5vdGVzKSB7XG5cdFx0XHRub3Rlc1RvZ2dsZUJ0biA9IHNsaWRlcldyYXBwZXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlx1RDgzRFx1RENERFwiLCBjbHM6IFwibm90ZXMtdG9nZ2xlLWJ0blwiIH0pO1xuXHRcdFx0bm90ZXNUb2dnbGVCdG4uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0XHRub3Rlc1RvZ2dsZUJ0bi5zdHlsZS50b3AgPSBcIjEwcHhcIjtcblx0XHRcdG5vdGVzVG9nZ2xlQnRuLnN0eWxlLmxlZnQgPSBcIjEwcHhcIjtcblx0XHRcdG5vdGVzVG9nZ2xlQnRuLnN0eWxlLnpJbmRleCA9IFwiMTEwXCI7XG5cdFx0XHRub3Rlc1RvZ2dsZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRpZiAobm90ZXNDb250YWluZXIpIHtcblx0XHRcdFx0XHRub3Rlc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gbm90ZXNDb250YWluZXIuc3R5bGUuZGlzcGxheSA9PT0gXCJibG9ja1wiID8gXCJub25lXCIgOiBcImJsb2NrXCI7XG5cdFx0XHRcdFx0Y29uc3QgbWVkaWFLZXkgPSBgJHtzbGlkZXJJZH0tJHtmaWxlc1tjdXJyZW50SW5kZXhdfWA7XG5cdFx0XHRcdFx0aWYgKG5vdGVzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPT09IFwiYmxvY2tcIiAmJiBub3Rlc1RleHRhcmVhKSB7XG5cdFx0XHRcdFx0XHRub3Rlc1RleHRhcmVhLnZhbHVlID0gdGhpcy5ub3Rlc01hbmFnZXIuZ2V0Tm90ZShtZWRpYUtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRub3Rlc0NvbnRhaW5lciA9IHNsaWRlcldyYXBwZXIuY3JlYXRlRGl2KFwibm90ZXMtY29udGFpbmVyXCIpO1xuXHRcdFx0bm90ZXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0XHRub3Rlc0NvbnRhaW5lci5zdHlsZS5ib3R0b20gPSBcIjEwcHhcIjtcblx0XHRcdG5vdGVzQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcIjEwcHhcIjtcblx0XHRcdG5vdGVzQ29udGFpbmVyLnN0eWxlLndpZHRoID0gXCJjYWxjKDEwMCUgLSAyMHB4KVwiO1xuXHRcdFx0bm90ZXNDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZCA9IFwicmdiYSgyNTUsMjU1LDI1NSwwLjgpXCI7XG5cdFx0XHRub3Rlc0NvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gXCI1cHhcIjtcblx0XHRcdG5vdGVzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuXHRcdFx0bm90ZXNUZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcblx0XHRcdG5vdGVzVGV4dGFyZWEuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcblx0XHRcdG5vdGVzVGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gXCI2MHB4XCI7XG5cdFx0XHRub3Rlc1RleHRhcmVhLnBsYWNlaG9sZGVyID0gXCJBZGQgeW91ciBub3RlcyBoZXJlLi4uXCI7XG5cdFx0XHRub3Rlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChub3Rlc1RleHRhcmVhKTtcblxuXHRcdFx0Y29uc3Qgc2F2ZU5vdGVzQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblx0XHRcdHNhdmVOb3Rlc0J0bi50ZXh0Q29udGVudCA9IFwiXHVEODNEXHVEQ0JFXCI7XG5cdFx0XHRzYXZlTm90ZXNCdG4uY2xhc3NOYW1lID0gXCJub3Rlcy1zYXZlLWJ0blwiO1xuXHRcdFx0c2F2ZU5vdGVzQnRuLnN0eWxlLm1hcmdpblRvcCA9IFwiNXB4XCI7XG5cdFx0XHRzYXZlTm90ZXNCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgbWVkaWFLZXkgPSBgJHtzbGlkZXJJZH0tJHtmaWxlc1tjdXJyZW50SW5kZXhdfWA7XG5cdFx0XHRcdGlmIChub3Rlc1RleHRhcmVhKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5ub3Rlc01hbmFnZXIuc2V0Tm90ZShtZWRpYUtleSwgbm90ZXNUZXh0YXJlYS52YWx1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5vdGVzQ29udGFpbmVyKSBub3Rlc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdFx0XHR9O1xuXHRcdFx0bm90ZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoc2F2ZU5vdGVzQnRuKTtcblx0XHR9XG5cblx0XHQvLyBEcmF3aW5nIEFubm90YXRpb24gSW50ZWdyYXRpb24uXG5cdFx0bGV0IGRyYXdpbmdBbm5vdGF0aW9uOiBEcmF3aW5nQW5ub3RhdGlvbiB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBjbGVhckRyYXdpbmdCdG46IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlRHJhd2luZ0Fubm90YXRpb24pIHtcblx0XHRcdGNvbnN0IGRyYXdpbmdUb2dnbGVCdG4gPSBzbGlkZXJXcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdTI3MEZcdUZFMEZcIiwgY2xzOiBcImRyYXdpbmctdG9nZ2xlLWJ0blwiIH0pO1xuXHRcdFx0ZHJhd2luZ1RvZ2dsZUJ0bi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHRcdGRyYXdpbmdUb2dnbGVCdG4uc3R5bGUudG9wID0gXCIxMHB4XCI7XG5cdFx0XHRkcmF3aW5nVG9nZ2xlQnRuLnN0eWxlLnJpZ2h0ID0gXCI1MHB4XCI7XG5cdFx0XHRkcmF3aW5nVG9nZ2xlQnRuLnN0eWxlLnpJbmRleCA9IFwiMTEwXCI7XG5cblx0XHRcdHVwZGF0ZURyYXdpbmdPdmVybGF5ID0gKG1lZGlhS2V5OiBzdHJpbmcpID0+IHtcblx0XHRcdFx0Y29uc3QgZXhpc3RpbmdPdmVybGF5ID0gc2xpZGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuZHJhd2luZy1vdmVybGF5XCIpO1xuXHRcdFx0XHRpZiAoZXhpc3RpbmdPdmVybGF5KSB7XG5cdFx0XHRcdFx0ZXhpc3RpbmdPdmVybGF5LnJlbW92ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHNhdmVkRHJhd2luZyA9IHRoaXMuZHJhd2luZ0RhdGFbbWVkaWFLZXldO1xuXHRcdFx0XHRpZiAoc2F2ZWREcmF3aW5nKSB7XG5cdFx0XHRcdFx0Y29uc3Qgb3ZlcmxheSA9IHNsaWRlckNvbnRhaW5lci5jcmVhdGVFbChcImltZ1wiLCB7IGF0dHI6IHsgc3JjOiBzYXZlZERyYXdpbmcgfSB9KTtcblx0XHRcdFx0XHRvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJkcmF3aW5nLW92ZXJsYXlcIik7XG5cdFx0XHRcdFx0b3ZlcmxheS5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHRcdFx0XHRvdmVybGF5LnN0eWxlLnRvcCA9IFwiMFwiO1xuXHRcdFx0XHRcdG92ZXJsYXkuc3R5bGUubGVmdCA9IFwiMFwiO1xuXHRcdFx0XHRcdG92ZXJsYXkuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcblx0XHRcdFx0XHRvdmVybGF5LnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuXHRcdFx0XHRcdG92ZXJsYXkuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuXHRcdFx0XHRcdGlmICghY2xlYXJEcmF3aW5nQnRuKSB7XG5cdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4gPSBzbGlkZXJXcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdUQ4M0RcdURERDFcdUZFMEZcIiwgY2xzOiBcImNsZWFyLWRyYXdpbmctYnRuXCIgfSk7XG5cdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4uc3R5bGUudG9wID0gXCIxMHB4XCI7XG5cdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4uc3R5bGUucmlnaHQgPSBcIjExMHB4XCI7XG5cdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4uc3R5bGUuekluZGV4ID0gXCIxMTBcIjtcblx0XHRcdFx0XHRcdGNsZWFyRHJhd2luZ0J0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgdGhpcy5kcmF3aW5nRGF0YVttZWRpYUtleV07XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZURyYXdpbmdEYXRhKCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nT3ZlcmxheSA9IHNsaWRlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmRyYXdpbmctb3ZlcmxheVwiKTtcblx0XHRcdFx0XHRcdFx0aWYgKGV4aXN0aW5nT3ZlcmxheSkgZXhpc3RpbmdPdmVybGF5LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4hLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4gPSBudWxsO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKGNsZWFyRHJhd2luZ0J0bikge1xuXHRcdFx0XHRcdFx0Y2xlYXJEcmF3aW5nQnRuLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2xlYXJEcmF3aW5nQnRuID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdGRyYXdpbmdUb2dnbGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgbWVkaWFLZXkgPSBgJHtzbGlkZXJJZH0tJHtmaWxlc1tjdXJyZW50SW5kZXhdfWA7XG5cdFx0XHRcdGlmIChkcmF3aW5nQW5ub3RhdGlvbikge1xuXHRcdFx0XHRcdGNvbnN0IGRyYXdpbmdEYXRhVXJsID0gZHJhd2luZ0Fubm90YXRpb24uZ2V0QW5ub3RhdGlvbigpO1xuXHRcdFx0XHRcdHRoaXMuZHJhd2luZ0RhdGFbbWVkaWFLZXldID0gZHJhd2luZ0RhdGFVcmw7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlRHJhd2luZ0RhdGEoKTtcblx0XHRcdFx0XHRkcmF3aW5nQW5ub3RhdGlvbi5kZXN0cm95KCk7XG5cdFx0XHRcdFx0ZHJhd2luZ0Fubm90YXRpb24gPSBudWxsO1xuXHRcdFx0XHRcdGRyYXdpbmdUb2dnbGVCdG4udGV4dENvbnRlbnQgPSBcIlx1MjcwRlx1RkUwRlwiO1xuXHRcdFx0XHRcdHVwZGF0ZURyYXdpbmdPdmVybGF5Py4obWVkaWFLZXkpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICh0aGlzLmRyYXdpbmdEYXRhW21lZGlhS2V5XSkge1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuZHJhd2luZ0RhdGFbbWVkaWFLZXldO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zYXZlRHJhd2luZ0RhdGEoKTtcblx0XHRcdFx0XHRcdGNvbnN0IGV4aXN0aW5nT3ZlcmxheSA9IHNsaWRlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmRyYXdpbmctb3ZlcmxheVwiKTtcblx0XHRcdFx0XHRcdGlmIChleGlzdGluZ092ZXJsYXkpIGV4aXN0aW5nT3ZlcmxheS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdGlmIChjbGVhckRyYXdpbmdCdG4pIHtcblx0XHRcdFx0XHRcdFx0Y2xlYXJEcmF3aW5nQnRuLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4gPSBudWxsO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkcmF3aW5nQW5ub3RhdGlvbiA9IG5ldyBEcmF3aW5nQW5ub3RhdGlvbihzbGlkZXJDb250YWluZXIpO1xuXHRcdFx0XHRcdGRyYXdpbmdUb2dnbGVCdG4udGV4dENvbnRlbnQgPSBcIlx1RDgzRFx1RENCRVwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChzbGlkZXJXcmFwcGVyKTtcblxuXHRcdC8vIE5hdmlnYXRpb24gYnV0dG9ucy5cblx0XHRjb25zdCBwcmV2QnRuID0gc2xpZGVyQ29udGVudC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHUyQjlDXCIsIGNsczogXCJzbGlkZXItYnRuIHByZXZcIiB9KTtcblx0XHRjb25zdCBuZXh0QnRuID0gc2xpZGVyQ29udGVudC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHUyQjlFXCIsIGNsczogXCJzbGlkZXItYnRuIG5leHRcIiB9KTtcblx0XHRwcmV2QnRuLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuXHRcdG5leHRCdG4uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG5cdFx0cHJldkJ0bi5zdHlsZS50b3AgPSBcIjUwJVwiO1xuXHRcdG5leHRCdG4uc3R5bGUudG9wID0gXCI1MCVcIjtcblx0XHRwcmV2QnRuLnN0eWxlLmxlZnQgPSBcIjEwcHhcIjtcblx0XHRuZXh0QnRuLnN0eWxlLnJpZ2h0ID0gXCIxMHB4XCI7XG5cdFx0cHJldkJ0bi5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVkoLTUwJSlcIjtcblx0XHRuZXh0QnRuLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWSgtNTAlKVwiO1xuXG5cdFx0Ly8gVHJhbnNpdGlvbjogaGlkZSBjdXJyZW50IG1lZGlhLlxuXHRcdGNvbnN0IHVwZGF0ZU1lZGlhRGlzcGxheSA9IGFzeW5jICgpID0+IHtcblx0XHRcdHN3aXRjaCAoc2V0dGluZ3MudHJhbnNpdGlvbkVmZmVjdCkge1xuXHRcdFx0XHRjYXNlIFwiZmFkZVwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gYG9wYWNpdHkgJHtzZXR0aW5ncy50cmFuc2l0aW9uRHVyYXRpb259bXMgZWFzZS1pbi1vdXRgO1xuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzbGlkZVwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gYHRyYW5zZm9ybSAke3NldHRpbmdzLnRyYW5zaXRpb25EdXJhdGlvbn1tcyBlYXNlLWluLW91dGA7XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IGN1cnJlbnREaXJlY3Rpb24gPT09IFwibmV4dFwiID8gXCJ0cmFuc2xhdGVYKC0xMDAlKVwiIDogXCJ0cmFuc2xhdGVYKDEwMCUpXCI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJ6b29tXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSBgdHJhbnNmb3JtICR7c2V0dGluZ3MudHJhbnNpdGlvbkR1cmF0aW9ufW1zIGVhc2UtaW4tb3V0LCBvcGFjaXR5ICR7c2V0dGluZ3MudHJhbnNpdGlvbkR1cmF0aW9ufW1zIGVhc2UtaW4tb3V0YDtcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZSgwLjgpXCI7XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInNsaWRlLXVwXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSBgdHJhbnNmb3JtICR7c2V0dGluZ3MudHJhbnNpdGlvbkR1cmF0aW9ufW1zIGVhc2UtaW4tb3V0YDtcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVZKC0xMDAlKVwiO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic2xpZGUtZG93blwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gYHRyYW5zZm9ybSAke3NldHRpbmdzLnRyYW5zaXRpb25EdXJhdGlvbn1tcyBlYXNlLWluLW91dGA7XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWSgxMDAlKVwiO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiZmxpcFwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gYHRyYW5zZm9ybSAke3NldHRpbmdzLnRyYW5zaXRpb25EdXJhdGlvbn1tcyBlYXNlLWluLW91dCwgb3BhY2l0eSAke3NldHRpbmdzLnRyYW5zaXRpb25EdXJhdGlvbn1tcyBlYXNlLWluLW91dGA7XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlWSg5MGRlZylcIjtcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiZmxpcC12ZXJ0aWNhbFwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gYHRyYW5zZm9ybSAke3NldHRpbmdzLnRyYW5zaXRpb25EdXJhdGlvbn1tcyBlYXNlLWluLW91dCwgb3BhY2l0eSAke3NldHRpbmdzLnRyYW5zaXRpb25EdXJhdGlvbn1tcyBlYXNlLWluLW91dGA7XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IFwicm90YXRlWCg5MGRlZylcIjtcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUub3BhY2l0eSA9IFwiMFwiO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicm90YXRlXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSBgdHJhbnNmb3JtICR7c2V0dGluZ3MudHJhbnNpdGlvbkR1cmF0aW9ufW1zIGVhc2UtaW4tb3V0YDtcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGUoMTVkZWcpXCI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJibHVyXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSBgZmlsdGVyICR7c2V0dGluZ3MudHJhbnNpdGlvbkR1cmF0aW9ufW1zIGVhc2UtaW4tb3V0YDtcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUuZmlsdGVyID0gXCJibHVyKDEwcHgpXCI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzcXVlZXplXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSBgdHJhbnNmb3JtICR7c2V0dGluZ3MudHJhbnNpdGlvbkR1cmF0aW9ufW1zIGVhc2UtaW4tb3V0YDtcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZVgoMC44KVwiO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gYG9wYWNpdHkgJHtzZXR0aW5ncy50cmFuc2l0aW9uRHVyYXRpb259bXMgZWFzZS1pbi1vdXRgO1xuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG5cdFx0XHR9XG5cblx0XHRcdHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRzbGlkZXJDb250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0aWYgKHNldHRpbmdzLmNhcHRpb25Nb2RlID09PSBcImJlbG93XCIpIGNhcHRpb25Db250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0aWYgKHRodW1ibmFpbEVscy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0dGh1bWJuYWlsRWxzLmZvckVhY2goKHRodW1iLCBpZHgpID0+IHtcblx0XHRcdFx0XHRcdHRodW1iLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmUtdGh1bWJuYWlsXCIsIGlkeCA9PT0gY3VycmVudEluZGV4KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRFbnRyeSA9IGZpbGVzW2N1cnJlbnRJbmRleF07XG5cdFx0XHRcdGxldCBbZmlsZU5hbWUsIGNhcHRpb25dID0gY3VycmVudEVudHJ5LnNwbGl0KFwifFwiKS5tYXAocyA9PiBzLnRyaW0oKSk7XG5cdFx0XHRcdGlmICghZmlsZU5hbWUuaW5jbHVkZXMoXCIuXCIpKSB7XG5cdFx0XHRcdFx0Y29uc3QgbWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChmaWxlTmFtZSwgXCJcIik7XG5cdFx0XHRcdFx0aWYgKG1kRmlsZSAmJiBtZEZpbGUuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0XHRcdGZpbGVOYW1lID0gbWRGaWxlLnBhdGg7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gdGhpcy5nZXRNZWRpYVNvdXJjZShmaWxlTmFtZSk7XG5cblx0XHRcdFx0aWYgKC9cXC4ocG5nfGpwZ3xqcGVnfGdpZikkL2kudGVzdChmaWxlTmFtZSkpIHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29tcHJlc3NlZFVybCA9IGF3YWl0IGNvbXByZXNzSW1hZ2UoZmlsZVBhdGgsIDgwMCwgNjAwLCAwLjcpO1xuXHRcdFx0XHRcdFx0Y29uc3QgaW1nID0gc2xpZGVyQ29udGFpbmVyLmNyZWF0ZUVsKFwiaW1nXCIsIHsgYXR0cjogeyBzcmM6IGNvbXByZXNzZWRVcmwgfSB9KTtcblx0XHRcdFx0XHRcdGltZy5jbGFzc0xpc3QuYWRkKFwic2xpZGVyLW1lZGlhXCIpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0Y29uc3QgaW1nID0gc2xpZGVyQ29udGFpbmVyLmNyZWF0ZUVsKFwiaW1nXCIsIHsgYXR0cjogeyBzcmM6IGZpbGVQYXRoIH0gfSk7XG5cdFx0XHRcdFx0XHRpbWcuY2xhc3NMaXN0LmFkZChcInNsaWRlci1tZWRpYVwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoL1xcLihtcDR8d2VibSkkL2kudGVzdChmaWxlTmFtZSkpIHtcblx0XHRcdFx0XHRjb25zdCB2aWRlbyA9IHNsaWRlckNvbnRhaW5lci5jcmVhdGVFbChcInZpZGVvXCIsIHsgYXR0cjogeyBzcmM6IGZpbGVQYXRoLCBjb250cm9sczogXCJ0cnVlXCIgfSB9KTtcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuYXV0b3BsYXkpIHZpZGVvLnNldEF0dHJpYnV0ZShcImF1dG9wbGF5XCIsIFwidHJ1ZVwiKTtcblx0XHRcdFx0XHR2aWRlby5jbGFzc0xpc3QuYWRkKFwic2xpZGVyLW1lZGlhXCIpO1xuXHRcdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZVZpc3VhbGl6ZXIpIHtcblx0XHRcdFx0XHRcdG5ldyBWaXN1YWxpemVyKHZpZGVvLCBzbGlkZXJDb250YWluZXIsIHtcblx0XHRcdFx0XHRcdFx0Y29sb3I6IHRoaXMuc2V0dGluZ3MudmlzdWFsaXplckNvbG9yLFxuXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IHRoaXMuc2V0dGluZ3MudmlzdWFsaXplckhlaWdodFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKC9cXC4obXAzfG9nZ3x3YXYpJC9pLnRlc3QoZmlsZU5hbWUpKSB7XG5cdFx0XHRcdFx0Y29uc3QgYXVkaW8gPSBzbGlkZXJDb250YWluZXIuY3JlYXRlRWwoXCJhdWRpb1wiLCB7IGF0dHI6IHsgc3JjOiBmaWxlUGF0aCwgY29udHJvbHM6IFwidHJ1ZVwiIH0gfSk7XG5cdFx0XHRcdFx0YXVkaW8uY2xhc3NMaXN0LmFkZChcInNsaWRlci1tZWRpYVwiKTtcblx0XHRcdFx0XHRhdWRpby5zdHlsZS5tYXJnaW5Ub3AgPSBcIjgwcHhcIjtcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVWaXN1YWxpemVyKSB7XG5cdFx0XHRcdFx0XHRuZXcgVmlzdWFsaXplcihhdWRpbywgc2xpZGVyQ29udGFpbmVyLCB7XG5cdFx0XHRcdFx0XHRcdGNvbG9yOiB0aGlzLnNldHRpbmdzLnZpc3VhbGl6ZXJDb2xvcixcblx0XHRcdFx0XHRcdFx0aGVpZ2h0OiB0aGlzLnNldHRpbmdzLnZpc3VhbGl6ZXJIZWlnaHRcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmICgvXFwuKHBkZikkL2kudGVzdChmaWxlTmFtZSkpIHtcblx0XHRcdFx0XHRjb25zdCBpZnJhbWUgPSBzbGlkZXJDb250YWluZXIuY3JlYXRlRWwoXCJpZnJhbWVcIiwgeyBhdHRyOiB7IHNyYzogZmlsZVBhdGgsIHdpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMCVcIiB9IH0pO1xuXHRcdFx0XHRcdGlmcmFtZS5zdHlsZS5ib3JkZXIgPSBcIm5vbmVcIjtcblx0XHRcdFx0XHRpZnJhbWUuY2xhc3NMaXN0LmFkZChcInNsaWRlci1tZWRpYVwiKTtcblx0XHRcdFx0fSBlbHNlIGlmICgvXFwuKG1kKSQvaS50ZXN0KGZpbGVOYW1lKSkge1xuXHRcdFx0XHRcdGNvbnN0IG1kRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlTmFtZSkgYXMgVEZpbGU7XG5cdFx0XHRcdFx0aWYgKG1kRmlsZSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuZ2V0TWFya2Rvd25Db250ZW50KGZpbGVOYW1lKTtcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5lbXB0eSgpO1xuXHRcdFx0XHRcdFx0YXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bihjb250ZW50LCBzbGlkZXJDb250YWluZXIsIG1kRmlsZS5wYXRoLCB0aGlzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc3QgbGluayA9IHNsaWRlckNvbnRhaW5lci5jcmVhdGVFbChcImFcIiwgeyB0ZXh0OiBcIk9wZW4gRmlsZVwiLCBhdHRyOiB7IGhyZWY6IGZpbGVQYXRoLCB0YXJnZXQ6IFwiX2JsYW5rXCIgfSB9KTtcblx0XHRcdFx0XHRsaW5rLmNsYXNzTGlzdC5hZGQoXCJzbGlkZXItbWVkaWFcIik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY2FwdGlvbikge1xuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy5jYXB0aW9uTW9kZSA9PT0gXCJvdmVybGF5XCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNhcEVsID0gc2xpZGVyQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogY2FwdGlvbiB9KTtcblx0XHRcdFx0XHRcdGNhcEVsLmNsYXNzTGlzdC5hZGQoXCJzbGlkZXItY2FwdGlvbi1vdmVybGF5XCIpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjYXBFbCA9IGNhcHRpb25Db250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBjYXB0aW9uIH0pO1xuXHRcdFx0XHRcdFx0Y2FwRWwuY2xhc3NMaXN0LmFkZChcInNsaWRlci1jYXB0aW9uXCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChzZXR0aW5ncy5pbnRlcmFjdGl2ZU5vdGVzICYmIG5vdGVzVGV4dGFyZWEpIHtcblx0XHRcdFx0XHRjb25zdCBtZWRpYUtleSA9IGAke3NsaWRlcklkfS0ke2ZpbGVzW2N1cnJlbnRJbmRleF19YDtcblx0XHRcdFx0XHRub3Rlc1RleHRhcmVhLnZhbHVlID0gdGhpcy5ub3Rlc01hbmFnZXIuZ2V0Tm90ZShtZWRpYUtleSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVEcmF3aW5nQW5ub3RhdGlvbikge1xuXHRcdFx0XHRcdGNvbnN0IG1lZGlhS2V5ID0gYCR7c2xpZGVySWR9LSR7ZmlsZXNbY3VycmVudEluZGV4XX1gO1xuXHRcdFx0XHRcdHVwZGF0ZURyYXdpbmdPdmVybGF5Py4obWVkaWFLZXkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2hvdyB0cmFuc2l0aW9uLlxuXHRcdFx0XHRzd2l0Y2ggKHNldHRpbmdzLnRyYW5zaXRpb25FZmZlY3QpIHtcblx0XHRcdFx0XHRjYXNlIFwiZmFkZVwiOlxuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzbGlkZVwiOlxuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IGN1cnJlbnREaXJlY3Rpb24gPT09IFwibmV4dFwiID8gXCJ0cmFuc2xhdGVYKDEwMCUpXCIgOiBcInRyYW5zbGF0ZVgoLTEwMCUpXCI7XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIub2Zmc2V0SGVpZ2h0O1xuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSBgdHJhbnNmb3JtICR7c2V0dGluZ3MudHJhbnNpdGlvbkR1cmF0aW9ufW1zIGVhc2UtaW4tb3V0YDtcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoMClcIjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJ6b29tXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZSgxKVwiO1xuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzbGlkZS11cFwiOlxuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWSgwKVwiO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInNsaWRlLWRvd25cIjpcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVkoMClcIjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJmbGlwXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGVZKDBkZWcpXCI7XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcImZsaXAtdmVydGljYWxcIjpcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSBcInJvdGF0ZVgoMGRlZylcIjtcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwicm90YXRlXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gXCJyb3RhdGUoMGRlZylcIjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJibHVyXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUuZmlsdGVyID0gXCJibHVyKDBweClcIjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzcXVlZXplXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZVgoMSlcIjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuc3R5bGUub3BhY2l0eSA9IFwiMVwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBzZXR0aW5ncy50cmFuc2l0aW9uRHVyYXRpb24pO1xuXHRcdH07XG5cblx0XHRjb25zdCB0aHJvdHRsZWRVcGRhdGUgPSB0aGlzLnRocm90dGxlKHVwZGF0ZU1lZGlhRGlzcGxheSwgMTAwKTtcblx0XHRjb25zdCBnb1ByZXYgPSAoKSA9PiB7XG5cdFx0XHRjdXJyZW50RGlyZWN0aW9uID0gXCJwcmV2XCI7XG5cdFx0XHRjdXJyZW50SW5kZXggPSAoY3VycmVudEluZGV4IC0gMSArIGZpbGVzLmxlbmd0aCkgJSBmaWxlcy5sZW5ndGg7XG5cdFx0XHR0aHJvdHRsZWRVcGRhdGUoKTtcblx0XHR9O1xuXHRcdGNvbnN0IGdvTmV4dCA9ICgpID0+IHtcblx0XHRcdGN1cnJlbnREaXJlY3Rpb24gPSBcIm5leHRcIjtcblx0XHRcdGN1cnJlbnRJbmRleCA9IChjdXJyZW50SW5kZXggKyAxKSAlIGZpbGVzLmxlbmd0aDtcblx0XHRcdHRocm90dGxlZFVwZGF0ZSgpO1xuXHRcdH07XG5cblx0XHRwcmV2QnRuLm9uY2xpY2sgPSBnb1ByZXY7XG5cdFx0bmV4dEJ0bi5vbmNsaWNrID0gZ29OZXh0O1xuXG5cdFx0c2xpZGVyQ29udGVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKSA9PiBzbGlkZXJDb250ZW50LmZvY3VzKCkpO1xuXHRcdHNsaWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4gc2xpZGVyQ29udGVudC5ibHVyKCkpO1xuXHRcdHNsaWRlckNvbnRlbnQudGFiSW5kZXggPSAwO1xuXHRcdHNsaWRlckNvbnRlbnQuc3R5bGUub3V0bGluZSA9IFwibm9uZVwiO1xuXHRcdHNsaWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2dDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0aWYgKGV2dC5rZXkgPT09IFwiQXJyb3dMZWZ0XCIpIGdvUHJldigpO1xuXHRcdFx0ZWxzZSBpZiAoZXZ0LmtleSA9PT0gXCJBcnJvd1JpZ2h0XCIpIGdvTmV4dCgpO1xuXHRcdH0pO1xuXHRcdHNsaWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIChldnQ6IFdoZWVsRXZlbnQpID0+IHtcblx0XHRcdGlmIChNYXRoLmFicyhldnQuZGVsdGFYKSA+IE1hdGguYWJzKGV2dC5kZWx0YVkpKSB7XG5cdFx0XHRcdGlmIChldnQuZGVsdGFYID4gMzApIHtcblx0XHRcdFx0XHRnb05leHQoKTtcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fSBlbHNlIGlmIChldnQuZGVsdGFYIDwgLTMwKSB7XG5cdFx0XHRcdFx0Z29QcmV2KCk7XG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0XHRsZXQgdG91Y2hTdGFydFggPSAwO1xuXHRcdHNsaWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgKGV2dDogVG91Y2hFdmVudCkgPT4ge1xuXHRcdFx0dG91Y2hTdGFydFggPSBldnQudG91Y2hlc1swXS5jbGllbnRYO1xuXHRcdH0pO1xuXHRcdHNsaWRlckNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIChldnQ6IFRvdWNoRXZlbnQpID0+IHtcblx0XHRcdGNvbnN0IHRvdWNoRW5kWCA9IGV2dC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYO1xuXHRcdFx0Y29uc3QgZGlmZiA9IHRvdWNoU3RhcnRYIC0gdG91Y2hFbmRYO1xuXHRcdFx0aWYgKE1hdGguYWJzKGRpZmYpID4gNTApIGRpZmYgPiAwID8gZ29OZXh0KCkgOiBnb1ByZXYoKTtcblx0XHR9KTtcblxuXHRcdHRocm90dGxlZFVwZGF0ZSgpO1xuXG5cdFx0Ly8gUmVuZGVyIHRodW1ibmFpbHMuXG5cdFx0aWYgKHRodW1ibmFpbENvbnRhaW5lcikge1xuXHRcdFx0dGh1bWJuYWlsQ29udGFpbmVyLmVtcHR5KCk7XG5cdFx0XHRmaWxlcy5mb3JFYWNoKChlbnRyeSwgaW5kZXgpID0+IHtcblx0XHRcdFx0bGV0IFtmaWxlTmFtZV0gPSBlbnRyeS5zcGxpdChcInxcIikubWFwKHMgPT4gcy50cmltKCkpO1xuXHRcdFx0XHRsZXQgdGh1bWJFbDogSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdGlmICgvXFwuKHBuZ3xqcGd8anBlZ3xnaWYpJC9pLnRlc3QoZmlsZU5hbWUpKSB7XG5cdFx0XHRcdFx0dGh1bWJFbCA9IHRodW1ibmFpbENvbnRhaW5lci5jcmVhdGVFbChcImltZ1wiLCB7XG5cdFx0XHRcdFx0XHRhdHRyOiB7IHNyYzogdGhpcy5nZXRNZWRpYVNvdXJjZShmaWxlTmFtZSkgfSxcblx0XHRcdFx0XHRcdGNsczogXCJ0aHVtYm5haWxcIlxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IGV4dCA9IGZpbGVOYW1lLnNwbGl0KCcuJykucG9wKCk/LnRvVXBwZXJDYXNlKCkgfHwgXCJGSUxFXCI7XG5cdFx0XHRcdFx0dGh1bWJFbCA9IHRodW1ibmFpbENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGV4dCB9KTtcblx0XHRcdFx0XHR0aHVtYkVsLmNsYXNzTGlzdC5hZGQoXCJ0aHVtYm5haWwtcGxhY2Vob2xkZXJcIik7XG5cdFx0XHRcdFx0Ly8gdGh1bWJFbC5zdHlsZS53aWR0aCA9IFwiODBweFwiO1xuXHRcdFx0XHRcdC8vIHRodW1iRWwuc3R5bGUuaGVpZ2h0ID0gXCI4MHB4XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHNldHRpbmdzLnRodW1ibmFpbFBvc2l0aW9uID09PSBcImxlZnRcIiB8fCBzZXR0aW5ncy50aHVtYm5haWxQb3NpdGlvbiA9PT0gXCJyaWdodFwiKSB7XG5cdFx0XHRcdFx0dGh1bWJFbC5jbGFzc0xpc3QuYWRkKFwidmVydGljYWwtdGh1bWJcIik7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGh1bWJFbC5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRcdGN1cnJlbnRJbmRleCA9IGluZGV4O1xuXHRcdFx0XHRcdHRocm90dGxlZFVwZGF0ZSgpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR0aHVtYm5haWxFbHMucHVzaCh0aHVtYkVsKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmIChzZXR0aW5ncy5zbGlkZXNob3dTcGVlZCA+IDApIHtcblx0XHRcdHNldEludGVydmFsKGdvTmV4dCwgc2V0dGluZ3Muc2xpZGVzaG93U3BlZWQgKiAxMDAwKTtcblx0XHR9XG5cdH1cbn1cblxuY2xhc3MgTWVkaWFTbGlkZXJTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogTWVkaWFTbGlkZXJQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWVkaWFTbGlkZXJQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIk1lZGlhIFNsaWRlciBQbHVnaW4gU2V0dGluZ3NcIiB9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJFbmFibGUgRHJhd2luZyBBbm5vdGF0aW9uXCIpXG5cdFx0XHQuc2V0RGVzYyhcIlRvZ2dsZSB0byBlbmFibGUgZHJhd2luZyBhbm5vdGF0aW9ucyBvbiB0aGUgc2xpZGVyLiAoRGVmYXVsdDogb2ZmKVwiKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVEcmF3aW5nQW5ub3RhdGlvbilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZURyYXdpbmdBbm5vdGF0aW9uID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVmcmVzaFNsaWRlcnMoKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiRW5hYmxlIFZpc3VhbGl6ZXJcIilcblx0XHRcdC5zZXREZXNjKFwiVG9nZ2xlIHRvIGVuYWJsZSB3YXZlLWxpa2UgdmlzdWFsaXphdGlvbiBmb3IgYXVkaW8vdmlkZW8gcGxheWJhY2suXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVZpc3VhbGl6ZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVWaXN1YWxpemVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVmcmVzaFNsaWRlcnMoKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiVmlzdWFsaXplciBDb2xvclwiKVxuXHRcdFx0LnNldERlc2MoXCJDU1MgY29sb3IgdmFsdWUgZm9yIHRoZSB2aXN1YWxpemVyIHdhdmUuXCIpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnZpc3VhbGl6ZXJDb2xvcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnZpc3VhbGl6ZXJDb2xvciA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZnJlc2hTbGlkZXJzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlZpc3VhbGl6ZXIgSGVpZ2h0XCIpXG5cdFx0XHQuc2V0RGVzYyhcIkhlaWdodCBvZiB0aGUgdmlzdWFsaXplciAoZS5nLiwgJzUwcHgnKS5cIilcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudmlzdWFsaXplckhlaWdodClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnZpc3VhbGl6ZXJIZWlnaHQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoU2xpZGVycygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0fVxufVxuIiwgImV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21wcmVzc0ltYWdlKFxyXG5cdGltYWdlVXJsOiBzdHJpbmcsXHJcblx0bWF4V2lkdGg6IG51bWJlciA9IDgwMCxcclxuXHRtYXhIZWlnaHQ6IG51bWJlciA9IDYwMCxcclxuXHRxdWFsaXR5OiBudW1iZXIgPSAwLjdcclxuKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0Y29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcblx0XHQvLyBUbyBzdXBwb3J0IGltYWdlcyBmcm9tIG90aGVyIGRvbWFpbnMsIHNldCBjcm9zc09yaWdpbi5cclxuXHRcdGltZy5jcm9zc09yaWdpbiA9IFwiQW5vbnltb3VzXCI7XHJcblx0XHRpbWcub25sb2FkID0gKCkgPT4ge1xyXG5cdFx0XHRsZXQgeyB3aWR0aCwgaGVpZ2h0IH0gPSBpbWc7XHJcblx0XHRcdGxldCBuZXdXaWR0aCA9IHdpZHRoO1xyXG5cdFx0XHRsZXQgbmV3SGVpZ2h0ID0gaGVpZ2h0O1xyXG5cclxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHRoZSBzY2FsaW5nIGZhY3Rvci5cclxuXHRcdFx0aWYgKHdpZHRoID4gbWF4V2lkdGggfHwgaGVpZ2h0ID4gbWF4SGVpZ2h0KSB7XHJcblx0XHRcdFx0Y29uc3Qgd2lkdGhSYXRpbyA9IG1heFdpZHRoIC8gd2lkdGg7XHJcblx0XHRcdFx0Y29uc3QgaGVpZ2h0UmF0aW8gPSBtYXhIZWlnaHQgLyBoZWlnaHQ7XHJcblx0XHRcdFx0Y29uc3QgcmF0aW8gPSBNYXRoLm1pbih3aWR0aFJhdGlvLCBoZWlnaHRSYXRpbyk7XHJcblx0XHRcdFx0bmV3V2lkdGggPSB3aWR0aCAqIHJhdGlvO1xyXG5cdFx0XHRcdG5ld0hlaWdodCA9IGhlaWdodCAqIHJhdGlvO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgYSBjYW52YXMgYW5kIGRyYXcgdGhlIHJlc2l6ZWQgaW1hZ2UuXHJcblx0XHRcdGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcblx0XHRcdGNhbnZhcy53aWR0aCA9IG5ld1dpZHRoO1xyXG5cdFx0XHRjYW52YXMuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xyXG5cdFx0XHRjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5cdFx0XHRpZiAoIWN0eCkge1xyXG5cdFx0XHRcdHJlamVjdChcIkNhbnZhcyBjb250ZXh0IG5vdCBhdmFpbGFibGVcIik7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBuZXdXaWR0aCwgbmV3SGVpZ2h0KTtcclxuXHRcdFx0Y29uc3QgZGF0YVVybCA9IGNhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9qcGVnXCIsIHF1YWxpdHkpO1xyXG5cdFx0XHRyZXNvbHZlKGRhdGFVcmwpO1xyXG5cdFx0fTtcclxuXHRcdGltZy5vbmVycm9yID0gKGVycikgPT4gcmVqZWN0KGVycik7XHJcblx0XHRpbWcuc3JjID0gaW1hZ2VVcmw7XHJcblx0fSk7XHJcbn1cclxuIiwgImltcG9ydCB7IFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBOb3Rlc0RhdGEge1xyXG5cdFtrZXk6IHN0cmluZ106IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE5vdGVzTWFuYWdlciB7XHJcblx0cHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcclxuXHRwcml2YXRlIGRhdGE6IE5vdGVzRGF0YSA9IHt9O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3QgbG9hZGVkID0gYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKTtcclxuXHRcdHRoaXMuZGF0YSA9IGxvYWRlZCB8fCB7fTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmUoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLmRhdGEpO1xyXG5cdH1cclxuXHJcblx0Z2V0Tm90ZShrZXk6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gdGhpcy5kYXRhW2tleV0gfHwgXCJcIjtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNldE5vdGUoa2V5OiBzdHJpbmcsIG5vdGU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0dGhpcy5kYXRhW2tleV0gPSBub3RlO1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlKCk7XHJcblx0fVxyXG5cclxuXHQvLyBSZW1vdmVzIG5vdGVzIGZvciB0aGUgc3BlY2lmaWVkIHNsaWRlciB0aGF0IGFyZSBub3QgaW4gdGhlIHZhbGlkRmlsZXMgbGlzdC5cclxuXHRhc3luYyBjbGVhbnVwTm90ZXNGb3JTbGlkZXIoc2xpZGVySWQ6IHN0cmluZywgdmFsaWRGaWxlczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkpIHtcclxuXHRcdFx0aWYgKGtleS5zdGFydHNXaXRoKGAke3NsaWRlcklkfS1gKSkge1xyXG5cdFx0XHRcdC8vIEV4dHJhY3QgdGhlIG1lZGlhIGZpbGUgcG9ydGlvbiBmcm9tIHRoZSBrZXkuXHJcblx0XHRcdFx0Y29uc3QgbWVkaWFGaWxlID0ga2V5LnN1YnN0cmluZyhzbGlkZXJJZC5sZW5ndGggKyAxKTtcclxuXHRcdFx0XHRpZiAoIXZhbGlkRmlsZXMuaW5jbHVkZXMobWVkaWFGaWxlKSkge1xyXG5cdFx0XHRcdFx0ZGVsZXRlIHRoaXMuZGF0YVtrZXldO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0YXdhaXQgdGhpcy5zYXZlKCk7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgdHlwZSBEcmF3aW5nVG9vbCA9IFwiZnJlZWhhbmRcIiB8IFwibGluZVwiIHwgXCJyZWN0YW5nbGVcIiB8IFwiY2lyY2xlXCIgfCBcImVyYXNlclwiIHwgXCJsYXNlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIERyYXdpbmdBbm5vdGF0aW9uIHtcclxuXHRwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG5cdHByaXZhdGUgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblx0cHJpdmF0ZSB0b29sYmFyOiBIVE1MRGl2RWxlbWVudDtcclxuXHRwcml2YXRlIGRyYXdpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRwcml2YXRlIHN0YXJ0WDogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIHN0YXJ0WTogbnVtYmVyID0gMDtcclxuXHQvLyBUaGUgY3VycmVudCB0b29sIChmb3IgZnJlZWhhbmQsIGVyYXNlciwgbGFzZXIpIGFuZCBmb3IgZ2VvbWV0cmljIHRvb2xzLlxyXG5cdHByaXZhdGUgY3VycmVudFRvb2w6IERyYXdpbmdUb29sID0gXCJmcmVlaGFuZFwiO1xyXG5cdHByaXZhdGUgY3VycmVudEdlb21ldHJpY1Rvb2w6IERyYXdpbmdUb29sID0gXCJsaW5lXCI7XHJcblxyXG5cdC8vIFB1YmxpYyBkcmF3aW5nIHNldHRpbmdzLlxyXG5cdHB1YmxpYyBjb2xvcjogc3RyaW5nID0gXCIjRkYwMDAwXCI7IC8vIGRlZmF1bHQgcmVkXHJcblx0cHVibGljIGxpbmVXaWR0aDogbnVtYmVyID0gMjtcclxuXHJcblx0Y29uc3RydWN0b3IoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xyXG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGFuZCBhcHBlbmQgY2FudmFzIG92ZXJsYXkuXHJcblx0XHR0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcblx0XHR0aGlzLmNhbnZhcy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuXHRcdHRoaXMuY2FudmFzLnN0eWxlLnRvcCA9IFwiMFwiO1xyXG5cdFx0dGhpcy5jYW52YXMuc3R5bGUubGVmdCA9IFwiMFwiO1xyXG5cdFx0dGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuXHRcdHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xyXG5cdFx0dGhpcy5jYW52YXMuc3R5bGUuekluZGV4ID0gXCIxMFwiO1xyXG5cdFx0dGhpcy5jYW52YXMuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xyXG5cdFx0dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG5cdFx0dGhpcy5yZXNpemVDYW52YXMoKTtcclxuXHJcblx0XHRjb25zdCBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblx0XHRpZiAoIWN0eCkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGdldCAyRCBjb250ZXh0XCIpO1xyXG5cdFx0dGhpcy5jdHggPSBjdHg7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHRvb2xiYXIgb3ZlcmxheS5cclxuXHRcdHRoaXMudG9vbGJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHQvLyBDZW50ZXIgdGhlIHRvb2xiYXIgYXQgdGhlIHRvcCBvZiB0aGUgY29udGFpbmVyLlxyXG5cdFx0dGhpcy50b29sYmFyLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG5cdFx0dGhpcy50b29sYmFyLnN0eWxlLnRvcCA9IFwiNXB4XCI7XHJcblx0XHR0aGlzLnRvb2xiYXIuc3R5bGUubGVmdCA9IFwiNTAlXCI7XHJcblx0XHR0aGlzLnRvb2xiYXIuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKC01MCUpXCI7XHJcblx0XHQvLyBVc2UgZGFyayBiYWNrZ3JvdW5kIHdpdGggNTAlIG9wYWNpdHkgYW5kIHJvdW5kZWQgY29ybmVycy5cclxuXHRcdHRoaXMudG9vbGJhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYmEoMCwgMCwgMCwgMC41KVwiO1xyXG5cdFx0dGhpcy50b29sYmFyLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XHJcblx0XHR0aGlzLnRvb2xiYXIuc3R5bGUucGFkZGluZyA9IFwiNHB4XCI7XHJcblx0XHR0aGlzLnRvb2xiYXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cdFx0dGhpcy50b29sYmFyLnN0eWxlLmdhcCA9IFwiNHB4XCI7XHJcblx0XHR0aGlzLnRvb2xiYXIuc3R5bGUuekluZGV4ID0gXCIyMFwiO1xyXG4gICAgICAgIHRoaXMudG9vbGJhci5jbGFzc05hbWUgPSBcImRyYXdpbmctdG9vbGJhclwiO1xyXG5cdFx0dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50b29sYmFyKTtcclxuXHRcdHRoaXMuY3JlYXRlVG9vbGJhcigpO1xyXG5cclxuXHRcdC8vIEJpbmQgcG9pbnRlciBldmVudHMuXHJcblx0XHR0aGlzLmVuYWJsZURyYXdpbmcoKTtcclxuXHJcblx0XHQvLyBVcGRhdGUgY2FudmFzIHNpemUgb24gd2luZG93IHJlc2l6ZS5cclxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplQ2FudmFzQm91bmQpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZXNpemVDYW52YXNCb3VuZCA9ICgpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMucmVzaXplQ2FudmFzKCk7XHJcblx0fTtcclxuXHJcblx0cHJpdmF0ZSByZXNpemVDYW52YXMoKTogdm9pZCB7XHJcblx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuY29udGFpbmVyLmNsaWVudFdpZHRoO1xyXG5cdFx0dGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5jb250YWluZXIuY2xpZW50SGVpZ2h0O1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZXNldFRvb2xiYXJIaWdobGlnaHRzKCk6IHZvaWQge1xyXG5cdFx0Ly8gU2V0IGVhY2ggYnV0dG9uJ3MgYmFja2dyb3VuZCB0byB0aGUgZGVmYXVsdCBkYXJrIHN0eWxlLlxyXG5cdFx0QXJyYXkuZnJvbSh0aGlzLnRvb2xiYXIuY2hpbGRyZW4pLmZvckVhY2goY2hpbGQgPT4ge1xyXG5cdFx0XHQoY2hpbGQgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwicmdiYSgwLCAwLCAwLCAwLjUpXCI7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlVG9vbGJhcigpOiB2b2lkIHtcclxuXHRcdC8vIENvbW1vbiBidXR0b24gc3R5bGUuXHJcblx0XHRjb25zdCBidG5TdHlsZSA9IHtcclxuXHRcdFx0Zm9udFNpemU6IFwiMTRweFwiLFxyXG5cdFx0XHRiYWNrZ3JvdW5kOiBcInJnYmEoMCwgMCwgMCwgMC41KVwiLFxyXG5cdFx0XHRjb2xvcjogXCIjZmZmXCIsXHJcblx0XHRcdGJvcmRlcjogXCJub25lXCIsXHJcblx0XHRcdGN1cnNvcjogXCJwb2ludGVyXCIsXHJcblx0XHRcdHBhZGRpbmc6IFwiNHB4XCIsXHJcblx0XHRcdGJvcmRlclJhZGl1czogXCI0cHhcIlxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBIZWxwZXIgdG8gYXBwbHkgc3R5bGVzLlxyXG5cdFx0Y29uc3QgYXBwbHlTdHlsZXMgPSAoZWw6IEhUTUxFbGVtZW50LCBzdHlsZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pOiB2b2lkID0+IHtcclxuXHRcdFx0Zm9yIChjb25zdCBrZXkgaW4gc3R5bGVzKSB7XHJcblx0XHRcdFx0ZWwuc3R5bGVba2V5XSA9IHN0eWxlc1trZXldO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIEZyZWVoYW5kIGJ1dHRvbi5cclxuXHRcdGNvbnN0IGZyZWVoYW5kQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHRcdGZyZWVoYW5kQnRuLnRleHRDb250ZW50ID0gXCJcdTI3MEZcdUZFMEZcIjtcclxuXHRcdGZyZWVoYW5kQnRuLnRpdGxlID0gXCJGcmVlaGFuZFwiO1xyXG5cdFx0YXBwbHlTdHlsZXMoZnJlZWhhbmRCdG4sIGJ0blN0eWxlKTtcclxuXHRcdGZyZWVoYW5kQnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMuY3VycmVudFRvb2wgPSBcImZyZWVoYW5kXCI7XHJcblx0XHRcdHRoaXMucmVzZXRUb29sYmFySGlnaGxpZ2h0cygpO1xyXG5cdFx0XHRmcmVlaGFuZEJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInJnYmEoMCwgMCwgMCwgMC43KVwiO1xyXG5cdFx0fTtcclxuXHRcdHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChmcmVlaGFuZEJ0bik7XHJcblxyXG5cdFx0Ly8gR2VvbWV0cmljIHRvb2xzIGRyb3Bkb3duLlxyXG5cdFx0Y29uc3QgZ2VvbURyb3Bkb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRldGFpbHNcIik7XHJcblx0XHRnZW9tRHJvcGRvd24uc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XHJcblx0XHRnZW9tRHJvcGRvd24uc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XHJcblx0XHRnZW9tRHJvcGRvd24uc3R5bGUuZm9udFNpemUgPSBcIjE0cHhcIjtcclxuXHRcdGdlb21Ecm9wZG93bi5zdHlsZS5iYWNrZ3JvdW5kID0gXCJyZ2JhKDAsIDAsIDAsIDAuNSlcIjtcclxuXHRcdGdlb21Ecm9wZG93bi5zdHlsZS5ib3JkZXIgPSBcIm5vbmVcIjtcclxuXHRcdGdlb21Ecm9wZG93bi5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xyXG5cdFx0Ly8gU3VtbWFyeSBzaG93cyBjdXJyZW50IGdlb21ldHJpYyB0b29sIChkZWZhdWx0IFwibGluZVwiKS5cclxuXHRcdGNvbnN0IGdlb21TdW1tYXJ5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN1bW1hcnlcIik7XHJcblx0XHRnZW9tU3VtbWFyeS50ZXh0Q29udGVudCA9IFwiXHUyNzk2XCI7IC8vIGRlZmF1bHQgZm9yIGxpbmVcclxuXHRcdGdlb21TdW1tYXJ5LnRpdGxlID0gXCJHZW9tZXRyaWMgVG9vbHMgKExpbmUsIFJlY3QsIENpcmNsZSlcIjtcclxuXHRcdGdlb21TdW1tYXJ5LnN0eWxlLmxpc3RTdHlsZSA9IFwibm9uZVwiO1xyXG5cdFx0Z2VvbVN1bW1hcnkuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XHJcblx0XHRnZW9tU3VtbWFyeS5zdHlsZS5iYWNrZ3JvdW5kID0gXCJ0cmFuc3BhcmVudFwiO1xyXG5cdFx0Z2VvbVN1bW1hcnkuc3R5bGUuY29sb3IgPSBcIiNmZmZcIjtcclxuXHRcdGdlb21TdW1tYXJ5LnN0eWxlLm91dGxpbmUgPSBcIm5vbmVcIjtcclxuXHRcdGdlb21Ecm9wZG93bi5hcHBlbmRDaGlsZChnZW9tU3VtbWFyeSk7XHJcblxyXG5cdFx0Ly8gQ29udGFpbmVyIGZvciBkcm9wZG93biBvcHRpb25zLlxyXG5cdFx0Y29uc3QgZ2VvbU9wdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0Z2VvbU9wdGlvbnMuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG5cdFx0Z2VvbU9wdGlvbnMuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XHJcblx0XHRnZW9tT3B0aW9ucy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuXHRcdGdlb21PcHRpb25zLnN0eWxlLnRvcCA9IFwiMTAwJVwiO1xyXG5cdFx0Z2VvbU9wdGlvbnMuc3R5bGUubGVmdCA9IFwiMFwiO1xyXG5cdFx0Z2VvbU9wdGlvbnMuc3R5bGUuYmFja2dyb3VuZCA9IFwicmdiYSgwLCAwLCAwLCAwLjUpXCI7XHJcblx0XHRnZW9tT3B0aW9ucy5zdHlsZS5ib3JkZXIgPSBcIm5vbmVcIjtcclxuXHRcdGdlb21PcHRpb25zLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNHB4XCI7XHJcblx0XHRnZW9tT3B0aW9ucy5zdHlsZS56SW5kZXggPSBcIjMwXCI7XHJcblxyXG5cdFx0Y29uc3QgZ2VvbVRvb2xzOiB7IHRvb2w6IERyYXdpbmdUb29sOyBpY29uOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfVtdID0gW1xyXG5cdFx0XHR7IHRvb2w6IFwibGluZVwiLCBpY29uOiBcIlx1Mjc5NlwiLCBsYWJlbDogXCJMaW5lXCIgfSxcclxuXHRcdFx0eyB0b29sOiBcInJlY3RhbmdsZVwiLCBpY29uOiBcIlx1MjVBRFwiLCBsYWJlbDogXCJSZWN0YW5nbGVcIiB9LFxyXG5cdFx0XHR7IHRvb2w6IFwiY2lyY2xlXCIsIGljb246IFwiXHUyNUVGXCIsIGxhYmVsOiBcIkNpcmNsZVwiIH0sXHJcblx0XHRdO1xyXG5cclxuXHRcdGdlb21Ub29scy5mb3JFYWNoKG9wdCA9PiB7XHJcblx0XHRcdGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcblx0XHRcdGJ0bi50ZXh0Q29udGVudCA9IG9wdC5pY29uO1xyXG5cdFx0XHRidG4udGl0bGUgPSBvcHQubGFiZWw7XHJcblx0XHRcdGFwcGx5U3R5bGVzKGJ0biwgeyBmb250U2l6ZTogXCIxNHB4XCIsIHBhZGRpbmc6IFwiMnB4XCIsIGJvcmRlcjogXCJub25lXCIsIGJhY2tncm91bmQ6IFwidHJhbnNwYXJlbnRcIiwgY29sb3I6IFwiI2ZmZlwiLCBjdXJzb3I6IFwicG9pbnRlclwiIH0pO1xyXG5cdFx0XHRidG4ub25jbGljayA9IChlKSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR0aGlzLmN1cnJlbnRUb29sID0gb3B0LnRvb2w7XHJcblx0XHRcdFx0dGhpcy5jdXJyZW50R2VvbWV0cmljVG9vbCA9IG9wdC50b29sO1xyXG5cdFx0XHRcdGdlb21TdW1tYXJ5LnRleHRDb250ZW50ID0gb3B0Lmljb247XHJcblx0XHRcdFx0Z2VvbURyb3Bkb3duLnJlbW92ZUF0dHJpYnV0ZShcIm9wZW5cIik7XHJcblx0XHRcdH07XHJcblx0XHRcdGdlb21PcHRpb25zLmFwcGVuZENoaWxkKGJ0bik7XHJcblx0XHR9KTtcclxuXHRcdGdlb21Ecm9wZG93bi5hcHBlbmRDaGlsZChnZW9tT3B0aW9ucyk7XHJcblx0XHR0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoZ2VvbURyb3Bkb3duKTtcclxuXHJcblx0XHQvLyBFcmFzZXIgYnV0dG9uLlxyXG5cdFx0Y29uc3QgZXJhc2VyQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHRcdGVyYXNlckJ0bi50ZXh0Q29udGVudCA9IFwiXHVEODNFXHVEREZEXCI7XHJcblx0XHRlcmFzZXJCdG4udGl0bGUgPSBcIkVyYXNlclwiO1xyXG5cdFx0YXBwbHlTdHlsZXMoZXJhc2VyQnRuLCBidG5TdHlsZSk7XHJcblx0XHRlcmFzZXJCdG4ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5jdXJyZW50VG9vbCA9IFwiZXJhc2VyXCI7XHJcblx0XHRcdHRoaXMucmVzZXRUb29sYmFySGlnaGxpZ2h0cygpO1xyXG5cdFx0XHRlcmFzZXJCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZ2JhKDAsIDAsIDAsIDAuNylcIjtcclxuXHRcdH07XHJcblx0XHR0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoZXJhc2VyQnRuKTtcclxuXHJcblx0XHQvLyBMYXNlciBidXR0b24uXHJcblx0XHRjb25zdCBsYXNlckJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcblx0XHRsYXNlckJ0bi50ZXh0Q29udGVudCA9IFwiXHVEODNEXHVERDI2XCI7XHJcblx0XHRsYXNlckJ0bi50aXRsZSA9IFwiTGFzZXIgKHRlbXBvcmFyeSlcIjtcclxuXHRcdGFwcGx5U3R5bGVzKGxhc2VyQnRuLCBidG5TdHlsZSk7XHJcblx0XHRsYXNlckJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmN1cnJlbnRUb29sID0gXCJsYXNlclwiO1xyXG5cdFx0XHR0aGlzLnJlc2V0VG9vbGJhckhpZ2hsaWdodHMoKTtcclxuXHRcdFx0bGFzZXJCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJyZ2JhKDAsIDAsIDAsIDAuNylcIjtcclxuXHRcdH07XHJcblx0XHR0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQobGFzZXJCdG4pO1xyXG5cclxuXHRcdC8vIENvbG9yIHBpY2tlci5cclxuXHRcdGNvbnN0IGNvbG9ySW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcblx0XHRjb2xvcklucHV0LnR5cGUgPSBcImNvbG9yXCI7XHJcblx0XHRjb2xvcklucHV0LnZhbHVlID0gdGhpcy5jb2xvcjtcclxuXHRcdGFwcGx5U3R5bGVzKGNvbG9ySW5wdXQsIHsgd2lkdGg6IFwiMzBweFwiLCBoZWlnaHQ6IFwiMzBweFwiLCBib3JkZXI6IFwibm9uZVwiLCBjdXJzb3I6IFwicG9pbnRlclwiIH0pO1xyXG5cdFx0Y29sb3JJbnB1dC5vbmNoYW5nZSA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5jb2xvciA9IGNvbG9ySW5wdXQudmFsdWU7XHJcblx0XHR9O1xyXG5cdFx0dGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGNvbG9ySW5wdXQpO1xyXG5cclxuXHRcdC8vIExpbmUgd2lkdGggaW5wdXQuXHJcblx0XHRjb25zdCB3aWR0aElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG5cdFx0d2lkdGhJbnB1dC50eXBlID0gXCJudW1iZXJcIjtcclxuXHRcdHdpZHRoSW5wdXQubWluID0gXCIxXCI7XHJcblx0XHR3aWR0aElucHV0Lm1heCA9IFwiMTBcIjtcclxuXHRcdHdpZHRoSW5wdXQudmFsdWUgPSB0aGlzLmxpbmVXaWR0aC50b1N0cmluZygpO1xyXG5cdFx0YXBwbHlTdHlsZXMod2lkdGhJbnB1dCwgeyB3aWR0aDogXCI0MHB4XCIsIGJvcmRlcjogXCJub25lXCIsIGJhY2tncm91bmQ6IFwicmdiYSgwLDAsMCwwLjUpXCIsIGNvbG9yOiBcIiNmZmZcIiwgdGV4dEFsaWduOiBcImNlbnRlclwiIH0pO1xyXG5cdFx0d2lkdGhJbnB1dC5vbmNoYW5nZSA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5saW5lV2lkdGggPSBOdW1iZXIod2lkdGhJbnB1dC52YWx1ZSk7XHJcblx0XHR9O1xyXG5cdFx0dGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHdpZHRoSW5wdXQpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBoYW5kbGVQb2ludGVyRG93biA9IChlOiBQb2ludGVyRXZlbnQpOiB2b2lkID0+IHtcclxuXHRcdHRoaXMuZHJhd2luZyA9IHRydWU7XHJcblx0XHR0aGlzLnN0YXJ0WCA9IGUub2Zmc2V0WDtcclxuXHRcdHRoaXMuc3RhcnRZID0gZS5vZmZzZXRZO1xyXG5cdFx0Ly8gRm9yIGZyZWVoYW5kLCBlcmFzZXIsIGFuZCBsYXNlciwgYmVnaW4gYSBwYXRoIGltbWVkaWF0ZWx5LlxyXG5cdFx0aWYgKHRoaXMuY3VycmVudFRvb2wgPT09IFwiZnJlZWhhbmRcIiB8fCB0aGlzLmN1cnJlbnRUb29sID09PSBcImVyYXNlclwiIHx8IHRoaXMuY3VycmVudFRvb2wgPT09IFwibGFzZXJcIikge1xyXG5cdFx0XHR0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuXHRcdFx0dGhpcy5jdHgubW92ZVRvKHRoaXMuc3RhcnRYLCB0aGlzLnN0YXJ0WSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0cHJpdmF0ZSBoYW5kbGVQb2ludGVyTW92ZSA9IChlOiBQb2ludGVyRXZlbnQpOiB2b2lkID0+IHtcclxuXHRcdGlmICghdGhpcy5kcmF3aW5nKSByZXR1cm47XHJcblx0XHRjb25zdCBjdXJyZW50WCA9IGUub2Zmc2V0WDtcclxuXHRcdGNvbnN0IGN1cnJlbnRZID0gZS5vZmZzZXRZO1xyXG5cdFx0aWYgKHRoaXMuY3VycmVudFRvb2wgPT09IFwiZnJlZWhhbmRcIikge1xyXG5cdFx0XHR0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XHJcblx0XHRcdHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lVG8oY3VycmVudFgsIGN1cnJlbnRZKTtcclxuXHRcdFx0dGhpcy5jdHguc3Ryb2tlKCk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudFRvb2wgPT09IFwibGFzZXJcIikge1xyXG5cdFx0XHR0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY29sb3I7XHJcblx0XHRcdHRoaXMuY3R4LmxpbmVXaWR0aCA9IDE7XHJcblx0XHRcdHRoaXMuY3R4LmxpbmVDYXAgPSBcInJvdW5kXCI7XHJcblx0XHRcdHRoaXMuY3R4LnNoYWRvd0NvbG9yID0gdGhpcy5jb2xvcjtcclxuXHRcdFx0dGhpcy5jdHguc2hhZG93Qmx1ciA9IDEwO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lVG8oY3VycmVudFgsIGN1cnJlbnRZKTtcclxuXHRcdFx0dGhpcy5jdHguc3Ryb2tlKCk7XHJcblx0XHRcdHRoaXMuY3R4LnNoYWRvd0JsdXIgPSAwO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRUb29sID09PSBcImVyYXNlclwiKSB7XHJcblx0XHRcdHRoaXMuY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IFwiZGVzdGluYXRpb24tb3V0XCI7XHJcblx0XHRcdHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoICogNTtcclxuXHRcdFx0dGhpcy5jdHgubGluZVRvKGN1cnJlbnRYLCBjdXJyZW50WSk7XHJcblx0XHRcdHRoaXMuY3R4LnN0cm9rZSgpO1xyXG5cdFx0XHR0aGlzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1vdmVyXCI7XHJcblx0XHR9XHJcblx0XHQvLyBGb3IgZ2VvbWV0cmljIHRvb2xzLCBkcmF3aW5nIGlzIGRlZmVycmVkIHVudGlsIHBvaW50ZXIgdXAuXHJcblx0fTtcclxuXHJcblx0cHJpdmF0ZSBoYW5kbGVQb2ludGVyVXAgPSAoZTogUG9pbnRlckV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHRpZiAoIXRoaXMuZHJhd2luZykgcmV0dXJuO1xyXG5cdFx0dGhpcy5kcmF3aW5nID0gZmFsc2U7XHJcblx0XHRjb25zdCBlbmRYID0gZS5vZmZzZXRYO1xyXG5cdFx0Y29uc3QgZW5kWSA9IGUub2Zmc2V0WTtcclxuXHRcdHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5jdXJyZW50VG9vbCA9PT0gXCJlcmFzZXJcIiA/IFwicmdiYSgwLDAsMCwxKVwiIDogdGhpcy5jb2xvcjtcclxuXHRcdHRoaXMuY3R4LmxpbmVXaWR0aCA9IHRoaXMubGluZVdpZHRoO1xyXG5cdFx0dGhpcy5jdHgubGluZUNhcCA9IFwicm91bmRcIjtcclxuXHJcblx0XHRpZiAodGhpcy5jdXJyZW50VG9vbCA9PT0gXCJsaW5lXCIpIHtcclxuXHRcdFx0dGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcblx0XHRcdHRoaXMuY3R4Lm1vdmVUbyh0aGlzLnN0YXJ0WCwgdGhpcy5zdGFydFkpO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lVG8oZW5kWCwgZW5kWSk7XHJcblx0XHRcdHRoaXMuY3R4LnN0cm9rZSgpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRUb29sID09PSBcInJlY3RhbmdsZVwiKSB7XHJcblx0XHRcdGNvbnN0IHJlY3RXaWR0aCA9IGVuZFggLSB0aGlzLnN0YXJ0WDtcclxuXHRcdFx0Y29uc3QgcmVjdEhlaWdodCA9IGVuZFkgLSB0aGlzLnN0YXJ0WTtcclxuXHRcdFx0dGhpcy5jdHguc3Ryb2tlUmVjdCh0aGlzLnN0YXJ0WCwgdGhpcy5zdGFydFksIHJlY3RXaWR0aCwgcmVjdEhlaWdodCk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudFRvb2wgPT09IFwiY2lyY2xlXCIpIHtcclxuXHRcdFx0Y29uc3QgcmFkaXVzID0gTWF0aC5zcXJ0KE1hdGgucG93KGVuZFggLSB0aGlzLnN0YXJ0WCwgMikgKyBNYXRoLnBvdyhlbmRZIC0gdGhpcy5zdGFydFksIDIpKTtcclxuXHRcdFx0dGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcblx0XHRcdHRoaXMuY3R4LmFyYyh0aGlzLnN0YXJ0WCwgdGhpcy5zdGFydFksIHJhZGl1cywgMCwgTWF0aC5QSSAqIDIpO1xyXG5cdFx0XHR0aGlzLmN0eC5zdHJva2UoKTtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50VG9vbCA9PT0gXCJsYXNlclwiKSB7XHJcblx0XHRcdC8vIEZvciBsYXNlciwgY2xlYXIgdGhlIGRyYXduIGxpbmUgYWZ0ZXIgYSBicmllZiBkZWxheS5cclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5jbGVhcigpO1xyXG5cdFx0XHR9LCAyMDApO1xyXG5cdFx0fVxyXG5cdFx0Ly8gRm9yIGZyZWVoYW5kIGFuZCBlcmFzZXIsIG5vdGhpbmcgZXh0cmEgaXMgbmVlZGVkLlxyXG5cdH07XHJcblxyXG5cdHB1YmxpYyBlbmFibGVEcmF3aW5nKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMuaGFuZGxlUG9pbnRlckRvd24pO1xyXG5cdFx0dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIHRoaXMuaGFuZGxlUG9pbnRlck1vdmUpO1xyXG5cdFx0dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCB0aGlzLmhhbmRsZVBvaW50ZXJVcCk7XHJcblx0XHR0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm91dFwiLCB0aGlzLmhhbmRsZVBvaW50ZXJVcCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZGlzYWJsZURyYXdpbmcoKTogdm9pZCB7XHJcblx0XHR0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgdGhpcy5oYW5kbGVQb2ludGVyRG93bik7XHJcblx0XHR0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5oYW5kbGVQb2ludGVyTW92ZSk7XHJcblx0XHR0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMuaGFuZGxlUG9pbnRlclVwKTtcclxuXHRcdHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyb3V0XCIsIHRoaXMuaGFuZGxlUG9pbnRlclVwKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBnZXRBbm5vdGF0aW9uKCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gdGhpcy5jYW52YXMudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLnJlc2l6ZUNhbnZhc0JvdW5kKTtcclxuXHRcdHRoaXMuZGlzYWJsZURyYXdpbmcoKTtcclxuXHRcdGlmICh0aGlzLnRvb2xiYXIucGFyZW50Tm9kZSkgdGhpcy50b29sYmFyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy50b29sYmFyKTtcclxuXHRcdGlmICh0aGlzLmNhbnZhcy5wYXJlbnROb2RlKSB0aGlzLmNhbnZhcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuY2FudmFzKTtcclxuXHR9XHJcbn1cclxuIiwgImV4cG9ydCBpbnRlcmZhY2UgVmlzdWFsaXplck9wdGlvbnMge1xyXG5cdC8qKiBIZWlnaHQgb2YgdGhlIHZpc3VhbGl6ZXIgY2FudmFzIChlLmcuLCBcIjgwcHhcIikgKi9cclxuXHRoZWlnaHQ/OiBzdHJpbmc7XHJcblx0LyoqIFNlbGVjdCB0aGUgZ3JhZGllbnQgdHlwZTogXCJibHVlLXJlZFwiLCBcInJhaW5ib3dcIiwgb3IgXCJjdXN0b21cIiAqL1xyXG5cdGdyYWRpZW50VHlwZT86IFwiYmx1ZS1yZWRcIiB8IFwicmFpbmJvd1wiIHwgXCJjdXN0b21cIjtcclxuXHQvKiogSWYgdXNpbmcgYSBjdXN0b20gZ3JhZGllbnQsIHN1cHBseSBhbiBhcnJheSBvZiBDU1MgY29sb3Igc3RyaW5ncyAqL1xyXG5cdGN1c3RvbUNvbG9ycz86IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVmlzdWFsaXplciB7XHJcblx0cHJpdmF0ZSBtZWRpYUVsZW1lbnQ6IEhUTUxNZWRpYUVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgb3B0aW9uczogVmlzdWFsaXplck9wdGlvbnM7XHJcblx0cHJpdmF0ZSBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG5cdHByaXZhdGUgY2FudmFzQ3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcblx0cHJpdmF0ZSBhdWRpb0NvbnRleHQ6IEF1ZGlvQ29udGV4dDtcclxuXHRwcml2YXRlIGFuYWx5c2VyOiBBbmFseXNlck5vZGU7XHJcblx0cHJpdmF0ZSBzb3VyY2U6IE1lZGlhRWxlbWVudEF1ZGlvU291cmNlTm9kZTtcclxuXHRwcml2YXRlIGFuaW1hdGlvbkZyYW1lSWQ6IG51bWJlcjtcclxuXHJcblx0Y29uc3RydWN0b3IobWVkaWFFbGVtZW50OiBIVE1MTWVkaWFFbGVtZW50LCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBWaXN1YWxpemVyT3B0aW9ucyA9IHt9KSB7XHJcblx0XHR0aGlzLm1lZGlhRWxlbWVudCA9IG1lZGlhRWxlbWVudDtcclxuXHRcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG5cdFx0Ly8gRGVmYXVsdCBvcHRpb25zOiBpbmNyZWFzZWQgaGVpZ2h0LCByYWluYm93IGdyYWRpZW50LlxyXG5cdFx0dGhpcy5vcHRpb25zID0ge1xyXG5cdFx0XHRoZWlnaHQ6IG9wdGlvbnMuaGVpZ2h0ID8/IFwiMTAwcHhcIixcclxuXHRcdFx0Z3JhZGllbnRUeXBlOiBvcHRpb25zLmdyYWRpZW50VHlwZSA/PyBcImJsdWUtcmVkXCIsXHJcblx0XHRcdGN1c3RvbUNvbG9yczogb3B0aW9ucy5jdXN0b21Db2xvcnNcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGEgY2FudmFzIG92ZXJsYXkuXHJcblx0XHR0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcblx0XHR0aGlzLmNhbnZhcy5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcclxuXHRcdHRoaXMuY2FudmFzLnN0eWxlLmJvdHRvbSA9IFwiMFwiO1xyXG5cdFx0dGhpcy5jYW52YXMuc3R5bGUubGVmdCA9IFwiMFwiO1xyXG5cdFx0dGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcclxuXHRcdHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IHRoaXMub3B0aW9ucy5oZWlnaHQgPz8gXCI4MHB4XCI7XHJcblx0XHR0aGlzLmNhbnZhcy5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XHJcblx0XHR0aGlzLmNhbnZhcy5zdHlsZS56SW5kZXggPSBcIjEwMFwiO1xyXG5cdFx0Ly8gU2V0IGV4cGxpY2l0IGRpbWVuc2lvbnMuXHJcblx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcclxuXHRcdHRoaXMuY2FudmFzLmhlaWdodCA9IHBhcnNlSW50KHRoaXMub3B0aW9ucy5oZWlnaHQgPz8gXCI4MFwiLCAxMCk7XHJcblx0XHR0aGlzLmNhbnZhc0N0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSE7XHJcblx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG5cclxuXHRcdC8vIFNldCB1cCB0aGUgYXVkaW8gY29udGV4dCBhbmQgYW5hbHlzZXIuXHJcblx0XHR0aGlzLmF1ZGlvQ29udGV4dCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCAod2luZG93IGFzIGFueSkud2Via2l0QXVkaW9Db250ZXh0KSgpO1xyXG5cdFx0dGhpcy5zb3VyY2UgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UodGhpcy5tZWRpYUVsZW1lbnQpO1xyXG5cdFx0dGhpcy5hbmFseXNlciA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7XHJcblx0XHQvLyBJbmNyZWFzZSByZXNvbHV0aW9uIGFuZCByZXNwb25zaXZlbmVzcy5cclxuXHRcdHRoaXMuYW5hbHlzZXIuZmZ0U2l6ZSA9IDUxMjtcclxuXHRcdHRoaXMuYW5hbHlzZXIuc21vb3RoaW5nVGltZUNvbnN0YW50ID0gMC4wNTtcclxuXHRcdHRoaXMuYW5hbHlzZXIubWluRGVjaWJlbHMgPSAtMTAwO1xyXG5cdFx0dGhpcy5hbmFseXNlci5tYXhEZWNpYmVscyA9IC0zMDtcclxuXHRcdHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5hbmFseXNlcik7XHJcblx0XHR0aGlzLmFuYWx5c2VyLmNvbm5lY3QodGhpcy5hdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xyXG5cclxuXHRcdHRoaXMuYW5pbWF0aW9uRnJhbWVJZCA9IDA7XHJcblx0XHR0aGlzLmRyYXcoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZHJhdygpIHtcclxuXHRcdGNvbnN0IGJ1ZmZlckxlbmd0aCA9IHRoaXMuYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQ7XHJcblx0XHRjb25zdCBkYXRhQXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXJMZW5ndGgpO1xyXG5cdFx0Ly8gTWlycm9yIHRoZSBsZWZ0IGFuZCByaWdodCBoYWx2ZXMgZm9yIHN5bW1ldHJ5LlxyXG5cdFx0Y29uc3QgaGFsZkJpbnMgPSBNYXRoLmZsb29yKGJ1ZmZlckxlbmd0aCAvIDIpO1xyXG5cdFx0Y29uc3QgZ2FwID0gMjsgLy8gR2FwIGJldHdlZW4gYmFycy5cclxuXHRcdGNvbnN0IGNhbnZhc1dpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XHJcblx0XHRjb25zdCBjYW52YXNIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcblx0XHRjb25zdCBtaWRYID0gY2FudmFzV2lkdGggLyAyO1xyXG5cdFx0Ly8gU2V0IGJhc2VsaW5lIGF0IHZlcnRpY2FsIGNlbnRlci5cclxuXHRcdGNvbnN0IGJhc2VsaW5lID0gY2FudmFzSGVpZ2h0IC8gMjtcclxuXHRcdC8vIENhbGN1bGF0ZSB0aGUgd2lkdGggYXZhaWxhYmxlIG9uIG9uZSBzaWRlLlxyXG5cdFx0Y29uc3Qgc2xvdFdpZHRoID0gbWlkWCAvIGhhbGZCaW5zO1xyXG5cdFx0Ly8gVXNlIDYwJSBvZiB0aGUgc2xvdCB3aWR0aCBmb3IgYSB0aGluIGJhci5cclxuXHRcdGNvbnN0IGJhcldpZHRoID0gc2xvdFdpZHRoICogMC42O1xyXG5cdFx0XHJcblx0XHRjb25zdCBkcmF3QmFycyA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5hbmFseXNlci5nZXRCeXRlRnJlcXVlbmN5RGF0YShkYXRhQXJyYXkpO1xyXG5cdFx0XHR0aGlzLmNhbnZhc0N0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcblx0XHRcdFxyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGhhbGZCaW5zOyBpKyspIHtcclxuXHRcdFx0XHQvLyBHZXQgbm9ybWFsaXplZCBpbnRlbnNpdHkgYW5kIGFjY2VudHVhdGUgZGlmZmVyZW5jZXMuXHJcblx0XHRcdFx0Y29uc3QgcmF3SW50ZW5zaXR5ID0gZGF0YUFycmF5W2ldIC8gMjU1O1xyXG5cdFx0XHRcdGNvbnN0IGludGVuc2l0eSA9IE1hdGgucG93KHJhd0ludGVuc2l0eSwgMik7XHJcblx0XHRcdFx0Ly8gQmFyIGhlaWdodDogbWF4aW11bSBoZWlnaHQgaXMgdGhlIGRpc3RhbmNlIGZyb20gYmFzZWxpbmUgdG8gdG9wLlxyXG5cdFx0XHRcdGNvbnN0IGJhckhlaWdodCA9IGludGVuc2l0eSAqIGJhc2VsaW5lO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEJ1aWxkIGEgZ3JhZGllbnQgZnJvbSB0aGUgYmFzZWxpbmUgdXB3YXJkLlxyXG5cdFx0XHRcdGxldCBncmFkaWVudDogQ2FudmFzR3JhZGllbnQ7XHJcblx0XHRcdFx0aWYgKHRoaXMub3B0aW9ucy5ncmFkaWVudFR5cGUgPT09IFwiYmx1ZS1yZWRcIikge1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQgPSB0aGlzLmNhbnZhc0N0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCBiYXNlbGluZSwgMCwgYmFzZWxpbmUgLSBiYXJIZWlnaHQpO1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIFwiaHNsKDI0MCw4MCUsNDAlKVwiKTtcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCBcImhzbCgwLDkwJSw1MCUpXCIpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyYWRpZW50VHlwZSA9PT0gXCJyYWluYm93XCIpIHtcclxuXHRcdFx0XHRcdGdyYWRpZW50ID0gdGhpcy5jYW52YXNDdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgYmFzZWxpbmUsIDAsIGJhc2VsaW5lIC0gYmFySGVpZ2h0KTtcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBcImhzbCgyNDAsMTAwJSw1MCUpXCIpOyAgLy8gYmx1ZVxyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuMjUsIFwiaHNsKDE4MCwxMDAlLDUwJSlcIik7IC8vIGN5YW5cclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjUsIFwiaHNsKDEyMCwxMDAlLDUwJSlcIik7ICAvLyBncmVlblxyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNzUsIFwiaHNsKDYwLDEwMCUsNTAlKVwiKTsgIC8vIHllbGxvd1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwiaHNsKDAsMTAwJSw1MCUpXCIpOyAgICAgIC8vIHJlZFxyXG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyYWRpZW50VHlwZSA9PT0gXCJjdXN0b21cIiAmJiB0aGlzLm9wdGlvbnMuY3VzdG9tQ29sb3JzICYmIHRoaXMub3B0aW9ucy5jdXN0b21Db2xvcnMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQgPSB0aGlzLmNhbnZhc0N0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCBiYXNlbGluZSwgMCwgYmFzZWxpbmUgLSBiYXJIZWlnaHQpO1xyXG5cdFx0XHRcdFx0Y29uc3QgbiA9IHRoaXMub3B0aW9ucy5jdXN0b21Db2xvcnMubGVuZ3RoO1xyXG5cdFx0XHRcdFx0Zm9yIChsZXQgaiA9IDA7IGogPCBuOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKGogLyAobiAtIDEpLCB0aGlzLm9wdGlvbnMuY3VzdG9tQ29sb3JzW2pdKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gcmFpbmJvdy5cclxuXHRcdFx0XHRcdGdyYWRpZW50ID0gdGhpcy5jYW52YXNDdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgYmFzZWxpbmUsIDAsIGJhc2VsaW5lIC0gYmFySGVpZ2h0KTtcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBcImhzbCgyNDAsMTAwJSw1MCUpXCIpO1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuMjUsIFwiaHNsKDE4MCwxMDAlLDUwJSlcIik7XHJcblx0XHRcdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoMC41LCBcImhzbCgxMjAsMTAwJSw1MCUpXCIpO1xyXG5cdFx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNzUsIFwiaHNsKDYwLDEwMCUsNTAlKVwiKTtcclxuXHRcdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCBcImhzbCgwLDEwMCUsNTAlKVwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRGV0ZXJtaW5lIHggcG9zaXRpb25zIGZvciBzeW1tZXRyaWMgYmFycy5cclxuXHRcdFx0XHRjb25zdCB4UmlnaHQgPSBtaWRYICsgaSAqIChiYXJXaWR0aCArIGdhcCk7XHJcblx0XHRcdFx0Y29uc3QgeExlZnQgPSBtaWRYIC0gKGkgKyAxKSAqIChiYXJXaWR0aCArIGdhcCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRHJhdyBiYXJzIHJpc2luZyB1cHdhcmQgZnJvbSB0aGUgYmFzZWxpbmUuXHJcblx0XHRcdFx0dGhpcy5jYW52YXNDdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7XHJcblx0XHRcdFx0dGhpcy5jYW52YXNDdHguZmlsbFJlY3QoeFJpZ2h0LCBiYXNlbGluZSAtIGJhckhlaWdodCwgYmFyV2lkdGgsIGJhckhlaWdodCk7XHJcblx0XHRcdFx0dGhpcy5jYW52YXNDdHguZmlsbFJlY3QoeExlZnQsIGJhc2VsaW5lIC0gYmFySGVpZ2h0LCBiYXJXaWR0aCwgYmFySGVpZ2h0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmFuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0JhcnMpO1xyXG5cdFx0fTtcclxuXHRcdGRyYXdCYXJzKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZGVzdHJveSgpIHtcclxuXHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRnJhbWVJZCk7XHJcblx0XHR0aGlzLmNhbnZhcy5yZW1vdmUoKTtcclxuXHRcdHRoaXMuc291cmNlLmRpc2Nvbm5lY3QoKTtcclxuXHRcdHRoaXMuYW5hbHlzZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0aWYgKHRoaXMuYXVkaW9Db250ZXh0LnN0YXRlICE9PSBcImNsb3NlZFwiKSB7XHJcblx0XHRcdHRoaXMuYXVkaW9Db250ZXh0LmNsb3NlKCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBNEg7OztBQ0E1SCxlQUFzQixjQUNyQixVQUNBLFdBQW1CLEtBQ25CLFlBQW9CLEtBQ3BCLFVBQWtCLEtBQ0E7QUFDbEIsU0FBTyxJQUFJLFFBQVEsQ0FBQyxTQUFTLFdBQVc7QUFDdkMsVUFBTSxNQUFNLElBQUksTUFBTTtBQUV0QixRQUFJLGNBQWM7QUFDbEIsUUFBSSxTQUFTLE1BQU07QUFDbEIsVUFBSSxFQUFFLE9BQU8sT0FBTyxJQUFJO0FBQ3hCLFVBQUksV0FBVztBQUNmLFVBQUksWUFBWTtBQUdoQixVQUFJLFFBQVEsWUFBWSxTQUFTLFdBQVc7QUFDM0MsY0FBTSxhQUFhLFdBQVc7QUFDOUIsY0FBTSxjQUFjLFlBQVk7QUFDaEMsY0FBTSxRQUFRLEtBQUssSUFBSSxZQUFZLFdBQVc7QUFDOUMsbUJBQVcsUUFBUTtBQUNuQixvQkFBWSxTQUFTO0FBQUEsTUFDdEI7QUFHQSxZQUFNLFNBQVMsU0FBUyxjQUFjLFFBQVE7QUFDOUMsYUFBTyxRQUFRO0FBQ2YsYUFBTyxTQUFTO0FBQ2hCLFlBQU0sTUFBTSxPQUFPLFdBQVcsSUFBSTtBQUNsQyxVQUFJ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
