/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MediaSliderPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// src/compression.ts
async function compressImage(imageUrl, maxWidth = 800, maxHeight = 600, quality = 0.7) {
  return new Promise((resolve, reject) => {
    const img = new Image();
    img.crossOrigin = "Anonymous";
    img.onload = () => {
      let { width, height } = img;
      let newWidth = width;
      let newHeight = height;
      if (width > maxWidth || height > maxHeight) {
        const widthRatio = maxWidth / width;
        const heightRatio = maxHeight / height;
        const ratio = Math.min(widthRatio, heightRatio);
        newWidth = width * ratio;
        newHeight = height * ratio;
      }
      const canvas = document.createElement("canvas");
      canvas.width = newWidth;
      canvas.height = newHeight;
      const ctx = canvas.getContext("2d");
      if (!ctx) {
        reject("Canvas context not available");
        return;
      }
      ctx.drawImage(img, 0, 0, newWidth, newHeight);
      const dataUrl = canvas.toDataURL("image/jpeg", quality);
      resolve(dataUrl);
    };
    img.onerror = (err) => reject(err);
    img.src = imageUrl;
  });
}

// src/notes.ts
var NotesManager = class {
  constructor(plugin) {
    this.data = {};
    this.plugin = plugin;
  }
  async load() {
    const loaded = await this.plugin.loadData();
    this.data = loaded || {};
  }
  async save() {
    await this.plugin.saveData(this.data);
  }
  getNote(key) {
    return this.data[key] || "";
  }
  async setNote(key, note) {
    this.data[key] = note;
    await this.save();
  }
  // Removes notes for the specified slider that are not in the validFiles list.
  async cleanupNotesForSlider(sliderId, validFiles) {
    for (const key of Object.keys(this.data)) {
      if (key.startsWith(`${sliderId}-`)) {
        const mediaFile = key.substring(sliderId.length + 1);
        if (!validFiles.includes(mediaFile)) {
          delete this.data[key];
        }
      }
    }
    await this.save();
  }
};

// src/drawing.ts
var DrawingAnnotation = class {
  constructor(container) {
    this.drawing = false;
    this.startX = 0;
    this.startY = 0;
    // The current tool (for freehand, eraser, laser) and for geometric tools.
    this.currentTool = "freehand";
    this.currentGeometricTool = "line";
    // Public drawing settings.
    this.color = "#FF0000";
    // default red
    this.lineWidth = 2;
    this.resizeCanvasBound = () => {
      this.resizeCanvas();
    };
    this.handlePointerDown = (e) => {
      this.drawing = true;
      this.startX = e.offsetX;
      this.startY = e.offsetY;
      if (this.currentTool === "freehand" || this.currentTool === "eraser" || this.currentTool === "laser") {
        this.ctx.beginPath();
        this.ctx.moveTo(this.startX, this.startY);
      }
    };
    this.handlePointerMove = (e) => {
      if (!this.drawing)
        return;
      const currentX = e.offsetX;
      const currentY = e.offsetY;
      if (this.currentTool === "freehand") {
        this.ctx.strokeStyle = this.color;
        this.ctx.lineWidth = this.lineWidth;
        this.ctx.lineCap = "round";
        this.ctx.lineTo(currentX, currentY);
        this.ctx.stroke();
      } else if (this.currentTool === "laser") {
        this.ctx.strokeStyle = this.color;
        this.ctx.lineWidth = 1;
        this.ctx.lineCap = "round";
        this.ctx.shadowColor = this.color;
        this.ctx.shadowBlur = 10;
        this.ctx.lineTo(currentX, currentY);
        this.ctx.stroke();
        this.ctx.shadowBlur = 0;
      } else if (this.currentTool === "eraser") {
        this.ctx.globalCompositeOperation = "destination-out";
        this.ctx.lineWidth = this.lineWidth * 5;
        this.ctx.lineTo(currentX, currentY);
        this.ctx.stroke();
        this.ctx.globalCompositeOperation = "source-over";
      }
    };
    this.handlePointerUp = (e) => {
      if (!this.drawing)
        return;
      this.drawing = false;
      const endX = e.offsetX;
      const endY = e.offsetY;
      this.ctx.strokeStyle = this.currentTool === "eraser" ? "rgba(0,0,0,1)" : this.color;
      this.ctx.lineWidth = this.lineWidth;
      this.ctx.lineCap = "round";
      if (this.currentTool === "line") {
        this.ctx.beginPath();
        this.ctx.moveTo(this.startX, this.startY);
        this.ctx.lineTo(endX, endY);
        this.ctx.stroke();
      } else if (this.currentTool === "rectangle") {
        const rectWidth = endX - this.startX;
        const rectHeight = endY - this.startY;
        this.ctx.strokeRect(this.startX, this.startY, rectWidth, rectHeight);
      } else if (this.currentTool === "circle") {
        const radius = Math.sqrt(Math.pow(endX - this.startX, 2) + Math.pow(endY - this.startY, 2));
        this.ctx.beginPath();
        this.ctx.arc(this.startX, this.startY, radius, 0, Math.PI * 2);
        this.ctx.stroke();
      } else if (this.currentTool === "laser") {
        setTimeout(() => {
          this.clear();
        }, 200);
      }
    };
    this.container = container;
    this.canvas = document.createElement("canvas");
    this.canvas.classList.add("drawing-canvas");
    this.container.appendChild(this.canvas);
    this.resizeCanvas();
    const ctx = this.canvas.getContext("2d");
    if (!ctx)
      throw new Error("Cannot get 2D context");
    this.ctx = ctx;
    this.toolbar = document.createElement("div");
    this.toolbar.classList.add("drawing-toolbar");
    this.container.appendChild(this.toolbar);
    this.createToolbar();
    this.enableDrawing();
    window.addEventListener("resize", this.resizeCanvasBound);
  }
  resizeCanvas() {
    this.canvas.width = this.container.clientWidth;
    this.canvas.height = this.container.clientHeight;
  }
  resetToolbarHighlights() {
    Array.from(this.toolbar.children).forEach((child) => {
      child.classList.remove("active-tool");
    });
  }
  createToolbar() {
    const freehandBtn = document.createElement("button");
    freehandBtn.textContent = "\u270F\uFE0F";
    freehandBtn.title = "Freehand";
    freehandBtn.classList.add("drawing-btn", "freehand-btn");
    freehandBtn.onclick = () => {
      this.currentTool = "freehand";
      this.resetToolbarHighlights();
      freehandBtn.classList.add("active-tool");
    };
    this.toolbar.appendChild(freehandBtn);
    const geomDropdown = document.createElement("details");
    geomDropdown.classList.add("drawing-dropdown");
    const geomSummary = document.createElement("summary");
    geomSummary.textContent = "\u2796";
    geomSummary.title = "Geometric Tools (Line, Rect, Circle)";
    geomSummary.classList.add("drawing-dropdown-summary");
    geomDropdown.appendChild(geomSummary);
    const geomOptions = document.createElement("div");
    geomOptions.classList.add("drawing-dropdown-options");
    const geomTools = [
      { tool: "line", icon: "\u2796", label: "Line" },
      { tool: "rectangle", icon: "\u25AD", label: "Rectangle" },
      { tool: "circle", icon: "\u25EF", label: "Circle" }
    ];
    geomTools.forEach((opt) => {
      const btn = document.createElement("button");
      btn.textContent = opt.icon;
      btn.title = opt.label;
      btn.classList.add("drawing-btn", "geom-tool-btn");
      btn.onclick = (e) => {
        e.stopPropagation();
        this.currentTool = opt.tool;
        this.currentGeometricTool = opt.tool;
        geomSummary.textContent = opt.icon;
        geomDropdown.removeAttribute("open");
      };
      geomOptions.appendChild(btn);
    });
    geomDropdown.appendChild(geomOptions);
    this.toolbar.appendChild(geomDropdown);
    const eraserBtn = document.createElement("button");
    eraserBtn.textContent = "\u{1F9FD}";
    eraserBtn.title = "Eraser";
    eraserBtn.classList.add("drawing-btn", "eraser-btn");
    eraserBtn.onclick = () => {
      this.currentTool = "eraser";
      this.resetToolbarHighlights();
      eraserBtn.classList.add("active-tool");
    };
    this.toolbar.appendChild(eraserBtn);
    const laserBtn = document.createElement("button");
    laserBtn.textContent = "\u{1F526}";
    laserBtn.title = "Laser (temporary)";
    laserBtn.classList.add("drawing-btn", "laser-btn");
    laserBtn.onclick = () => {
      this.currentTool = "laser";
      this.resetToolbarHighlights();
      laserBtn.classList.add("active-tool");
    };
    this.toolbar.appendChild(laserBtn);
    const colorInput = document.createElement("input");
    colorInput.type = "color";
    colorInput.value = this.color;
    colorInput.classList.add("drawing-color-input");
    colorInput.onchange = () => {
      this.color = colorInput.value;
    };
    this.toolbar.appendChild(colorInput);
    const widthInput = document.createElement("input");
    widthInput.type = "number";
    widthInput.min = "1";
    widthInput.max = "10";
    widthInput.value = this.lineWidth.toString();
    widthInput.classList.add("drawing-linewidth-input");
    widthInput.onchange = () => {
      this.lineWidth = Number(widthInput.value);
    };
    this.toolbar.appendChild(widthInput);
  }
  enableDrawing() {
    this.canvas.addEventListener("pointerdown", this.handlePointerDown);
    this.canvas.addEventListener("pointermove", this.handlePointerMove);
    this.canvas.addEventListener("pointerup", this.handlePointerUp);
    this.canvas.addEventListener("pointerout", this.handlePointerUp);
  }
  disableDrawing() {
    this.canvas.removeEventListener("pointerdown", this.handlePointerDown);
    this.canvas.removeEventListener("pointermove", this.handlePointerMove);
    this.canvas.removeEventListener("pointerup", this.handlePointerUp);
    this.canvas.removeEventListener("pointerout", this.handlePointerUp);
  }
  clear() {
    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
  }
  getAnnotation() {
    return this.canvas.toDataURL("image/png");
  }
  destroy() {
    window.removeEventListener("resize", this.resizeCanvasBound);
    this.disableDrawing();
    if (this.toolbar.parentNode)
      this.toolbar.parentNode.removeChild(this.toolbar);
    if (this.canvas.parentNode)
      this.canvas.parentNode.removeChild(this.canvas);
  }
};

// src/visualizer.ts
var Visualizer = class {
  constructor(mediaElement, container, options = {}) {
    var _a, _b, _c;
    this.mediaElement = mediaElement;
    this.container = container;
    this.options = {
      height: (_a = options.height) != null ? _a : "100px",
      gradientType: (_b = options.gradientType) != null ? _b : "blue-red",
      customColors: options.customColors
    };
    const resolvedHeight = (_c = this.options.height) != null ? _c : "100px";
    this.canvas = document.createElement("canvas");
    this.canvas.classList.add("visualizer-canvas");
    const heightValue = resolvedHeight.replace("px", "");
    this.canvas.classList.add(`visualizer-height-${heightValue}`);
    this.canvas.width = container.clientWidth;
    this.canvas.height = parseInt(resolvedHeight, 10);
    this.canvasCtx = this.canvas.getContext("2d");
    container.appendChild(this.canvas);
    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
    this.source = this.audioContext.createMediaElementSource(this.mediaElement);
    this.analyser = this.audioContext.createAnalyser();
    this.analyser.fftSize = 512;
    this.analyser.smoothingTimeConstant = 0.05;
    this.analyser.minDecibels = -100;
    this.analyser.maxDecibels = -30;
    this.source.connect(this.analyser);
    this.analyser.connect(this.audioContext.destination);
    this.animationFrameId = 0;
    this.draw();
  }
  draw() {
    const bufferLength = this.analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);
    const halfBins = Math.floor(bufferLength / 2);
    const gap = 2;
    const canvasWidth = this.canvas.width;
    const canvasHeight = this.canvas.height;
    const midX = canvasWidth / 2;
    const baseline = canvasHeight / 2;
    const slotWidth = midX / halfBins;
    const barWidth = slotWidth * 0.6;
    const drawBars = () => {
      this.analyser.getByteFrequencyData(dataArray);
      this.canvasCtx.clearRect(0, 0, canvasWidth, canvasHeight);
      for (let i = 0; i < halfBins; i++) {
        const rawIntensity = dataArray[i] / 255;
        const intensity = Math.pow(rawIntensity, 2);
        const barHeight = intensity * baseline;
        let gradient;
        if (this.options.gradientType === "blue-red") {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          gradient.addColorStop(0, "hsl(240,80%,40%)");
          gradient.addColorStop(1, "hsl(0,90%,50%)");
        } else if (this.options.gradientType === "rainbow") {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          gradient.addColorStop(0, "hsl(240,100%,50%)");
          gradient.addColorStop(0.25, "hsl(180,100%,50%)");
          gradient.addColorStop(0.5, "hsl(120,100%,50%)");
          gradient.addColorStop(0.75, "hsl(60,100%,50%)");
          gradient.addColorStop(1, "hsl(0,100%,50%)");
        } else if (this.options.gradientType === "custom" && this.options.customColors && this.options.customColors.length > 0) {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          const n = this.options.customColors.length;
          for (let j = 0; j < n; j++) {
            gradient.addColorStop(j / (n - 1), this.options.customColors[j]);
          }
        } else {
          gradient = this.canvasCtx.createLinearGradient(0, baseline, 0, baseline - barHeight);
          gradient.addColorStop(0, "hsl(240,100%,50%)");
          gradient.addColorStop(0.25, "hsl(180,100%,50%)");
          gradient.addColorStop(0.5, "hsl(120,100%,50%)");
          gradient.addColorStop(0.75, "hsl(60,100%,50%)");
          gradient.addColorStop(1, "hsl(0,100%,50%)");
        }
        const xRight = midX + i * (barWidth + gap);
        const xLeft = midX - (i + 1) * (barWidth + gap);
        this.canvasCtx.fillStyle = gradient;
        this.canvasCtx.fillRect(xRight, baseline - barHeight, barWidth, barHeight);
        this.canvasCtx.fillRect(xLeft, baseline - barHeight, barWidth, barHeight);
      }
      this.animationFrameId = requestAnimationFrame(drawBars);
    };
    drawBars();
  }
  destroy() {
    cancelAnimationFrame(this.animationFrameId);
    this.canvas.remove();
    this.source.disconnect();
    this.analyser.disconnect();
    if (this.audioContext.state !== "closed") {
      this.audioContext.close();
    }
  }
};

// main.ts
var DEFAULT_SETTINGS = {
  enableDrawingAnnotation: false,
  enableVisualizer: false,
  visualizerColor: "#00ff00",
  visualizerHeight: "50px"
};
var _MediaSliderPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.filePathCache = /* @__PURE__ */ new Map();
    this.markdownCache = /* @__PURE__ */ new Map();
    this.drawingData = {};
  }
  async onload() {
    console.log("Loading Media Slider Plugin...");
    await this.loadSettings();
    this.addSettingTab(new MediaSliderSettingTab(this.app, this));
    this.notesManager = new NotesManager(this);
    await this.notesManager.load();
    await this.loadDrawingData();
    this.registerMarkdownCodeBlockProcessor("media-slider", (source, el, ctx) => {
      this.createMediaSlider(source, el, ctx);
    });
  }
  // --- Settings Persistence ---
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  // --- Force Refresh for Immediate Settings Effect ---
  refreshSliders() {
    this.app.workspace.getLeavesOfType("markdown").forEach((leaf) => {
      if (leaf.view instanceof import_obsidian.MarkdownView && typeof leaf.view.load === "function") {
        leaf.view.load();
      }
    });
  }
  // --- Persistent Drawing Data Management ---
  async loadDrawingData() {
    const data = await this.loadData();
    this.drawingData = (data == null ? void 0 : data.drawings) || {};
  }
  async saveDrawingData() {
    const data = await this.loadData() || {};
    data.drawings = this.drawingData;
    await this.saveData(data);
  }
  async cleanupDrawingData(sliderId, validFiles) {
    for (const key of Object.keys(this.drawingData)) {
      if (key.startsWith(`${sliderId}-`)) {
        const mediaFile = key.substring(sliderId.length + 1);
        if (!validFiles.includes(mediaFile)) {
          delete this.drawingData[key];
        }
      }
    }
    await this.saveDrawingData();
  }
  // --- Simple YAML Parser ---
  parseSimpleYAML(yaml) {
    const result = {};
    const lines = yaml.split("\n");
    for (let line of lines) {
      line = line.trim();
      if (!line)
        continue;
      const separatorIndex = line.indexOf(":");
      if (separatorIndex === -1)
        continue;
      const key = line.substring(0, separatorIndex).trim();
      let rawValue = line.substring(separatorIndex + 1).trim();
      let value;
      if (rawValue.startsWith('"') && rawValue.endsWith('"') || rawValue.startsWith("'") && rawValue.endsWith("'")) {
        value = rawValue.slice(1, -1);
      } else if (rawValue === "true") {
        value = true;
      } else if (rawValue === "false") {
        value = false;
      } else if (!isNaN(Number(rawValue))) {
        value = Number(rawValue);
      } else {
        value = rawValue;
      }
      result[key] = value;
    }
    return result;
  }
  // --- Resource Helpers ---
  getCachedResourcePath(fileName) {
    if (this.filePathCache.has(fileName)) {
      return this.filePathCache.get(fileName);
    }
    const path = this.app.vault.adapter.getResourcePath(fileName);
    this.filePathCache.set(fileName, path);
    return path;
  }
  getMediaSource(fileName) {
    if (fileName.startsWith("http://") || fileName.startsWith("https://")) {
      return fileName;
    }
    let file = this.app.vault.getAbstractFileByPath(fileName);
    if (!file) {
      const matchingFiles = this.app.vault.getFiles().filter(
        (f) => f.name.toLowerCase() === fileName.toLowerCase()
      );
      if (matchingFiles.length > 0) {
        fileName = matchingFiles[0].path;
      } else {
        console.error("File not found in vault:", fileName);
      }
    }
    return this.getCachedResourcePath(fileName);
  }
  // --- Revised getMarkdownContent without unsafe casting ---
  async getMarkdownContent(fileName) {
    if (this.markdownCache.has(fileName)) {
      return this.markdownCache.get(fileName);
    }
    const abstractFile = this.app.vault.getAbstractFileByPath(fileName);
    if (abstractFile && "extension" in abstractFile) {
      const content = await this.app.vault.read(abstractFile);
      this.markdownCache.set(fileName, content);
      return content;
    }
    return "";
  }
  throttle(fn, delay) {
    let lastCall = 0;
    return (...args) => {
      const now = Date.now();
      if (now - lastCall < delay)
        return;
      lastCall = now;
      return fn(...args);
    };
  }
  // --- Slider Creation ---
  createMediaSlider(source, el, ctx) {
    const metadataMatch = source.match(/---\n([\s\S]+?)\n---/);
    const mediaContent = source.replace(/---\n[\s\S]+?\n---/, "").trim();
    const mediaFiles = mediaContent.split("\n").map((line) => line.trim()).filter(Boolean);
    let settings = {
      sliderId: "",
      carouselShowThumbnails: true,
      thumbnailPosition: "bottom",
      captionMode: "below",
      autoplay: false,
      slideshowSpeed: 5,
      width: "100%",
      height: "300px",
      transitionEffect: "fade",
      transitionDuration: 500,
      enhancedView: false,
      interactiveNotes: false
    };
    if (metadataMatch) {
      try {
        const parsedSettings = this.parseSimpleYAML(metadataMatch[1]);
        settings = Object.assign(settings, parsedSettings);
      } catch (error) {
        console.error("Failed to parse media-slider metadata:", error);
      }
    }
    let sliderId = settings.sliderId;
    if (!sliderId) {
      sliderId = `slider-${_MediaSliderPlugin.sliderCounter++}`;
    }
    const validFiles = mediaFiles.map((file) => {
      let match = file.match(/!?\[\[(.*?)\]\]/);
      if (!match) {
        match = file.match(/!\[\]\((.*?)\)/);
      }
      return match ? match[1] : "";
    }).filter(Boolean);
    if (validFiles.length === 0) {
      el.createEl("p", { text: "No valid media files found." });
      return;
    }
    this.notesManager.cleanupNotesForSlider(sliderId, validFiles).catch(console.error);
    this.cleanupDrawingData(sliderId, validFiles).catch(console.error);
    this.renderSlider(el, validFiles, settings, sliderId);
  }
  // --- Render Slider UI ---
  renderSlider(container, files, settings, sliderId) {
    container.empty();
    let updateDrawingOverlay;
    const sliderWrapper = container.createDiv("media-slider-wrapper");
    if (settings.carouselShowThumbnails && (settings.thumbnailPosition === "left" || settings.thumbnailPosition === "right")) {
      sliderWrapper.classList.add("flex-row");
    } else {
      sliderWrapper.classList.add("flex-column", "center");
    }
    const sliderContent = sliderWrapper.createDiv("slider-content");
    const sliderContainer = sliderContent.createDiv("slider-container");
    const captionContainer = sliderContent.createDiv("slider-caption-container");
    let thumbnailContainer = null;
    let thumbnailEls = [];
    if (settings.carouselShowThumbnails) {
      thumbnailContainer = document.createElement("div");
      thumbnailContainer.classList.add("thumbnail-container");
      if (settings.thumbnailPosition === "left" || settings.thumbnailPosition === "right") {
        thumbnailContainer.classList.add("vertical");
      } else {
        thumbnailContainer.classList.add("horizontal");
      }
      if (settings.thumbnailPosition === "top" || settings.thumbnailPosition === "left") {
        sliderWrapper.insertBefore(thumbnailContainer, sliderContent);
      } else if (settings.thumbnailPosition === "bottom" || settings.thumbnailPosition === "right") {
        sliderWrapper.appendChild(thumbnailContainer);
      }
    }
    let currentIndex = 0;
    let currentDirection = "next";
    if (settings.enhancedView) {
      const fullScreenBtn = sliderWrapper.createEl("button", { text: "\u26F6", cls: "fullscreen-btn" });
      fullScreenBtn.onclick = () => {
        if (!document.fullscreenElement) {
          sliderWrapper.requestFullscreen().catch((err) => console.error("Error enabling fullscreen:", err));
          sliderContainer.classList.add("fullscreen-slider");
        } else {
          document.exitFullscreen();
          sliderContainer.classList.remove("fullscreen-slider");
        }
      };
      const copyBtn = sliderWrapper.createEl("button", { text: "\u{1F4CB}", cls: "copy-btn" });
      copyBtn.onclick = async () => {
        const currentEntry = files[currentIndex];
        let [fileName] = currentEntry.split("|").map((s) => s.trim());
        const markdownLink = `![[${fileName}]]`;
        try {
          await navigator.clipboard.writeText(markdownLink);
          console.log("Copied markdown link to clipboard:", markdownLink);
        } catch (err) {
          console.error("Failed to copy markdown link:", err);
        }
      };
    }
    let notesContainer = null;
    let notesTextarea = null;
    let notesToggleBtn = null;
    if (settings.interactiveNotes) {
      notesToggleBtn = sliderWrapper.createEl("button", { text: "\u{1F4DD}", cls: "notes-toggle-btn" });
      notesToggleBtn.onclick = () => {
        if (notesContainer) {
          notesContainer.classList.toggle("visible");
          const mediaKey = `${sliderId}-${files[currentIndex]}`;
          if (notesContainer.classList.contains("visible") && notesTextarea) {
            notesTextarea.value = this.notesManager.getNote(mediaKey);
          }
        }
      };
      notesContainer = sliderWrapper.createDiv("notes-container");
      notesTextarea = document.createElement("textarea");
      notesTextarea.classList.add("notes-textarea");
      notesTextarea.placeholder = "Add your notes here...";
      notesContainer.appendChild(notesTextarea);
      const saveNotesBtn = document.createElement("button");
      saveNotesBtn.textContent = "\u{1F4BE}";
      saveNotesBtn.classList.add("notes-save-btn");
      saveNotesBtn.onclick = async () => {
        const mediaKey = `${sliderId}-${files[currentIndex]}`;
        if (notesTextarea) {
          await this.notesManager.setNote(mediaKey, notesTextarea.value);
        }
        if (notesContainer)
          notesContainer.classList.remove("visible");
      };
      notesContainer.appendChild(saveNotesBtn);
    }
    let drawingAnnotation = null;
    let clearDrawingBtn = null;
    if (this.settings.enableDrawingAnnotation) {
      const drawingToggleBtn = sliderWrapper.createEl("button", { text: "\u270F\uFE0F", cls: "drawing-toggle-btn" });
      updateDrawingOverlay = (mediaKey) => {
        const existingOverlay = sliderContainer.querySelector(".drawing-overlay");
        if (existingOverlay) {
          existingOverlay.remove();
        }
        const savedDrawing = this.drawingData[mediaKey];
        if (savedDrawing) {
          const overlay = sliderContainer.createEl("img", { attr: { src: savedDrawing } });
          overlay.classList.add("drawing-overlay");
          if (!clearDrawingBtn) {
            clearDrawingBtn = sliderWrapper.createEl("button", { text: "\u{1F5D1}\uFE0F", cls: "clear-drawing-btn" });
            clearDrawingBtn.onclick = async () => {
              delete this.drawingData[mediaKey];
              await this.saveDrawingData();
              const existingOverlay2 = sliderContainer.querySelector(".drawing-overlay");
              if (existingOverlay2)
                existingOverlay2.remove();
              clearDrawingBtn.remove();
              clearDrawingBtn = null;
            };
          }
        } else {
          if (clearDrawingBtn) {
            clearDrawingBtn.remove();
            clearDrawingBtn = null;
          }
        }
      };
      drawingToggleBtn.onclick = async () => {
        const mediaKey = `${sliderId}-${files[currentIndex]}`;
        if (drawingAnnotation) {
          const drawingDataUrl = drawingAnnotation.getAnnotation();
          this.drawingData[mediaKey] = drawingDataUrl;
          await this.saveDrawingData();
          drawingAnnotation.destroy();
          drawingAnnotation = null;
          drawingToggleBtn.textContent = "\u270F\uFE0F";
          updateDrawingOverlay == null ? void 0 : updateDrawingOverlay(mediaKey);
        } else {
          if (this.drawingData[mediaKey]) {
            delete this.drawingData[mediaKey];
            await this.saveDrawingData();
            const existingOverlay = sliderContainer.querySelector(".drawing-overlay");
            if (existingOverlay)
              existingOverlay.remove();
            if (clearDrawingBtn) {
              clearDrawingBtn.remove();
              clearDrawingBtn = null;
            }
          }
          drawingAnnotation = new DrawingAnnotation(sliderContainer);
          drawingToggleBtn.textContent = "\u{1F4BE}";
        }
      };
    }
    container.appendChild(sliderWrapper);
    const prevBtn = sliderContent.createEl("button", { text: "\u2B9C", cls: "slider-btn prev" });
    const nextBtn = sliderContent.createEl("button", { text: "\u2B9E", cls: "slider-btn next" });
    const updateMediaDisplay = async () => {
      sliderContainer.classList.remove(
        "transition-fade-in",
        "transition-slide-next-in",
        "transition-slide-prev-in",
        "transition-zoom-in",
        "transition-slide-up-in",
        "transition-slide-down-in",
        "transition-flip-in",
        "transition-flip-vertical-in",
        "transition-rotate-in",
        "transition-blur-in",
        "transition-squeeze-in"
      );
      switch (settings.transitionEffect) {
        case "fade":
          sliderContainer.classList.add("transition-fade-out");
          break;
        case "slide":
          sliderContainer.classList.add(currentDirection === "next" ? "transition-slide-next-out" : "transition-slide-prev-out");
          break;
        case "zoom":
          sliderContainer.classList.add("transition-zoom-out");
          break;
        case "slide-up":
          sliderContainer.classList.add("transition-slide-up-out");
          break;
        case "slide-down":
          sliderContainer.classList.add("transition-slide-down-out");
          break;
        case "flip":
          sliderContainer.classList.add("transition-flip-out");
          break;
        case "flip-vertical":
          sliderContainer.classList.add("transition-flip-vertical-out");
          break;
        case "rotate":
          sliderContainer.classList.add("transition-rotate-out");
          break;
        case "blur":
          sliderContainer.classList.add("transition-blur-out");
          break;
        case "squeeze":
          sliderContainer.classList.add("transition-squeeze-out");
          break;
        default:
          sliderContainer.classList.add("transition-fade-out");
      }
      setTimeout(async () => {
        sliderContainer.empty();
        if (settings.captionMode === "below")
          captionContainer.empty();
        if (thumbnailEls.length > 0) {
          thumbnailEls.forEach((thumb, idx) => {
            thumb.classList.toggle("active-thumbnail", idx === currentIndex);
          });
        }
        const currentEntry = files[currentIndex];
        let [fileName, caption] = currentEntry.split("|").map((s) => s.trim());
        if (!fileName.includes(".")) {
          const mdFile = this.app.metadataCache.getFirstLinkpathDest(fileName, "");
          if (mdFile && mdFile.extension === "md") {
            fileName = mdFile.path;
          }
        }
        const filePath = this.getMediaSource(fileName);
        const mediaWrapper = sliderContainer.createDiv("media-wrapper");
        if (/\.(png|jpg|jpeg|gif)$/i.test(fileName)) {
          try {
            const compressedUrl = await compressImage(filePath, 800, 600, 0.7);
            const img = mediaWrapper.createEl("img", { attr: { src: compressedUrl } });
            img.classList.add("slider-media");
          } catch (err) {
            const img = mediaWrapper.createEl("img", { attr: { src: filePath } });
            img.classList.add("slider-media");
          }
        } else if (/\.(mp4|webm)$/i.test(fileName)) {
          const video = mediaWrapper.createEl("video", { attr: { src: filePath, controls: "true" } });
          if (settings.autoplay)
            video.setAttribute("autoplay", "true");
          video.classList.add("slider-media");
          if (this.settings.enableVisualizer) {
            new Visualizer(video, sliderContainer, {
              color: this.settings.visualizerColor,
              height: this.settings.visualizerHeight
            });
          }
        } else if (/\.(mp3|ogg|wav)$/i.test(fileName)) {
          const audio = mediaWrapper.createEl("audio", { attr: { src: filePath, controls: "true" } });
          audio.classList.add("slider-media", "audio-media");
          if (this.settings.enableVisualizer) {
            new Visualizer(audio, sliderContainer, {
              color: this.settings.visualizerColor,
              height: this.settings.visualizerHeight
            });
          }
        } else if (/\.(pdf)$/i.test(fileName)) {
          const iframe = mediaWrapper.createEl("iframe", { attr: { src: filePath, width: "100%", height: "100%" } });
          iframe.classList.add("slider-media");
        } else if (/\.(md)$/i.test(fileName)) {
          const abstractFile = this.app.vault.getAbstractFileByPath(fileName);
          if (abstractFile && "extension" in abstractFile) {
            const content = await this.getMarkdownContent(fileName);
            mediaWrapper.empty();
            await import_obsidian.MarkdownRenderer.renderMarkdown(content, mediaWrapper, abstractFile.path, this);
          }
        } else {
          const link = mediaWrapper.createEl("a", { text: "Open File", attr: { href: filePath, target: "_blank" } });
          link.classList.add("slider-media");
        }
        if (caption) {
          if (settings.captionMode === "overlay") {
            const capEl = mediaWrapper.createEl("div", { text: caption });
            capEl.classList.add("slider-caption-overlay");
          } else {
            const capEl = captionContainer.createEl("div", { text: caption });
            capEl.classList.add("slider-caption");
          }
        }
        if (settings.interactiveNotes && notesTextarea) {
          const mediaKey = `${sliderId}-${files[currentIndex]}`;
          notesTextarea.value = this.notesManager.getNote(mediaKey);
        }
        if (this.settings.enableDrawingAnnotation) {
          const mediaKey = `${sliderId}-${files[currentIndex]}`;
          updateDrawingOverlay == null ? void 0 : updateDrawingOverlay(mediaKey);
        }
        void mediaWrapper.offsetWidth;
        sliderContainer.classList.remove(
          "transition-fade-out",
          "transition-slide-next-out",
          "transition-slide-prev-out",
          "transition-zoom-out",
          "transition-slide-up-out",
          "transition-slide-down-out",
          "transition-flip-out",
          "transition-flip-vertical-out",
          "transition-rotate-out",
          "transition-blur-out",
          "transition-squeeze-out"
        );
        switch (settings.transitionEffect) {
          case "fade":
            sliderContainer.classList.add("transition-fade-in");
            break;
          case "slide":
            sliderContainer.classList.add(currentDirection === "next" ? "transition-slide-next-in" : "transition-slide-prev-in");
            break;
          case "zoom":
            sliderContainer.classList.add("transition-zoom-in");
            break;
          case "slide-up":
            sliderContainer.classList.add("transition-slide-up-in");
            break;
          case "slide-down":
            sliderContainer.classList.add("transition-slide-down-in");
            break;
          case "flip":
            sliderContainer.classList.add("transition-flip-in");
            break;
          case "flip-vertical":
            sliderContainer.classList.add("transition-flip-vertical-in");
            break;
          case "rotate":
            sliderContainer.classList.add("transition-rotate-in");
            break;
          case "blur":
            sliderContainer.classList.add("transition-blur-in");
            break;
          case "squeeze":
            sliderContainer.classList.add("transition-squeeze-in");
            break;
          default:
            sliderContainer.classList.add("transition-fade-in");
        }
      }, settings.transitionDuration);
    };
    const throttledUpdate = this.throttle(updateMediaDisplay, 100);
    const goPrev = () => {
      currentDirection = "prev";
      currentIndex = (currentIndex - 1 + files.length) % files.length;
      throttledUpdate();
    };
    const goNext = () => {
      currentDirection = "next";
      currentIndex = (currentIndex + 1) % files.length;
      throttledUpdate();
    };
    prevBtn.onclick = goPrev;
    nextBtn.onclick = goNext;
    sliderContent.addEventListener("mouseenter", () => sliderContent.focus());
    sliderContent.addEventListener("mouseleave", () => sliderContent.blur());
    sliderContent.tabIndex = 0;
    sliderContent.addEventListener("keydown", (evt) => {
      if (evt.key === "ArrowLeft")
        goPrev();
      else if (evt.key === "ArrowRight")
        goNext();
    });
    sliderContent.addEventListener("wheel", (evt) => {
      if (Math.abs(evt.deltaX) > Math.abs(evt.deltaY)) {
        if (evt.deltaX > 30) {
          goNext();
          evt.preventDefault();
        } else if (evt.deltaX < -30) {
          goPrev();
          evt.preventDefault();
        }
      }
    });
    let touchStartX = 0;
    sliderContent.addEventListener("touchstart", (evt) => {
      touchStartX = evt.touches[0].clientX;
    });
    sliderContent.addEventListener("touchend", (evt) => {
      const touchEndX = evt.changedTouches[0].clientX;
      const diff = touchStartX - touchEndX;
      if (Math.abs(diff) > 50)
        diff > 0 ? goNext() : goPrev();
    });
    throttledUpdate();
    if (thumbnailContainer) {
      thumbnailContainer.empty();
      files.forEach((entry, index) => {
        var _a;
        let [fileName] = entry.split("|").map((s) => s.trim());
        let thumbEl;
        if (/\.(png|jpg|jpeg|gif)$/i.test(fileName)) {
          thumbEl = thumbnailContainer.createEl("img", {
            attr: { src: this.getMediaSource(fileName) },
            cls: "thumbnail"
          });
        } else {
          const ext = ((_a = fileName.split(".").pop()) == null ? void 0 : _a.toUpperCase()) || "FILE";
          thumbEl = thumbnailContainer.createEl("div", { text: ext });
          thumbEl.classList.add("thumbnail-placeholder");
        }
        if (settings.thumbnailPosition === "left" || settings.thumbnailPosition === "right") {
          thumbEl.classList.add("vertical-thumb");
        }
        thumbEl.onclick = () => {
          currentIndex = index;
          throttledUpdate();
        };
        thumbnailEls.push(thumbEl);
      });
    }
    if (settings.slideshowSpeed > 0) {
      setInterval(goNext, settings.slideshowSpeed * 1e3);
    }
  }
};
var MediaSliderPlugin = _MediaSliderPlugin;
MediaSliderPlugin.sliderCounter = 0;
var MediaSliderSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Media Slider Plugin Settings" });
    new import_obsidian.Setting(containerEl).setName("Enable Drawing Annotation").setDesc("Toggle to enable drawing annotations on the slider. (Default: off)").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableDrawingAnnotation).onChange(async (value) => {
        this.plugin.settings.enableDrawingAnnotation = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Enable Visualizer").setDesc("Toggle to enable wave-like visualization for audio/video playback.").addToggle(
      (toggle) => toggle.setValue(this.plugin.settings.enableVisualizer).onChange(async (value) => {
        this.plugin.settings.enableVisualizer = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Visualizer Color").setDesc("CSS color value for the visualizer wave.").addText(
      (text) => text.setValue(this.plugin.settings.visualizerColor).onChange(async (value) => {
        this.plugin.settings.visualizerColor = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
    new import_obsidian.Setting(containerEl).setName("Visualizer Height").setDesc("Height of the visualizer (e.g., '50px').").addText(
      (text) => text.setValue(this.plugin.settings.visualizerHeight).onChange(async (value) => {
        this.plugin.settings.visualizerHeight = value;
        await this.plugin.saveSettings();
        this.plugin.refreshSliders();
      })
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvY29tcHJlc3Npb24udHMiLCAic3JjL25vdGVzLnRzIiwgInNyYy9kcmF3aW5nLnRzIiwgInNyYy92aXN1YWxpemVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBtYWluLnRzXG5pbXBvcnQgeyBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIEFwcCwgU2V0dGluZywgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgVEZpbGUsIE1hcmtkb3duUmVuZGVyZXIsIE1hcmtkb3duVmlldyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgY29tcHJlc3NJbWFnZSB9IGZyb20gXCIuL3NyYy9jb21wcmVzc2lvblwiO1xuaW1wb3J0IHsgTm90ZXNNYW5hZ2VyIH0gZnJvbSBcIi4vc3JjL25vdGVzXCI7XG5pbXBvcnQgeyBEcmF3aW5nQW5ub3RhdGlvbiB9IGZyb20gXCIuL3NyYy9kcmF3aW5nXCI7XG5pbXBvcnQgeyBWaXN1YWxpemVyLCBWaXN1YWxpemVyT3B0aW9ucyB9IGZyb20gXCIuL3NyYy92aXN1YWxpemVyXCI7XG5cbmludGVyZmFjZSBNZWRpYVNsaWRlclNldHRpbmdzIHtcblx0ZW5hYmxlRHJhd2luZ0Fubm90YXRpb246IGJvb2xlYW47XG5cdGVuYWJsZVZpc3VhbGl6ZXI6IGJvb2xlYW47XG5cdHZpc3VhbGl6ZXJDb2xvcjogc3RyaW5nO1xuXHR2aXN1YWxpemVySGVpZ2h0OiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE1lZGlhU2xpZGVyU2V0dGluZ3MgPSB7XG5cdGVuYWJsZURyYXdpbmdBbm5vdGF0aW9uOiBmYWxzZSxcblx0ZW5hYmxlVmlzdWFsaXplcjogZmFsc2UsXG5cdHZpc3VhbGl6ZXJDb2xvcjogXCIjMDBmZjAwXCIsXG5cdHZpc3VhbGl6ZXJIZWlnaHQ6IFwiNTBweFwiXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZWRpYVNsaWRlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBNZWRpYVNsaWRlclNldHRpbmdzO1xuXHRwcml2YXRlIGZpbGVQYXRoQ2FjaGU6IE1hcDxzdHJpbmcsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG5cdHByaXZhdGUgbWFya2Rvd25DYWNoZTogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcblx0cHJpdmF0ZSBub3Rlc01hbmFnZXI6IE5vdGVzTWFuYWdlcjtcblx0cHJpdmF0ZSBkcmF3aW5nRGF0YTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHt9O1xuXHRwcml2YXRlIHN0YXRpYyBzbGlkZXJDb3VudGVyID0gMDtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJMb2FkaW5nIE1lZGlhIFNsaWRlciBQbHVnaW4uLi5cIik7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IE1lZGlhU2xpZGVyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHRcdHRoaXMubm90ZXNNYW5hZ2VyID0gbmV3IE5vdGVzTWFuYWdlcih0aGlzKTtcblx0XHRhd2FpdCB0aGlzLm5vdGVzTWFuYWdlci5sb2FkKCk7XG5cdFx0YXdhaXQgdGhpcy5sb2FkRHJhd2luZ0RhdGEoKTtcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoXCJtZWRpYS1zbGlkZXJcIiwgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xuXHRcdFx0dGhpcy5jcmVhdGVNZWRpYVNsaWRlcihzb3VyY2UsIGVsLCBjdHgpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gLS0tIFNldHRpbmdzIFBlcnNpc3RlbmNlIC0tLVxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdC8vIC0tLSBGb3JjZSBSZWZyZXNoIGZvciBJbW1lZGlhdGUgU2V0dGluZ3MgRWZmZWN0IC0tLVxuXHRyZWZyZXNoU2xpZGVycygpIHtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwibWFya2Rvd25cIikuZm9yRWFjaChsZWFmID0+IHtcblx0XHRcdGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgdHlwZW9mIGxlYWYudmlldy5sb2FkID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0bGVhZi52aWV3LmxvYWQoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIC0tLSBQZXJzaXN0ZW50IERyYXdpbmcgRGF0YSBNYW5hZ2VtZW50IC0tLVxuXHRwcml2YXRlIGFzeW5jIGxvYWREcmF3aW5nRGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuXHRcdHRoaXMuZHJhd2luZ0RhdGEgPSBkYXRhPy5kcmF3aW5ncyB8fCB7fTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc2F2ZURyYXdpbmdEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGRhdGEgPSAoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKSB8fCB7fTtcblx0XHRkYXRhLmRyYXdpbmdzID0gdGhpcy5kcmF3aW5nRGF0YTtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKGRhdGEpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBjbGVhbnVwRHJhd2luZ0RhdGEoc2xpZGVySWQ6IHN0cmluZywgdmFsaWRGaWxlczogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmRyYXdpbmdEYXRhKSkge1xuXHRcdFx0aWYgKGtleS5zdGFydHNXaXRoKGAke3NsaWRlcklkfS1gKSkge1xuXHRcdFx0XHRjb25zdCBtZWRpYUZpbGUgPSBrZXkuc3Vic3RyaW5nKHNsaWRlcklkLmxlbmd0aCArIDEpO1xuXHRcdFx0XHRpZiAoIXZhbGlkRmlsZXMuaW5jbHVkZXMobWVkaWFGaWxlKSkge1xuXHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmRyYXdpbmdEYXRhW2tleV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0YXdhaXQgdGhpcy5zYXZlRHJhd2luZ0RhdGEoKTtcblx0fVxuXG5cdC8vIC0tLSBTaW1wbGUgWUFNTCBQYXJzZXIgLS0tXG5cdHByaXZhdGUgcGFyc2VTaW1wbGVZQU1MKHlhbWw6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuXHRcdGNvbnN0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXHRcdGNvbnN0IGxpbmVzID0geWFtbC5zcGxpdChcIlxcblwiKTtcblx0XHRmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0XHRsaW5lID0gbGluZS50cmltKCk7XG5cdFx0XHRpZiAoIWxpbmUpIGNvbnRpbnVlO1xuXHRcdFx0Y29uc3Qgc2VwYXJhdG9ySW5kZXggPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHRcdFx0aWYgKHNlcGFyYXRvckluZGV4ID09PSAtMSkgY29udGludWU7XG5cdFx0XHRjb25zdCBrZXkgPSBsaW5lLnN1YnN0cmluZygwLCBzZXBhcmF0b3JJbmRleCkudHJpbSgpO1xuXHRcdFx0bGV0IHJhd1ZhbHVlID0gbGluZS5zdWJzdHJpbmcoc2VwYXJhdG9ySW5kZXggKyAxKS50cmltKCk7XG5cdFx0XHRsZXQgdmFsdWU6IHN0cmluZyB8IGJvb2xlYW4gfCBudW1iZXI7XG5cdFx0XHRpZiAoKHJhd1ZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgcmF3VmFsdWUuZW5kc1dpdGgoJ1wiJykpIHx8XG5cdFx0XHRcdChyYXdWYWx1ZS5zdGFydHNXaXRoKFwiJ1wiKSAmJiByYXdWYWx1ZS5lbmRzV2l0aChcIidcIikpKSB7XG5cdFx0XHRcdHZhbHVlID0gcmF3VmFsdWUuc2xpY2UoMSwgLTEpO1xuXHRcdFx0fSBlbHNlIGlmIChyYXdWYWx1ZSA9PT0gXCJ0cnVlXCIpIHtcblx0XHRcdFx0dmFsdWUgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIGlmIChyYXdWYWx1ZSA9PT0gXCJmYWxzZVwiKSB7XG5cdFx0XHRcdHZhbHVlID0gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIocmF3VmFsdWUpKSkge1xuXHRcdFx0XHR2YWx1ZSA9IE51bWJlcihyYXdWYWx1ZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YWx1ZSA9IHJhd1ZhbHVlO1xuXHRcdFx0fVxuXHRcdFx0cmVzdWx0W2tleV0gPSB2YWx1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdC8vIC0tLSBSZXNvdXJjZSBIZWxwZXJzIC0tLVxuXHRwcml2YXRlIGdldENhY2hlZFJlc291cmNlUGF0aChmaWxlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAodGhpcy5maWxlUGF0aENhY2hlLmhhcyhmaWxlTmFtZSkpIHtcblx0XHRcdHJldHVybiB0aGlzLmZpbGVQYXRoQ2FjaGUuZ2V0KGZpbGVOYW1lKSE7XG5cdFx0fVxuXHRcdGNvbnN0IHBhdGggPSB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmdldFJlc291cmNlUGF0aChmaWxlTmFtZSk7XG5cdFx0dGhpcy5maWxlUGF0aENhY2hlLnNldChmaWxlTmFtZSwgcGF0aCk7XG5cdFx0cmV0dXJuIHBhdGg7XG5cdH1cblxuXHRwcml2YXRlIGdldE1lZGlhU291cmNlKGZpbGVOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGlmIChmaWxlTmFtZS5zdGFydHNXaXRoKFwiaHR0cDovL1wiKSB8fCBmaWxlTmFtZS5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikpIHtcblx0XHRcdHJldHVybiBmaWxlTmFtZTtcblx0XHR9XG5cdFx0bGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZU5hbWUpO1xuXHRcdGlmICghZmlsZSkge1xuXHRcdFx0Y29uc3QgbWF0Y2hpbmdGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCkuZmlsdGVyKFxuXHRcdFx0XHRmID0+IGYubmFtZS50b0xvd2VyQ2FzZSgpID09PSBmaWxlTmFtZS50b0xvd2VyQ2FzZSgpXG5cdFx0XHQpO1xuXHRcdFx0aWYgKG1hdGNoaW5nRmlsZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRmaWxlTmFtZSA9IG1hdGNoaW5nRmlsZXNbMF0ucGF0aDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJGaWxlIG5vdCBmb3VuZCBpbiB2YXVsdDpcIiwgZmlsZU5hbWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5nZXRDYWNoZWRSZXNvdXJjZVBhdGgoZmlsZU5hbWUpO1xuXHR9XG5cblx0Ly8gLS0tIFJldmlzZWQgZ2V0TWFya2Rvd25Db250ZW50IHdpdGhvdXQgdW5zYWZlIGNhc3RpbmcgLS0tXG5cdHByaXZhdGUgYXN5bmMgZ2V0TWFya2Rvd25Db250ZW50KGZpbGVOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGlmICh0aGlzLm1hcmtkb3duQ2FjaGUuaGFzKGZpbGVOYW1lKSkge1xuXHRcdFx0cmV0dXJuIHRoaXMubWFya2Rvd25DYWNoZS5nZXQoZmlsZU5hbWUpITtcblx0XHR9XG5cdFx0Y29uc3QgYWJzdHJhY3RGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVOYW1lKTtcblx0XHRpZiAoYWJzdHJhY3RGaWxlICYmIFwiZXh0ZW5zaW9uXCIgaW4gYWJzdHJhY3RGaWxlKSB7XG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhYnN0cmFjdEZpbGUpO1xuXHRcdFx0dGhpcy5tYXJrZG93bkNhY2hlLnNldChmaWxlTmFtZSwgY29udGVudCk7XG5cdFx0XHRyZXR1cm4gY29udGVudDtcblx0XHR9XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cblxuXHRwcml2YXRlIHRocm90dGxlPFQgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IGFueT4oZm46IFQsIGRlbGF5OiBudW1iZXIpOiBUIHtcblx0XHRsZXQgbGFzdENhbGwgPSAwO1xuXHRcdHJldHVybiAoKC4uLmFyZ3M6IGFueVtdKSA9PiB7XG5cdFx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdFx0aWYgKG5vdyAtIGxhc3RDYWxsIDwgZGVsYXkpIHJldHVybjtcblx0XHRcdGxhc3RDYWxsID0gbm93O1xuXHRcdFx0cmV0dXJuIGZuKC4uLmFyZ3MpO1xuXHRcdH0pIGFzIFQ7XG5cdH1cblxuXHQvLyAtLS0gU2xpZGVyIENyZWF0aW9uIC0tLVxuXHRwcml2YXRlIGNyZWF0ZU1lZGlhU2xpZGVyKHNvdXJjZTogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQsIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCkge1xuXHRcdGNvbnN0IG1ldGFkYXRhTWF0Y2ggPSBzb3VyY2UubWF0Y2goLy0tLVxcbihbXFxzXFxTXSs/KVxcbi0tLS8pO1xuXHRcdGNvbnN0IG1lZGlhQ29udGVudCA9IHNvdXJjZS5yZXBsYWNlKC8tLS1cXG5bXFxzXFxTXSs/XFxuLS0tLywgXCJcIikudHJpbSgpO1xuXHRcdGNvbnN0IG1lZGlhRmlsZXMgPSBtZWRpYUNvbnRlbnQuc3BsaXQoXCJcXG5cIikubWFwKGxpbmUgPT4gbGluZS50cmltKCkpLmZpbHRlcihCb29sZWFuKTtcblxuXHRcdGxldCBzZXR0aW5nczogYW55ID0ge1xuXHRcdFx0c2xpZGVySWQ6IFwiXCIsXG5cdFx0XHRjYXJvdXNlbFNob3dUaHVtYm5haWxzOiB0cnVlLFxuXHRcdFx0dGh1bWJuYWlsUG9zaXRpb246IFwiYm90dG9tXCIsXG5cdFx0XHRjYXB0aW9uTW9kZTogXCJiZWxvd1wiLFxuXHRcdFx0YXV0b3BsYXk6IGZhbHNlLFxuXHRcdFx0c2xpZGVzaG93U3BlZWQ6IDUsXG5cdFx0XHR3aWR0aDogXCIxMDAlXCIsXG5cdFx0XHRoZWlnaHQ6IFwiMzAwcHhcIixcblx0XHRcdHRyYW5zaXRpb25FZmZlY3Q6IFwiZmFkZVwiLFxuXHRcdFx0dHJhbnNpdGlvbkR1cmF0aW9uOiA1MDAsXG5cdFx0XHRlbmhhbmNlZFZpZXc6IGZhbHNlLFxuXHRcdFx0aW50ZXJhY3RpdmVOb3RlczogZmFsc2Vcblx0XHR9O1xuXG5cdFx0aWYgKG1ldGFkYXRhTWF0Y2gpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbnN0IHBhcnNlZFNldHRpbmdzID0gdGhpcy5wYXJzZVNpbXBsZVlBTUwobWV0YWRhdGFNYXRjaFsxXSk7XG5cdFx0XHRcdHNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihzZXR0aW5ncywgcGFyc2VkU2V0dGluZ3MpO1xuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBwYXJzZSBtZWRpYS1zbGlkZXIgbWV0YWRhdGE6XCIsIGVycm9yKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRsZXQgc2xpZGVySWQgPSBzZXR0aW5ncy5zbGlkZXJJZDtcblx0XHRpZiAoIXNsaWRlcklkKSB7XG5cdFx0XHRzbGlkZXJJZCA9IGBzbGlkZXItJHtNZWRpYVNsaWRlclBsdWdpbi5zbGlkZXJDb3VudGVyKyt9YDtcblx0XHR9XG5cblx0XHRjb25zdCB2YWxpZEZpbGVzID0gbWVkaWFGaWxlcy5tYXAoZmlsZSA9PiB7XG5cdFx0XHRsZXQgbWF0Y2ggPSBmaWxlLm1hdGNoKC8hP1xcW1xcWyguKj8pXFxdXFxdLyk7XG5cdFx0XHRpZiAoIW1hdGNoKSB7XG5cdFx0XHRcdG1hdGNoID0gZmlsZS5tYXRjaCgvIVxcW1xcXVxcKCguKj8pXFwpLyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6IFwiXCI7XG5cdFx0fSkuZmlsdGVyKEJvb2xlYW4pO1xuXG5cdFx0aWYgKHZhbGlkRmlsZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRlbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIHZhbGlkIG1lZGlhIGZpbGVzIGZvdW5kLlwiIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMubm90ZXNNYW5hZ2VyLmNsZWFudXBOb3Rlc0ZvclNsaWRlcihzbGlkZXJJZCwgdmFsaWRGaWxlcykuY2F0Y2goY29uc29sZS5lcnJvcik7XG5cdFx0dGhpcy5jbGVhbnVwRHJhd2luZ0RhdGEoc2xpZGVySWQsIHZhbGlkRmlsZXMpLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuXG5cdFx0dGhpcy5yZW5kZXJTbGlkZXIoZWwsIHZhbGlkRmlsZXMsIHNldHRpbmdzLCBzbGlkZXJJZCk7XG5cdH1cblxuXHQvLyAtLS0gUmVuZGVyIFNsaWRlciBVSSAtLS1cblx0cHJpdmF0ZSByZW5kZXJTbGlkZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZmlsZXM6IHN0cmluZ1tdLCBzZXR0aW5nczogYW55LCBzbGlkZXJJZDogc3RyaW5nKSB7XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cdFx0bGV0IHVwZGF0ZURyYXdpbmdPdmVybGF5OiAoKG1lZGlhS2V5OiBzdHJpbmcpID0+IHZvaWQpIHwgdW5kZWZpbmVkO1xuXHRcdGNvbnN0IHNsaWRlcldyYXBwZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KFwibWVkaWEtc2xpZGVyLXdyYXBwZXJcIik7XG5cblx0XHQvLyBMYXlvdXQgY2xhc3NlcyBiYXNlZCBvbiB0aHVtYm5haWwgcG9zaXRpb25cblx0XHRpZiAoc2V0dGluZ3MuY2Fyb3VzZWxTaG93VGh1bWJuYWlscyAmJiAoc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwibGVmdFwiIHx8IHNldHRpbmdzLnRodW1ibmFpbFBvc2l0aW9uID09PSBcInJpZ2h0XCIpKSB7XG5cdFx0XHRzbGlkZXJXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJmbGV4LXJvd1wiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2xpZGVyV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiZmxleC1jb2x1bW5cIiwgXCJjZW50ZXJcIik7XG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2xpZGVyQ29udGVudCA9IHNsaWRlcldyYXBwZXIuY3JlYXRlRGl2KFwic2xpZGVyLWNvbnRlbnRcIik7XG5cdFx0Y29uc3Qgc2xpZGVyQ29udGFpbmVyID0gc2xpZGVyQ29udGVudC5jcmVhdGVEaXYoXCJzbGlkZXItY29udGFpbmVyXCIpO1xuXHRcdGNvbnN0IGNhcHRpb25Db250YWluZXIgPSBzbGlkZXJDb250ZW50LmNyZWF0ZURpdihcInNsaWRlci1jYXB0aW9uLWNvbnRhaW5lclwiKTtcblxuXHRcdGxldCB0aHVtYm5haWxDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IHRodW1ibmFpbEVsczogSFRNTEVsZW1lbnRbXSA9IFtdO1xuXHRcdGlmIChzZXR0aW5ncy5jYXJvdXNlbFNob3dUaHVtYm5haWxzKSB7XG5cdFx0XHR0aHVtYm5haWxDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdFx0dGh1bWJuYWlsQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0aHVtYm5haWwtY29udGFpbmVyXCIpO1xuXHRcdFx0aWYgKHNldHRpbmdzLnRodW1ibmFpbFBvc2l0aW9uID09PSBcImxlZnRcIiB8fCBzZXR0aW5ncy50aHVtYm5haWxQb3NpdGlvbiA9PT0gXCJyaWdodFwiKSB7XG5cdFx0XHRcdHRodW1ibmFpbENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHVtYm5haWxDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWxcIik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwidG9wXCIgfHwgc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwibGVmdFwiKSB7XG5cdFx0XHRcdHNsaWRlcldyYXBwZXIuaW5zZXJ0QmVmb3JlKHRodW1ibmFpbENvbnRhaW5lciwgc2xpZGVyQ29udGVudCk7XG5cdFx0XHR9IGVsc2UgaWYgKHNldHRpbmdzLnRodW1ibmFpbFBvc2l0aW9uID09PSBcImJvdHRvbVwiIHx8IHNldHRpbmdzLnRodW1ibmFpbFBvc2l0aW9uID09PSBcInJpZ2h0XCIpIHtcblx0XHRcdFx0c2xpZGVyV3JhcHBlci5hcHBlbmRDaGlsZCh0aHVtYm5haWxDb250YWluZXIpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGxldCBjdXJyZW50SW5kZXggPSAwO1xuXHRcdGxldCBjdXJyZW50RGlyZWN0aW9uOiBcIm5leHRcIiB8IFwicHJldlwiID0gXCJuZXh0XCI7XG5cblx0XHRpZiAoc2V0dGluZ3MuZW5oYW5jZWRWaWV3KSB7XG5cdFx0XHRjb25zdCBmdWxsU2NyZWVuQnRuID0gc2xpZGVyV3JhcHBlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHUyNkY2XCIsIGNsczogXCJmdWxsc2NyZWVuLWJ0blwiIH0pO1xuXHRcdFx0ZnVsbFNjcmVlbkJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7XG5cdFx0XHRcdFx0c2xpZGVyV3JhcHBlci5yZXF1ZXN0RnVsbHNjcmVlbigpLmNhdGNoKGVyciA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW5hYmxpbmcgZnVsbHNjcmVlbjpcIiwgZXJyKSk7XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJmdWxsc2NyZWVuLXNsaWRlclwiKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiZnVsbHNjcmVlbi1zbGlkZXJcIik7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IGNvcHlCdG4gPSBzbGlkZXJXcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdUQ4M0RcdURDQ0JcIiwgY2xzOiBcImNvcHktYnRuXCIgfSk7XG5cdFx0XHRjb3B5QnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRFbnRyeSA9IGZpbGVzW2N1cnJlbnRJbmRleF07XG5cdFx0XHRcdGxldCBbZmlsZU5hbWVdID0gY3VycmVudEVudHJ5LnNwbGl0KFwifFwiKS5tYXAocyA9PiBzLnRyaW0oKSk7XG5cdFx0XHRcdGNvbnN0IG1hcmtkb3duTGluayA9IGAhW1ske2ZpbGVOYW1lfV1dYDtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChtYXJrZG93bkxpbmspO1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiQ29waWVkIG1hcmtkb3duIGxpbmsgdG8gY2xpcGJvYXJkOlwiLCBtYXJrZG93bkxpbmspO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNvcHkgbWFya2Rvd24gbGluazpcIiwgZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRsZXQgbm90ZXNDb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IG5vdGVzVGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgbm90ZXNUb2dnbGVCdG46IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdFx0aWYgKHNldHRpbmdzLmludGVyYWN0aXZlTm90ZXMpIHtcblx0XHRcdG5vdGVzVG9nZ2xlQnRuID0gc2xpZGVyV3JhcHBlci5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHVEODNEXHVEQ0REXCIsIGNsczogXCJub3Rlcy10b2dnbGUtYnRuXCIgfSk7XG5cdFx0XHRub3Rlc1RvZ2dsZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuXHRcdFx0XHRpZiAobm90ZXNDb250YWluZXIpIHtcblx0XHRcdFx0XHRub3Rlc0NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwidmlzaWJsZVwiKTtcblx0XHRcdFx0XHRjb25zdCBtZWRpYUtleSA9IGAke3NsaWRlcklkfS0ke2ZpbGVzW2N1cnJlbnRJbmRleF19YDtcblx0XHRcdFx0XHRpZiAobm90ZXNDb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwidmlzaWJsZVwiKSAmJiBub3Rlc1RleHRhcmVhKSB7XG5cdFx0XHRcdFx0XHRub3Rlc1RleHRhcmVhLnZhbHVlID0gdGhpcy5ub3Rlc01hbmFnZXIuZ2V0Tm90ZShtZWRpYUtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRub3Rlc0NvbnRhaW5lciA9IHNsaWRlcldyYXBwZXIuY3JlYXRlRGl2KFwibm90ZXMtY29udGFpbmVyXCIpO1xuXHRcdFx0bm90ZXNUZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKTtcblx0XHRcdG5vdGVzVGV4dGFyZWEuY2xhc3NMaXN0LmFkZChcIm5vdGVzLXRleHRhcmVhXCIpO1xuXHRcdFx0bm90ZXNUZXh0YXJlYS5wbGFjZWhvbGRlciA9IFwiQWRkIHlvdXIgbm90ZXMgaGVyZS4uLlwiO1xuXHRcdFx0bm90ZXNDb250YWluZXIuYXBwZW5kQ2hpbGQobm90ZXNUZXh0YXJlYSk7XG5cblx0XHRcdGNvbnN0IHNhdmVOb3Rlc0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdFx0XHRzYXZlTm90ZXNCdG4udGV4dENvbnRlbnQgPSBcIlx1RDgzRFx1RENCRVwiO1xuXHRcdFx0c2F2ZU5vdGVzQnRuLmNsYXNzTGlzdC5hZGQoXCJub3Rlcy1zYXZlLWJ0blwiKTtcblx0XHRcdHNhdmVOb3Rlc0J0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBtZWRpYUtleSA9IGAke3NsaWRlcklkfS0ke2ZpbGVzW2N1cnJlbnRJbmRleF19YDtcblx0XHRcdFx0aWYgKG5vdGVzVGV4dGFyZWEpIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLm5vdGVzTWFuYWdlci5zZXROb3RlKG1lZGlhS2V5LCBub3Rlc1RleHRhcmVhLnZhbHVlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobm90ZXNDb250YWluZXIpIG5vdGVzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpO1xuXHRcdFx0fTtcblx0XHRcdG5vdGVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHNhdmVOb3Rlc0J0bik7XG5cdFx0fVxuXG5cdFx0bGV0IGRyYXdpbmdBbm5vdGF0aW9uOiBEcmF3aW5nQW5ub3RhdGlvbiB8IG51bGwgPSBudWxsO1xuXHRcdGxldCBjbGVhckRyYXdpbmdCdG46IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlRHJhd2luZ0Fubm90YXRpb24pIHtcblx0XHRcdGNvbnN0IGRyYXdpbmdUb2dnbGVCdG4gPSBzbGlkZXJXcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdTI3MEZcdUZFMEZcIiwgY2xzOiBcImRyYXdpbmctdG9nZ2xlLWJ0blwiIH0pO1xuXG5cdFx0XHR1cGRhdGVEcmF3aW5nT3ZlcmxheSA9IChtZWRpYUtleTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGV4aXN0aW5nT3ZlcmxheSA9IHNsaWRlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmRyYXdpbmctb3ZlcmxheVwiKTtcblx0XHRcdFx0aWYgKGV4aXN0aW5nT3ZlcmxheSkge1xuXHRcdFx0XHRcdGV4aXN0aW5nT3ZlcmxheS5yZW1vdmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCBzYXZlZERyYXdpbmcgPSB0aGlzLmRyYXdpbmdEYXRhW21lZGlhS2V5XTtcblx0XHRcdFx0aWYgKHNhdmVkRHJhd2luZykge1xuXHRcdFx0XHRcdGNvbnN0IG92ZXJsYXkgPSBzbGlkZXJDb250YWluZXIuY3JlYXRlRWwoXCJpbWdcIiwgeyBhdHRyOiB7IHNyYzogc2F2ZWREcmF3aW5nIH0gfSk7XG5cdFx0XHRcdFx0b3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwiZHJhd2luZy1vdmVybGF5XCIpO1xuXHRcdFx0XHRcdGlmICghY2xlYXJEcmF3aW5nQnRuKSB7XG5cdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4gPSBzbGlkZXJXcmFwcGVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJcdUQ4M0RcdURERDFcdUZFMEZcIiwgY2xzOiBcImNsZWFyLWRyYXdpbmctYnRuXCIgfSk7XG5cdFx0XHRcdFx0XHRjbGVhckRyYXdpbmdCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuZHJhd2luZ0RhdGFbbWVkaWFLZXldO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnNhdmVEcmF3aW5nRGF0YSgpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ092ZXJsYXkgPSBzbGlkZXJDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5kcmF3aW5nLW92ZXJsYXlcIik7XG5cdFx0XHRcdFx0XHRcdGlmIChleGlzdGluZ092ZXJsYXkpIGV4aXN0aW5nT3ZlcmxheS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0Y2xlYXJEcmF3aW5nQnRuIS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0Y2xlYXJEcmF3aW5nQnRuID0gbnVsbDtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChjbGVhckRyYXdpbmdCdG4pIHtcblx0XHRcdFx0XHRcdGNsZWFyRHJhd2luZ0J0bi5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdGNsZWFyRHJhd2luZ0J0biA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRkcmF3aW5nVG9nZ2xlQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IG1lZGlhS2V5ID0gYCR7c2xpZGVySWR9LSR7ZmlsZXNbY3VycmVudEluZGV4XX1gO1xuXHRcdFx0XHRpZiAoZHJhd2luZ0Fubm90YXRpb24pIHtcblx0XHRcdFx0XHRjb25zdCBkcmF3aW5nRGF0YVVybCA9IGRyYXdpbmdBbm5vdGF0aW9uLmdldEFubm90YXRpb24oKTtcblx0XHRcdFx0XHR0aGlzLmRyYXdpbmdEYXRhW21lZGlhS2V5XSA9IGRyYXdpbmdEYXRhVXJsO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZURyYXdpbmdEYXRhKCk7XG5cdFx0XHRcdFx0ZHJhd2luZ0Fubm90YXRpb24uZGVzdHJveSgpO1xuXHRcdFx0XHRcdGRyYXdpbmdBbm5vdGF0aW9uID0gbnVsbDtcblx0XHRcdFx0XHRkcmF3aW5nVG9nZ2xlQnRuLnRleHRDb250ZW50ID0gXCJcdTI3MEZcdUZFMEZcIjtcblx0XHRcdFx0XHR1cGRhdGVEcmF3aW5nT3ZlcmxheT8uKG1lZGlhS2V5KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAodGhpcy5kcmF3aW5nRGF0YVttZWRpYUtleV0pIHtcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmRyYXdpbmdEYXRhW21lZGlhS2V5XTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZURyYXdpbmdEYXRhKCk7XG5cdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ092ZXJsYXkgPSBzbGlkZXJDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5kcmF3aW5nLW92ZXJsYXlcIik7XG5cdFx0XHRcdFx0XHRpZiAoZXhpc3RpbmdPdmVybGF5KSBleGlzdGluZ092ZXJsYXkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRpZiAoY2xlYXJEcmF3aW5nQnRuKSB7XG5cdFx0XHRcdFx0XHRcdGNsZWFyRHJhd2luZ0J0bi5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0Y2xlYXJEcmF3aW5nQnRuID0gbnVsbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZHJhd2luZ0Fubm90YXRpb24gPSBuZXcgRHJhd2luZ0Fubm90YXRpb24oc2xpZGVyQ29udGFpbmVyKTtcblx0XHRcdFx0XHRkcmF3aW5nVG9nZ2xlQnRuLnRleHRDb250ZW50ID0gXCJcdUQ4M0RcdURDQkVcIjtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQoc2xpZGVyV3JhcHBlcik7XG5cblx0XHRjb25zdCBwcmV2QnRuID0gc2xpZGVyQ29udGVudC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHUyQjlDXCIsIGNsczogXCJzbGlkZXItYnRuIHByZXZcIiB9KTtcblx0XHRjb25zdCBuZXh0QnRuID0gc2xpZGVyQ29udGVudC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiXHUyQjlFXCIsIGNsczogXCJzbGlkZXItYnRuIG5leHRcIiB9KTtcblxuXHRcdC8vIE1vZGlmaWVkIHVwZGF0ZU1lZGlhRGlzcGxheSB0byBjb3JyZWN0bHkgdHJpZ2dlciB0cmFuc2l0aW9ucyBmb3IgZXZlcnkgaW1hZ2Vcblx0XHRjb25zdCB1cGRhdGVNZWRpYURpc3BsYXkgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHQvLyBSZW1vdmUgYW55IHByZXZpb3VzIFwiaW5cIiBjbGFzc2VzXG5cdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcblx0XHRcdFx0XCJ0cmFuc2l0aW9uLWZhZGUtaW5cIiwgXCJ0cmFuc2l0aW9uLXNsaWRlLW5leHQtaW5cIiwgXCJ0cmFuc2l0aW9uLXNsaWRlLXByZXYtaW5cIiwgXCJ0cmFuc2l0aW9uLXpvb20taW5cIixcblx0XHRcdFx0XCJ0cmFuc2l0aW9uLXNsaWRlLXVwLWluXCIsIFwidHJhbnNpdGlvbi1zbGlkZS1kb3duLWluXCIsIFwidHJhbnNpdGlvbi1mbGlwLWluXCIsIFwidHJhbnNpdGlvbi1mbGlwLXZlcnRpY2FsLWluXCIsXG5cdFx0XHRcdFwidHJhbnNpdGlvbi1yb3RhdGUtaW5cIiwgXCJ0cmFuc2l0aW9uLWJsdXItaW5cIiwgXCJ0cmFuc2l0aW9uLXNxdWVlemUtaW5cIlxuXHRcdFx0KTtcblx0XHRcdC8vIEFkZCB0aGUgYXBwcm9wcmlhdGUgXCJvdXRcIiB0cmFuc2l0aW9uIGNsYXNzXG5cdFx0XHRzd2l0Y2ggKHNldHRpbmdzLnRyYW5zaXRpb25FZmZlY3QpIHtcblx0XHRcdFx0Y2FzZSBcImZhZGVcIjpcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tZmFkZS1vdXRcIik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzbGlkZVwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGN1cnJlbnREaXJlY3Rpb24gPT09IFwibmV4dFwiID8gXCJ0cmFuc2l0aW9uLXNsaWRlLW5leHQtb3V0XCIgOiBcInRyYW5zaXRpb24tc2xpZGUtcHJldi1vdXRcIik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJ6b29tXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLXpvb20tb3V0XCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic2xpZGUtdXBcIjpcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tc2xpZGUtdXAtb3V0XCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic2xpZGUtZG93blwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHJhbnNpdGlvbi1zbGlkZS1kb3duLW91dFwiKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImZsaXBcIjpcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tZmxpcC1vdXRcIik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJmbGlwLXZlcnRpY2FsXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLWZsaXAtdmVydGljYWwtb3V0XCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicm90YXRlXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLXJvdGF0ZS1vdXRcIik7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJibHVyXCI6XG5cdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLWJsdXItb3V0XCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic3F1ZWV6ZVwiOlxuXHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHJhbnNpdGlvbi1zcXVlZXplLW91dFwiKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tZmFkZS1vdXRcIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdhaXQgZm9yIHRoZSBcIm91dFwiIHRyYW5zaXRpb24gdG8gY29tcGxldGVcblx0XHRcdHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRzbGlkZXJDb250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0aWYgKHNldHRpbmdzLmNhcHRpb25Nb2RlID09PSBcImJlbG93XCIpIGNhcHRpb25Db250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0aWYgKHRodW1ibmFpbEVscy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0dGh1bWJuYWlsRWxzLmZvckVhY2goKHRodW1iLCBpZHgpID0+IHtcblx0XHRcdFx0XHRcdHRodW1iLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmUtdGh1bWJuYWlsXCIsIGlkeCA9PT0gY3VycmVudEluZGV4KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRFbnRyeSA9IGZpbGVzW2N1cnJlbnRJbmRleF07XG5cdFx0XHRcdGxldCBbZmlsZU5hbWUsIGNhcHRpb25dID0gY3VycmVudEVudHJ5LnNwbGl0KFwifFwiKS5tYXAocyA9PiBzLnRyaW0oKSk7XG5cdFx0XHRcdGlmICghZmlsZU5hbWUuaW5jbHVkZXMoXCIuXCIpKSB7XG5cdFx0XHRcdFx0Y29uc3QgbWRGaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChmaWxlTmFtZSwgXCJcIik7XG5cdFx0XHRcdFx0aWYgKG1kRmlsZSAmJiBtZEZpbGUuZXh0ZW5zaW9uID09PSBcIm1kXCIpIHtcblx0XHRcdFx0XHRcdGZpbGVOYW1lID0gbWRGaWxlLnBhdGg7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IGZpbGVQYXRoID0gdGhpcy5nZXRNZWRpYVNvdXJjZShmaWxlTmFtZSk7XG5cblx0XHRcdFx0Ly8gQ3JlYXRlIGEgd3JhcHBlciBmb3IgdGhlIG5ldyBtZWRpYSBlbGVtZW50XG5cdFx0XHRcdGNvbnN0IG1lZGlhV3JhcHBlciA9IHNsaWRlckNvbnRhaW5lci5jcmVhdGVEaXYoXCJtZWRpYS13cmFwcGVyXCIpO1xuXG5cdFx0XHRcdGlmICgvXFwuKHBuZ3xqcGd8anBlZ3xnaWYpJC9pLnRlc3QoZmlsZU5hbWUpKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGNvbnN0IGNvbXByZXNzZWRVcmwgPSBhd2FpdCBjb21wcmVzc0ltYWdlKGZpbGVQYXRoLCA4MDAsIDYwMCwgMC43KTtcblx0XHRcdFx0XHRcdGNvbnN0IGltZyA9IG1lZGlhV3JhcHBlci5jcmVhdGVFbChcImltZ1wiLCB7IGF0dHI6IHsgc3JjOiBjb21wcmVzc2VkVXJsIH0gfSk7XG5cdFx0XHRcdFx0XHRpbWcuY2xhc3NMaXN0LmFkZChcInNsaWRlci1tZWRpYVwiKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IGltZyA9IG1lZGlhV3JhcHBlci5jcmVhdGVFbChcImltZ1wiLCB7IGF0dHI6IHsgc3JjOiBmaWxlUGF0aCB9IH0pO1xuXHRcdFx0XHRcdFx0aW1nLmNsYXNzTGlzdC5hZGQoXCJzbGlkZXItbWVkaWFcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKC9cXC4obXA0fHdlYm0pJC9pLnRlc3QoZmlsZU5hbWUpKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmlkZW8gPSBtZWRpYVdyYXBwZXIuY3JlYXRlRWwoXCJ2aWRlb1wiLCB7IGF0dHI6IHsgc3JjOiBmaWxlUGF0aCwgY29udHJvbHM6IFwidHJ1ZVwiIH0gfSk7XG5cdFx0XHRcdFx0aWYgKHNldHRpbmdzLmF1dG9wbGF5KSB2aWRlby5zZXRBdHRyaWJ1dGUoXCJhdXRvcGxheVwiLCBcInRydWVcIik7XG5cdFx0XHRcdFx0dmlkZW8uY2xhc3NMaXN0LmFkZChcInNsaWRlci1tZWRpYVwiKTtcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVWaXN1YWxpemVyKSB7XG5cdFx0XHRcdFx0XHRuZXcgVmlzdWFsaXplcih2aWRlbywgc2xpZGVyQ29udGFpbmVyLCB7XG5cdFx0XHRcdFx0XHRcdGNvbG9yOiB0aGlzLnNldHRpbmdzLnZpc3VhbGl6ZXJDb2xvcixcblx0XHRcdFx0XHRcdFx0aGVpZ2h0OiB0aGlzLnNldHRpbmdzLnZpc3VhbGl6ZXJIZWlnaHRcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmICgvXFwuKG1wM3xvZ2d8d2F2KSQvaS50ZXN0KGZpbGVOYW1lKSkge1xuXHRcdFx0XHRcdGNvbnN0IGF1ZGlvID0gbWVkaWFXcmFwcGVyLmNyZWF0ZUVsKFwiYXVkaW9cIiwgeyBhdHRyOiB7IHNyYzogZmlsZVBhdGgsIGNvbnRyb2xzOiBcInRydWVcIiB9IH0pO1xuXHRcdFx0XHRcdGF1ZGlvLmNsYXNzTGlzdC5hZGQoXCJzbGlkZXItbWVkaWFcIiwgXCJhdWRpby1tZWRpYVwiKTtcblx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5lbmFibGVWaXN1YWxpemVyKSB7XG5cdFx0XHRcdFx0XHRuZXcgVmlzdWFsaXplcihhdWRpbywgc2xpZGVyQ29udGFpbmVyLCB7XG5cdFx0XHRcdFx0XHRcdGNvbG9yOiB0aGlzLnNldHRpbmdzLnZpc3VhbGl6ZXJDb2xvcixcblx0XHRcdFx0XHRcdFx0aGVpZ2h0OiB0aGlzLnNldHRpbmdzLnZpc3VhbGl6ZXJIZWlnaHRcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmICgvXFwuKHBkZikkL2kudGVzdChmaWxlTmFtZSkpIHtcblx0XHRcdFx0XHRjb25zdCBpZnJhbWUgPSBtZWRpYVdyYXBwZXIuY3JlYXRlRWwoXCJpZnJhbWVcIiwgeyBhdHRyOiB7IHNyYzogZmlsZVBhdGgsIHdpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMCVcIiB9IH0pO1xuXHRcdFx0XHRcdGlmcmFtZS5jbGFzc0xpc3QuYWRkKFwic2xpZGVyLW1lZGlhXCIpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKC9cXC4obWQpJC9pLnRlc3QoZmlsZU5hbWUpKSB7XG5cdFx0XHRcdFx0Y29uc3QgYWJzdHJhY3RGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVOYW1lKTtcblx0XHRcdFx0XHRpZiAoYWJzdHJhY3RGaWxlICYmIFwiZXh0ZW5zaW9uXCIgaW4gYWJzdHJhY3RGaWxlKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5nZXRNYXJrZG93bkNvbnRlbnQoZmlsZU5hbWUpO1xuXHRcdFx0XHRcdFx0bWVkaWFXcmFwcGVyLmVtcHR5KCk7XG5cdFx0XHRcdFx0XHRhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlck1hcmtkb3duKGNvbnRlbnQsIG1lZGlhV3JhcHBlciwgYWJzdHJhY3RGaWxlLnBhdGgsIHRoaXMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zdCBsaW5rID0gbWVkaWFXcmFwcGVyLmNyZWF0ZUVsKFwiYVwiLCB7IHRleHQ6IFwiT3BlbiBGaWxlXCIsIGF0dHI6IHsgaHJlZjogZmlsZVBhdGgsIHRhcmdldDogXCJfYmxhbmtcIiB9IH0pO1xuXHRcdFx0XHRcdGxpbmsuY2xhc3NMaXN0LmFkZChcInNsaWRlci1tZWRpYVwiKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjYXB0aW9uKSB7XG5cdFx0XHRcdFx0aWYgKHNldHRpbmdzLmNhcHRpb25Nb2RlID09PSBcIm92ZXJsYXlcIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgY2FwRWwgPSBtZWRpYVdyYXBwZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBjYXB0aW9uIH0pO1xuXHRcdFx0XHRcdFx0Y2FwRWwuY2xhc3NMaXN0LmFkZChcInNsaWRlci1jYXB0aW9uLW92ZXJsYXlcIik7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnN0IGNhcEVsID0gY2FwdGlvbkNvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IGNhcHRpb24gfSk7XG5cdFx0XHRcdFx0XHRjYXBFbC5jbGFzc0xpc3QuYWRkKFwic2xpZGVyLWNhcHRpb25cIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHNldHRpbmdzLmludGVyYWN0aXZlTm90ZXMgJiYgbm90ZXNUZXh0YXJlYSkge1xuXHRcdFx0XHRcdGNvbnN0IG1lZGlhS2V5ID0gYCR7c2xpZGVySWR9LSR7ZmlsZXNbY3VycmVudEluZGV4XX1gO1xuXHRcdFx0XHRcdG5vdGVzVGV4dGFyZWEudmFsdWUgPSB0aGlzLm5vdGVzTWFuYWdlci5nZXROb3RlKG1lZGlhS2V5KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh0aGlzLnNldHRpbmdzLmVuYWJsZURyYXdpbmdBbm5vdGF0aW9uKSB7XG5cdFx0XHRcdFx0Y29uc3QgbWVkaWFLZXkgPSBgJHtzbGlkZXJJZH0tJHtmaWxlc1tjdXJyZW50SW5kZXhdfWA7XG5cdFx0XHRcdFx0dXBkYXRlRHJhd2luZ092ZXJsYXk/LihtZWRpYUtleSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGb3JjZSBhIHJlZmxvdyBzbyB0aGF0IHRoZSBuZXdseSBhZGRlZCBtZWRpYVdyYXBwZXIgcmVuZGVycyBpbiBpdHMgaW5pdGlhbCBzdGF0ZVxuXHRcdFx0XHR2b2lkIG1lZGlhV3JhcHBlci5vZmZzZXRXaWR0aDtcblxuXHRcdFx0XHQvLyBSZW1vdmUgdGhlIFwib3V0XCIgdHJhbnNpdGlvbiBjbGFzcyBhbmQgYWRkIHRoZSBcImluXCIgdHJhbnNpdGlvbiBjbGFzc1xuXHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcblx0XHRcdFx0XHRcInRyYW5zaXRpb24tZmFkZS1vdXRcIiwgXCJ0cmFuc2l0aW9uLXNsaWRlLW5leHQtb3V0XCIsIFwidHJhbnNpdGlvbi1zbGlkZS1wcmV2LW91dFwiLCBcInRyYW5zaXRpb24tem9vbS1vdXRcIixcblx0XHRcdFx0XHRcInRyYW5zaXRpb24tc2xpZGUtdXAtb3V0XCIsIFwidHJhbnNpdGlvbi1zbGlkZS1kb3duLW91dFwiLCBcInRyYW5zaXRpb24tZmxpcC1vdXRcIiwgXCJ0cmFuc2l0aW9uLWZsaXAtdmVydGljYWwtb3V0XCIsXG5cdFx0XHRcdFx0XCJ0cmFuc2l0aW9uLXJvdGF0ZS1vdXRcIiwgXCJ0cmFuc2l0aW9uLWJsdXItb3V0XCIsIFwidHJhbnNpdGlvbi1zcXVlZXplLW91dFwiXG5cdFx0XHRcdCk7XG5cdFx0XHRcdHN3aXRjaCAoc2V0dGluZ3MudHJhbnNpdGlvbkVmZmVjdCkge1xuXHRcdFx0XHRcdGNhc2UgXCJmYWRlXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tZmFkZS1pblwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzbGlkZVwiOlxuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY3VycmVudERpcmVjdGlvbiA9PT0gXCJuZXh0XCIgPyBcInRyYW5zaXRpb24tc2xpZGUtbmV4dC1pblwiIDogXCJ0cmFuc2l0aW9uLXNsaWRlLXByZXYtaW5cIik7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiem9vbVwiOlxuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLXpvb20taW5cIik7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwic2xpZGUtdXBcIjpcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHJhbnNpdGlvbi1zbGlkZS11cC1pblwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJzbGlkZS1kb3duXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tc2xpZGUtZG93bi1pblwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJmbGlwXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tZmxpcC1pblwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJmbGlwLXZlcnRpY2FsXCI6XG5cdFx0XHRcdFx0XHRzbGlkZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRyYW5zaXRpb24tZmxpcC12ZXJ0aWNhbC1pblwiKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJyb3RhdGVcIjpcblx0XHRcdFx0XHRcdHNsaWRlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidHJhbnNpdGlvbi1yb3RhdGUtaW5cIik7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiYmx1clwiOlxuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLWJsdXItaW5cIik7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwic3F1ZWV6ZVwiOlxuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLXNxdWVlemUtaW5cIik7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0c2xpZGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uLWZhZGUtaW5cIik7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHNldHRpbmdzLnRyYW5zaXRpb25EdXJhdGlvbik7XG5cdFx0fTtcblxuXHRcdGNvbnN0IHRocm90dGxlZFVwZGF0ZSA9IHRoaXMudGhyb3R0bGUodXBkYXRlTWVkaWFEaXNwbGF5LCAxMDApO1xuXHRcdGNvbnN0IGdvUHJldiA9ICgpID0+IHtcblx0XHRcdGN1cnJlbnREaXJlY3Rpb24gPSBcInByZXZcIjtcblx0XHRcdGN1cnJlbnRJbmRleCA9IChjdXJyZW50SW5kZXggLSAxICsgZmlsZXMubGVuZ3RoKSAlIGZpbGVzLmxlbmd0aDtcblx0XHRcdHRocm90dGxlZFVwZGF0ZSgpO1xuXHRcdH07XG5cdFx0Y29uc3QgZ29OZXh0ID0gKCkgPT4ge1xuXHRcdFx0Y3VycmVudERpcmVjdGlvbiA9IFwibmV4dFwiO1xuXHRcdFx0Y3VycmVudEluZGV4ID0gKGN1cnJlbnRJbmRleCArIDEpICUgZmlsZXMubGVuZ3RoO1xuXHRcdFx0dGhyb3R0bGVkVXBkYXRlKCk7XG5cdFx0fTtcblxuXHRcdHByZXZCdG4ub25jbGljayA9IGdvUHJldjtcblx0XHRuZXh0QnRuLm9uY2xpY2sgPSBnb05leHQ7XG5cblx0XHRzbGlkZXJDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsICgpID0+IHNsaWRlckNvbnRlbnQuZm9jdXMoKSk7XG5cdFx0c2xpZGVyQ29udGVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCAoKSA9PiBzbGlkZXJDb250ZW50LmJsdXIoKSk7XG5cdFx0c2xpZGVyQ29udGVudC50YWJJbmRleCA9IDA7XG5cdFx0c2xpZGVyQ29udGVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZ0LmtleSA9PT0gXCJBcnJvd0xlZnRcIikgZ29QcmV2KCk7XG5cdFx0XHRlbHNlIGlmIChldnQua2V5ID09PSBcIkFycm93UmlnaHRcIikgZ29OZXh0KCk7XG5cdFx0fSk7XG5cdFx0c2xpZGVyQ29udGVudC5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgKGV2dDogV2hlZWxFdmVudCkgPT4ge1xuXHRcdFx0aWYgKE1hdGguYWJzKGV2dC5kZWx0YVgpID4gTWF0aC5hYnMoZXZ0LmRlbHRhWSkpIHtcblx0XHRcdFx0aWYgKGV2dC5kZWx0YVggPiAzMCkge1xuXHRcdFx0XHRcdGdvTmV4dCgpO1xuXHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGV2dC5kZWx0YVggPCAtMzApIHtcblx0XHRcdFx0XHRnb1ByZXYoKTtcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGxldCB0b3VjaFN0YXJ0WCA9IDA7XG5cdFx0c2xpZGVyQ29udGVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCAoZXZ0OiBUb3VjaEV2ZW50KSA9PiB7XG5cdFx0XHR0b3VjaFN0YXJ0WCA9IGV2dC50b3VjaGVzWzBdLmNsaWVudFg7XG5cdFx0fSk7XG5cdFx0c2xpZGVyQ29udGVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgKGV2dDogVG91Y2hFdmVudCkgPT4ge1xuXHRcdFx0Y29uc3QgdG91Y2hFbmRYID0gZXZ0LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7XG5cdFx0XHRjb25zdCBkaWZmID0gdG91Y2hTdGFydFggLSB0b3VjaEVuZFg7XG5cdFx0XHRpZiAoTWF0aC5hYnMoZGlmZikgPiA1MCkgZGlmZiA+IDAgPyBnb05leHQoKSA6IGdvUHJldigpO1xuXHRcdH0pO1xuXG5cdFx0dGhyb3R0bGVkVXBkYXRlKCk7XG5cblx0XHRpZiAodGh1bWJuYWlsQ29udGFpbmVyKSB7XG5cdFx0XHR0aHVtYm5haWxDb250YWluZXIuZW1wdHkoKTtcblx0XHRcdGZpbGVzLmZvckVhY2goKGVudHJ5LCBpbmRleCkgPT4ge1xuXHRcdFx0XHRsZXQgW2ZpbGVOYW1lXSA9IGVudHJ5LnNwbGl0KFwifFwiKS5tYXAocyA9PiBzLnRyaW0oKSk7XG5cdFx0XHRcdGxldCB0aHVtYkVsOiBIVE1MRWxlbWVudDtcblx0XHRcdFx0aWYgKC9cXC4ocG5nfGpwZ3xqcGVnfGdpZikkL2kudGVzdChmaWxlTmFtZSkpIHtcblx0XHRcdFx0XHR0aHVtYkVsID0gdGh1bWJuYWlsQ29udGFpbmVyLmNyZWF0ZUVsKFwiaW1nXCIsIHtcblx0XHRcdFx0XHRcdGF0dHI6IHsgc3JjOiB0aGlzLmdldE1lZGlhU291cmNlKGZpbGVOYW1lKSB9LFxuXHRcdFx0XHRcdFx0Y2xzOiBcInRodW1ibmFpbFwiXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc3QgZXh0ID0gZmlsZU5hbWUuc3BsaXQoJy4nKS5wb3AoKT8udG9VcHBlckNhc2UoKSB8fCBcIkZJTEVcIjtcblx0XHRcdFx0XHR0aHVtYkVsID0gdGh1bWJuYWlsQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogZXh0IH0pO1xuXHRcdFx0XHRcdHRodW1iRWwuY2xhc3NMaXN0LmFkZChcInRodW1ibmFpbC1wbGFjZWhvbGRlclwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoc2V0dGluZ3MudGh1bWJuYWlsUG9zaXRpb24gPT09IFwibGVmdFwiIHx8IHNldHRpbmdzLnRodW1ibmFpbFBvc2l0aW9uID09PSBcInJpZ2h0XCIpIHtcblx0XHRcdFx0XHR0aHVtYkVsLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbC10aHVtYlwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0aHVtYkVsLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0Y3VycmVudEluZGV4ID0gaW5kZXg7XG5cdFx0XHRcdFx0dGhyb3R0bGVkVXBkYXRlKCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHRodW1ibmFpbEVscy5wdXNoKHRodW1iRWwpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKHNldHRpbmdzLnNsaWRlc2hvd1NwZWVkID4gMCkge1xuXHRcdFx0c2V0SW50ZXJ2YWwoZ29OZXh0LCBzZXR0aW5ncy5zbGlkZXNob3dTcGVlZCAqIDEwMDApO1xuXHRcdH1cblx0fVxufVxuXG5jbGFzcyBNZWRpYVNsaWRlclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBNZWRpYVNsaWRlclBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNZWRpYVNsaWRlclBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiTWVkaWEgU2xpZGVyIFBsdWdpbiBTZXR0aW5nc1wiIH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkVuYWJsZSBEcmF3aW5nIEFubm90YXRpb25cIilcblx0XHRcdC5zZXREZXNjKFwiVG9nZ2xlIHRvIGVuYWJsZSBkcmF3aW5nIGFubm90YXRpb25zIG9uIHRoZSBzbGlkZXIuIChEZWZhdWx0OiBvZmYpXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZURyYXdpbmdBbm5vdGF0aW9uKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRHJhd2luZ0Fubm90YXRpb24gPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoU2xpZGVycygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJFbmFibGUgVmlzdWFsaXplclwiKVxuXHRcdFx0LnNldERlc2MoXCJUb2dnbGUgdG8gZW5hYmxlIHdhdmUtbGlrZSB2aXN1YWxpemF0aW9uIGZvciBhdWRpby92aWRlbyBwbGF5YmFjay5cIilcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlVmlzdWFsaXplcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVZpc3VhbGl6ZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWZyZXNoU2xpZGVycygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJWaXN1YWxpemVyIENvbG9yXCIpXG5cdFx0XHQuc2V0RGVzYyhcIkNTUyBjb2xvciB2YWx1ZSBmb3IgdGhlIHZpc3VhbGl6ZXIgd2F2ZS5cIilcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudmlzdWFsaXplckNvbG9yKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudmlzdWFsaXplckNvbG9yID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVmcmVzaFNsaWRlcnMoKTtcblx0XHRcdFx0fSlcblx0XHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiVmlzdWFsaXplciBIZWlnaHRcIilcblx0XHRcdC5zZXREZXNjKFwiSGVpZ2h0IG9mIHRoZSB2aXN1YWxpemVyIChlLmcuLCAnNTBweCcpLlwiKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy52aXN1YWxpemVySGVpZ2h0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudmlzdWFsaXplckhlaWdodCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZnJlc2hTbGlkZXJzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG59XG4iLCAiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbXByZXNzSW1hZ2UoXHJcblx0aW1hZ2VVcmw6IHN0cmluZyxcclxuXHRtYXhXaWR0aDogbnVtYmVyID0gODAwLFxyXG5cdG1heEhlaWdodDogbnVtYmVyID0gNjAwLFxyXG5cdHF1YWxpdHk6IG51bWJlciA9IDAuN1xyXG4pOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcblx0XHRjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuXHRcdC8vIFRvIHN1cHBvcnQgaW1hZ2VzIGZyb20gb3RoZXIgZG9tYWlucywgc2V0IGNyb3NzT3JpZ2luLlxyXG5cdFx0aW1nLmNyb3NzT3JpZ2luID0gXCJBbm9ueW1vdXNcIjtcclxuXHRcdGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcblx0XHRcdGxldCB7IHdpZHRoLCBoZWlnaHQgfSA9IGltZztcclxuXHRcdFx0bGV0IG5ld1dpZHRoID0gd2lkdGg7XHJcblx0XHRcdGxldCBuZXdIZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG5cdFx0XHQvLyBDYWxjdWxhdGUgdGhlIHNjYWxpbmcgZmFjdG9yLlxyXG5cdFx0XHRpZiAod2lkdGggPiBtYXhXaWR0aCB8fCBoZWlnaHQgPiBtYXhIZWlnaHQpIHtcclxuXHRcdFx0XHRjb25zdCB3aWR0aFJhdGlvID0gbWF4V2lkdGggLyB3aWR0aDtcclxuXHRcdFx0XHRjb25zdCBoZWlnaHRSYXRpbyA9IG1heEhlaWdodCAvIGhlaWdodDtcclxuXHRcdFx0XHRjb25zdCByYXRpbyA9IE1hdGgubWluKHdpZHRoUmF0aW8sIGhlaWdodFJhdGlvKTtcclxuXHRcdFx0XHRuZXdXaWR0aCA9IHdpZHRoICogcmF0aW87XHJcblx0XHRcdFx0bmV3SGVpZ2h0ID0gaGVpZ2h0ICogcmF0aW87XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENyZWF0ZSBhIGNhbnZhcyBhbmQgZHJhdyB0aGUgcmVzaXplZCBpbWFnZS5cclxuXHRcdFx0Y29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuXHRcdFx0Y2FudmFzLndpZHRoID0gbmV3V2lkdGg7XHJcblx0XHRcdGNhbnZhcy5oZWlnaHQgPSBuZXdIZWlnaHQ7XHJcblx0XHRcdGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblx0XHRcdGlmICghY3R4KSB7XHJcblx0XHRcdFx0cmVqZWN0KFwiQ2FudmFzIGNvbnRleHQgbm90IGF2YWlsYWJsZVwiKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0Y3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIG5ld1dpZHRoLCBuZXdIZWlnaHQpO1xyXG5cdFx0XHRjb25zdCBkYXRhVXJsID0gY2FudmFzLnRvRGF0YVVSTChcImltYWdlL2pwZWdcIiwgcXVhbGl0eSk7XHJcblx0XHRcdHJlc29sdmUoZGF0YVVybCk7XHJcblx0XHR9O1xyXG5cdFx0aW1nLm9uZXJyb3IgPSAoZXJyKSA9PiByZWplY3QoZXJyKTtcclxuXHRcdGltZy5zcmMgPSBpbWFnZVVybDtcclxuXHR9KTtcclxufVxyXG4iLCAiaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE5vdGVzRGF0YSB7XHJcblx0W2tleTogc3RyaW5nXTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTm90ZXNNYW5hZ2VyIHtcclxuXHRwcml2YXRlIHBsdWdpbjogUGx1Z2luO1xyXG5cdHByaXZhdGUgZGF0YTogTm90ZXNEYXRhID0ge307XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBsb2FkZWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5sb2FkRGF0YSgpO1xyXG5cdFx0dGhpcy5kYXRhID0gbG9hZGVkIHx8IHt9O1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMuZGF0YSk7XHJcblx0fVxyXG5cclxuXHRnZXROb3RlKGtleTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiB0aGlzLmRhdGFba2V5XSB8fCBcIlwiO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2V0Tm90ZShrZXk6IHN0cmluZywgbm90ZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHR0aGlzLmRhdGFba2V5XSA9IG5vdGU7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmUoKTtcclxuXHR9XHJcblxyXG5cdC8vIFJlbW92ZXMgbm90ZXMgZm9yIHRoZSBzcGVjaWZpZWQgc2xpZGVyIHRoYXQgYXJlIG5vdCBpbiB0aGUgdmFsaWRGaWxlcyBsaXN0LlxyXG5cdGFzeW5jIGNsZWFudXBOb3Rlc0ZvclNsaWRlcihzbGlkZXJJZDogc3RyaW5nLCB2YWxpZEZpbGVzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Zm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcy5kYXRhKSkge1xyXG5cdFx0XHRpZiAoa2V5LnN0YXJ0c1dpdGgoYCR7c2xpZGVySWR9LWApKSB7XHJcblx0XHRcdFx0Ly8gRXh0cmFjdCB0aGUgbWVkaWEgZmlsZSBwb3J0aW9uIGZyb20gdGhlIGtleS5cclxuXHRcdFx0XHRjb25zdCBtZWRpYUZpbGUgPSBrZXkuc3Vic3RyaW5nKHNsaWRlcklkLmxlbmd0aCArIDEpO1xyXG5cdFx0XHRcdGlmICghdmFsaWRGaWxlcy5pbmNsdWRlcyhtZWRpYUZpbGUpKSB7XHJcblx0XHRcdFx0XHRkZWxldGUgdGhpcy5kYXRhW2tleV07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRhd2FpdCB0aGlzLnNhdmUoKTtcclxuXHR9XHJcbn1cclxuIiwgIi8vIGRyYXdpbmcudHNcclxuZXhwb3J0IHR5cGUgRHJhd2luZ1Rvb2wgPSBcImZyZWVoYW5kXCIgfCBcImxpbmVcIiB8IFwicmVjdGFuZ2xlXCIgfCBcImNpcmNsZVwiIHwgXCJlcmFzZXJcIiB8IFwibGFzZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBEcmF3aW5nQW5ub3RhdGlvbiB7XHJcblx0cHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuXHRwcml2YXRlIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cdHByaXZhdGUgdG9vbGJhcjogSFRNTERpdkVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBkcmF3aW5nOiBib29sZWFuID0gZmFsc2U7XHJcblx0cHJpdmF0ZSBzdGFydFg6IG51bWJlciA9IDA7XHJcblx0cHJpdmF0ZSBzdGFydFk6IG51bWJlciA9IDA7XHJcblx0Ly8gVGhlIGN1cnJlbnQgdG9vbCAoZm9yIGZyZWVoYW5kLCBlcmFzZXIsIGxhc2VyKSBhbmQgZm9yIGdlb21ldHJpYyB0b29scy5cclxuXHRwcml2YXRlIGN1cnJlbnRUb29sOiBEcmF3aW5nVG9vbCA9IFwiZnJlZWhhbmRcIjtcclxuXHRwcml2YXRlIGN1cnJlbnRHZW9tZXRyaWNUb29sOiBEcmF3aW5nVG9vbCA9IFwibGluZVwiO1xyXG5cclxuXHQvLyBQdWJsaWMgZHJhd2luZyBzZXR0aW5ncy5cclxuXHRwdWJsaWMgY29sb3I6IHN0cmluZyA9IFwiI0ZGMDAwMFwiOyAvLyBkZWZhdWx0IHJlZFxyXG5cdHB1YmxpYyBsaW5lV2lkdGg6IG51bWJlciA9IDI7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuXHRcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBhbmQgYXBwZW5kIGNhbnZhcyBvdmVybGF5LlxyXG5cdFx0dGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG5cdFx0Ly8gQXBwbHkgc3R5bGluZyB2aWEgQ1NTIGNsYXNzLlxyXG5cdFx0dGhpcy5jYW52YXMuY2xhc3NMaXN0LmFkZChcImRyYXdpbmctY2FudmFzXCIpO1xyXG5cdFx0dGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG5cdFx0dGhpcy5yZXNpemVDYW52YXMoKTtcclxuXHJcblx0XHRjb25zdCBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblx0XHRpZiAoIWN0eCkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGdldCAyRCBjb250ZXh0XCIpO1xyXG5cdFx0dGhpcy5jdHggPSBjdHg7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHRvb2xiYXIgb3ZlcmxheS5cclxuXHRcdHRoaXMudG9vbGJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHQvLyBBcHBseSBzdHlsaW5nIHZpYSBDU1MgY2xhc3MuXHJcblx0XHR0aGlzLnRvb2xiYXIuY2xhc3NMaXN0LmFkZChcImRyYXdpbmctdG9vbGJhclwiKTtcclxuXHRcdHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMudG9vbGJhcik7XHJcblx0XHR0aGlzLmNyZWF0ZVRvb2xiYXIoKTtcclxuXHJcblx0XHQvLyBCaW5kIHBvaW50ZXIgZXZlbnRzLlxyXG5cdFx0dGhpcy5lbmFibGVEcmF3aW5nKCk7XHJcblxyXG5cdFx0Ly8gVXBkYXRlIGNhbnZhcyBzaXplIG9uIHdpbmRvdyByZXNpemUuXHJcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLnJlc2l6ZUNhbnZhc0JvdW5kKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVzaXplQ2FudmFzQm91bmQgPSAoKTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLnJlc2l6ZUNhbnZhcygpO1xyXG5cdH07XHJcblxyXG5cdHByaXZhdGUgcmVzaXplQ2FudmFzKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jYW52YXMud2lkdGggPSB0aGlzLmNvbnRhaW5lci5jbGllbnRXaWR0aDtcclxuXHRcdHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuY29udGFpbmVyLmNsaWVudEhlaWdodDtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVzZXRUb29sYmFySGlnaGxpZ2h0cygpOiB2b2lkIHtcclxuXHRcdC8vIFJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBlYWNoIGJ1dHRvbi5cclxuXHRcdEFycmF5LmZyb20odGhpcy50b29sYmFyLmNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcclxuXHRcdFx0KGNoaWxkIGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLXRvb2xcIik7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgY3JlYXRlVG9vbGJhcigpOiB2b2lkIHtcclxuXHRcdC8vIEZyZWVoYW5kIGJ1dHRvbi5cclxuXHRcdGNvbnN0IGZyZWVoYW5kQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHRcdGZyZWVoYW5kQnRuLnRleHRDb250ZW50ID0gXCJcdTI3MEZcdUZFMEZcIjtcclxuXHRcdGZyZWVoYW5kQnRuLnRpdGxlID0gXCJGcmVlaGFuZFwiO1xyXG5cdFx0ZnJlZWhhbmRCdG4uY2xhc3NMaXN0LmFkZChcImRyYXdpbmctYnRuXCIsIFwiZnJlZWhhbmQtYnRuXCIpO1xyXG5cdFx0ZnJlZWhhbmRCdG4ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5jdXJyZW50VG9vbCA9IFwiZnJlZWhhbmRcIjtcclxuXHRcdFx0dGhpcy5yZXNldFRvb2xiYXJIaWdobGlnaHRzKCk7XHJcblx0XHRcdGZyZWVoYW5kQnRuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtdG9vbFwiKTtcclxuXHRcdH07XHJcblx0XHR0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoZnJlZWhhbmRCdG4pO1xyXG5cclxuXHRcdC8vIEdlb21ldHJpYyB0b29scyBkcm9wZG93bi5cclxuXHRcdGNvbnN0IGdlb21Ecm9wZG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkZXRhaWxzXCIpO1xyXG5cdFx0Z2VvbURyb3Bkb3duLmNsYXNzTGlzdC5hZGQoXCJkcmF3aW5nLWRyb3Bkb3duXCIpO1xyXG5cdFx0Ly8gU3VtbWFyeSBzaG93cyBjdXJyZW50IGdlb21ldHJpYyB0b29sIChkZWZhdWx0IFwibGluZVwiKS5cclxuXHRcdGNvbnN0IGdlb21TdW1tYXJ5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN1bW1hcnlcIik7XHJcblx0XHRnZW9tU3VtbWFyeS50ZXh0Q29udGVudCA9IFwiXHUyNzk2XCI7IC8vIGRlZmF1bHQgZm9yIGxpbmVcclxuXHRcdGdlb21TdW1tYXJ5LnRpdGxlID0gXCJHZW9tZXRyaWMgVG9vbHMgKExpbmUsIFJlY3QsIENpcmNsZSlcIjtcclxuXHRcdGdlb21TdW1tYXJ5LmNsYXNzTGlzdC5hZGQoXCJkcmF3aW5nLWRyb3Bkb3duLXN1bW1hcnlcIik7XHJcblx0XHRnZW9tRHJvcGRvd24uYXBwZW5kQ2hpbGQoZ2VvbVN1bW1hcnkpO1xyXG5cclxuXHRcdC8vIENvbnRhaW5lciBmb3IgZHJvcGRvd24gb3B0aW9ucy5cclxuXHRcdGNvbnN0IGdlb21PcHRpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdGdlb21PcHRpb25zLmNsYXNzTGlzdC5hZGQoXCJkcmF3aW5nLWRyb3Bkb3duLW9wdGlvbnNcIik7XHJcblxyXG5cdFx0Y29uc3QgZ2VvbVRvb2xzOiB7IHRvb2w6IERyYXdpbmdUb29sOyBpY29uOiBzdHJpbmc7IGxhYmVsOiBzdHJpbmcgfVtdID0gW1xyXG5cdFx0XHR7IHRvb2w6IFwibGluZVwiLCBpY29uOiBcIlx1Mjc5NlwiLCBsYWJlbDogXCJMaW5lXCIgfSxcclxuXHRcdFx0eyB0b29sOiBcInJlY3RhbmdsZVwiLCBpY29uOiBcIlx1MjVBRFwiLCBsYWJlbDogXCJSZWN0YW5nbGVcIiB9LFxyXG5cdFx0XHR7IHRvb2w6IFwiY2lyY2xlXCIsIGljb246IFwiXHUyNUVGXCIsIGxhYmVsOiBcIkNpcmNsZVwiIH0sXHJcblx0XHRdO1xyXG5cclxuXHRcdGdlb21Ub29scy5mb3JFYWNoKG9wdCA9PiB7XHJcblx0XHRcdGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcblx0XHRcdGJ0bi50ZXh0Q29udGVudCA9IG9wdC5pY29uO1xyXG5cdFx0XHRidG4udGl0bGUgPSBvcHQubGFiZWw7XHJcblx0XHRcdGJ0bi5jbGFzc0xpc3QuYWRkKFwiZHJhd2luZy1idG5cIiwgXCJnZW9tLXRvb2wtYnRuXCIpO1xyXG5cdFx0XHRidG4ub25jbGljayA9IChlKSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR0aGlzLmN1cnJlbnRUb29sID0gb3B0LnRvb2w7XHJcblx0XHRcdFx0dGhpcy5jdXJyZW50R2VvbWV0cmljVG9vbCA9IG9wdC50b29sO1xyXG5cdFx0XHRcdGdlb21TdW1tYXJ5LnRleHRDb250ZW50ID0gb3B0Lmljb247XHJcblx0XHRcdFx0Z2VvbURyb3Bkb3duLnJlbW92ZUF0dHJpYnV0ZShcIm9wZW5cIik7XHJcblx0XHRcdH07XHJcblx0XHRcdGdlb21PcHRpb25zLmFwcGVuZENoaWxkKGJ0bik7XHJcblx0XHR9KTtcclxuXHRcdGdlb21Ecm9wZG93bi5hcHBlbmRDaGlsZChnZW9tT3B0aW9ucyk7XHJcblx0XHR0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoZ2VvbURyb3Bkb3duKTtcclxuXHJcblx0XHQvLyBFcmFzZXIgYnV0dG9uLlxyXG5cdFx0Y29uc3QgZXJhc2VyQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHRcdGVyYXNlckJ0bi50ZXh0Q29udGVudCA9IFwiXHVEODNFXHVEREZEXCI7XHJcblx0XHRlcmFzZXJCdG4udGl0bGUgPSBcIkVyYXNlclwiO1xyXG5cdFx0ZXJhc2VyQnRuLmNsYXNzTGlzdC5hZGQoXCJkcmF3aW5nLWJ0blwiLCBcImVyYXNlci1idG5cIik7XHJcblx0XHRlcmFzZXJCdG4ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5jdXJyZW50VG9vbCA9IFwiZXJhc2VyXCI7XHJcblx0XHRcdHRoaXMucmVzZXRUb29sYmFySGlnaGxpZ2h0cygpO1xyXG5cdFx0XHRlcmFzZXJCdG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZS10b29sXCIpO1xyXG5cdFx0fTtcclxuXHRcdHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChlcmFzZXJCdG4pO1xyXG5cclxuXHRcdC8vIExhc2VyIGJ1dHRvbi5cclxuXHRcdGNvbnN0IGxhc2VyQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHRcdGxhc2VyQnRuLnRleHRDb250ZW50ID0gXCJcdUQ4M0RcdUREMjZcIjtcclxuXHRcdGxhc2VyQnRuLnRpdGxlID0gXCJMYXNlciAodGVtcG9yYXJ5KVwiO1xyXG5cdFx0bGFzZXJCdG4uY2xhc3NMaXN0LmFkZChcImRyYXdpbmctYnRuXCIsIFwibGFzZXItYnRuXCIpO1xyXG5cdFx0bGFzZXJCdG4ub25jbGljayA9ICgpID0+IHtcclxuXHRcdFx0dGhpcy5jdXJyZW50VG9vbCA9IFwibGFzZXJcIjtcclxuXHRcdFx0dGhpcy5yZXNldFRvb2xiYXJIaWdobGlnaHRzKCk7XHJcblx0XHRcdGxhc2VyQnRuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtdG9vbFwiKTtcclxuXHRcdH07XHJcblx0XHR0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQobGFzZXJCdG4pO1xyXG5cclxuXHRcdC8vIENvbG9yIHBpY2tlci5cclxuXHRcdGNvbnN0IGNvbG9ySW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcblx0XHRjb2xvcklucHV0LnR5cGUgPSBcImNvbG9yXCI7XHJcblx0XHRjb2xvcklucHV0LnZhbHVlID0gdGhpcy5jb2xvcjtcclxuXHRcdGNvbG9ySW5wdXQuY2xhc3NMaXN0LmFkZChcImRyYXdpbmctY29sb3ItaW5wdXRcIik7XHJcblx0XHRjb2xvcklucHV0Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmNvbG9yID0gY29sb3JJbnB1dC52YWx1ZTtcclxuXHRcdH07XHJcblx0XHR0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoY29sb3JJbnB1dCk7XHJcblxyXG5cdFx0Ly8gTGluZSB3aWR0aCBpbnB1dC5cclxuXHRcdGNvbnN0IHdpZHRoSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcblx0XHR3aWR0aElucHV0LnR5cGUgPSBcIm51bWJlclwiO1xyXG5cdFx0d2lkdGhJbnB1dC5taW4gPSBcIjFcIjtcclxuXHRcdHdpZHRoSW5wdXQubWF4ID0gXCIxMFwiO1xyXG5cdFx0d2lkdGhJbnB1dC52YWx1ZSA9IHRoaXMubGluZVdpZHRoLnRvU3RyaW5nKCk7XHJcblx0XHR3aWR0aElucHV0LmNsYXNzTGlzdC5hZGQoXCJkcmF3aW5nLWxpbmV3aWR0aC1pbnB1dFwiKTtcclxuXHRcdHdpZHRoSW5wdXQub25jaGFuZ2UgPSAoKSA9PiB7XHJcblx0XHRcdHRoaXMubGluZVdpZHRoID0gTnVtYmVyKHdpZHRoSW5wdXQudmFsdWUpO1xyXG5cdFx0fTtcclxuXHRcdHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZCh3aWR0aElucHV0KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgaGFuZGxlUG9pbnRlckRvd24gPSAoZTogUG9pbnRlckV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHR0aGlzLmRyYXdpbmcgPSB0cnVlO1xyXG5cdFx0dGhpcy5zdGFydFggPSBlLm9mZnNldFg7XHJcblx0XHR0aGlzLnN0YXJ0WSA9IGUub2Zmc2V0WTtcclxuXHRcdC8vIEZvciBmcmVlaGFuZCwgZXJhc2VyLCBhbmQgbGFzZXIsIGJlZ2luIGEgcGF0aCBpbW1lZGlhdGVseS5cclxuXHRcdGlmICh0aGlzLmN1cnJlbnRUb29sID09PSBcImZyZWVoYW5kXCIgfHwgdGhpcy5jdXJyZW50VG9vbCA9PT0gXCJlcmFzZXJcIiB8fCB0aGlzLmN1cnJlbnRUb29sID09PSBcImxhc2VyXCIpIHtcclxuXHRcdFx0dGhpcy5jdHguYmVnaW5QYXRoKCk7XHJcblx0XHRcdHRoaXMuY3R4Lm1vdmVUbyh0aGlzLnN0YXJ0WCwgdGhpcy5zdGFydFkpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHByaXZhdGUgaGFuZGxlUG9pbnRlck1vdmUgPSAoZTogUG9pbnRlckV2ZW50KTogdm9pZCA9PiB7XHJcblx0XHRpZiAoIXRoaXMuZHJhd2luZykgcmV0dXJuO1xyXG5cdFx0Y29uc3QgY3VycmVudFggPSBlLm9mZnNldFg7XHJcblx0XHRjb25zdCBjdXJyZW50WSA9IGUub2Zmc2V0WTtcclxuXHRcdGlmICh0aGlzLmN1cnJlbnRUb29sID09PSBcImZyZWVoYW5kXCIpIHtcclxuXHRcdFx0dGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcclxuXHRcdFx0dGhpcy5jdHgubGluZUNhcCA9IFwicm91bmRcIjtcclxuXHRcdFx0dGhpcy5jdHgubGluZVRvKGN1cnJlbnRYLCBjdXJyZW50WSk7XHJcblx0XHRcdHRoaXMuY3R4LnN0cm9rZSgpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRUb29sID09PSBcImxhc2VyXCIpIHtcclxuXHRcdFx0dGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lV2lkdGggPSAxO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lQ2FwID0gXCJyb3VuZFwiO1xyXG5cdFx0XHR0aGlzLmN0eC5zaGFkb3dDb2xvciA9IHRoaXMuY29sb3I7XHJcblx0XHRcdHRoaXMuY3R4LnNoYWRvd0JsdXIgPSAxMDtcclxuXHRcdFx0dGhpcy5jdHgubGluZVRvKGN1cnJlbnRYLCBjdXJyZW50WSk7XHJcblx0XHRcdHRoaXMuY3R4LnN0cm9rZSgpO1xyXG5cdFx0XHR0aGlzLmN0eC5zaGFkb3dCbHVyID0gMDtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50VG9vbCA9PT0gXCJlcmFzZXJcIikge1xyXG5cdFx0XHR0aGlzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcImRlc3RpbmF0aW9uLW91dFwiO1xyXG5cdFx0XHR0aGlzLmN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aCAqIDU7XHJcblx0XHRcdHRoaXMuY3R4LmxpbmVUbyhjdXJyZW50WCwgY3VycmVudFkpO1xyXG5cdFx0XHR0aGlzLmN0eC5zdHJva2UoKTtcclxuXHRcdFx0dGhpcy5jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gXCJzb3VyY2Utb3ZlclwiO1xyXG5cdFx0fVxyXG5cdFx0Ly8gRm9yIGdlb21ldHJpYyB0b29scywgZHJhd2luZyBpcyBkZWZlcnJlZCB1bnRpbCBwb2ludGVyIHVwLlxyXG5cdH07XHJcblxyXG5cdHByaXZhdGUgaGFuZGxlUG9pbnRlclVwID0gKGU6IFBvaW50ZXJFdmVudCk6IHZvaWQgPT4ge1xyXG5cdFx0aWYgKCF0aGlzLmRyYXdpbmcpIHJldHVybjtcclxuXHRcdHRoaXMuZHJhd2luZyA9IGZhbHNlO1xyXG5cdFx0Y29uc3QgZW5kWCA9IGUub2Zmc2V0WDtcclxuXHRcdGNvbnN0IGVuZFkgPSBlLm9mZnNldFk7XHJcblx0XHR0aGlzLmN0eC5zdHJva2VTdHlsZSA9IHRoaXMuY3VycmVudFRvb2wgPT09IFwiZXJhc2VyXCIgPyBcInJnYmEoMCwwLDAsMSlcIiA6IHRoaXMuY29sb3I7XHJcblx0XHR0aGlzLmN0eC5saW5lV2lkdGggPSB0aGlzLmxpbmVXaWR0aDtcclxuXHRcdHRoaXMuY3R4LmxpbmVDYXAgPSBcInJvdW5kXCI7XHJcblxyXG5cdFx0aWYgKHRoaXMuY3VycmVudFRvb2wgPT09IFwibGluZVwiKSB7XHJcblx0XHRcdHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG5cdFx0XHR0aGlzLmN0eC5tb3ZlVG8odGhpcy5zdGFydFgsIHRoaXMuc3RhcnRZKTtcclxuXHRcdFx0dGhpcy5jdHgubGluZVRvKGVuZFgsIGVuZFkpO1xyXG5cdFx0XHR0aGlzLmN0eC5zdHJva2UoKTtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5jdXJyZW50VG9vbCA9PT0gXCJyZWN0YW5nbGVcIikge1xyXG5cdFx0XHRjb25zdCByZWN0V2lkdGggPSBlbmRYIC0gdGhpcy5zdGFydFg7XHJcblx0XHRcdGNvbnN0IHJlY3RIZWlnaHQgPSBlbmRZIC0gdGhpcy5zdGFydFk7XHJcblx0XHRcdHRoaXMuY3R4LnN0cm9rZVJlY3QodGhpcy5zdGFydFgsIHRoaXMuc3RhcnRZLCByZWN0V2lkdGgsIHJlY3RIZWlnaHQpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmN1cnJlbnRUb29sID09PSBcImNpcmNsZVwiKSB7XHJcblx0XHRcdGNvbnN0IHJhZGl1cyA9IE1hdGguc3FydChNYXRoLnBvdyhlbmRYIC0gdGhpcy5zdGFydFgsIDIpICsgTWF0aC5wb3coZW5kWSAtIHRoaXMuc3RhcnRZLCAyKSk7XHJcblx0XHRcdHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG5cdFx0XHR0aGlzLmN0eC5hcmModGhpcy5zdGFydFgsIHRoaXMuc3RhcnRZLCByYWRpdXMsIDAsIE1hdGguUEkgKiAyKTtcclxuXHRcdFx0dGhpcy5jdHguc3Ryb2tlKCk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuY3VycmVudFRvb2wgPT09IFwibGFzZXJcIikge1xyXG5cdFx0XHQvLyBGb3IgbGFzZXIsIGNsZWFyIHRoZSBkcmF3biBsaW5lIGFmdGVyIGEgYnJpZWYgZGVsYXkuXHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuY2xlYXIoKTtcclxuXHRcdFx0fSwgMjAwKTtcclxuXHRcdH1cclxuXHRcdC8vIEZvciBmcmVlaGFuZCBhbmQgZXJhc2VyLCBub3RoaW5nIGV4dHJhIGlzIG5lZWRlZC5cclxuXHR9O1xyXG5cclxuXHRwdWJsaWMgZW5hYmxlRHJhd2luZygpOiB2b2lkIHtcclxuXHRcdHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB0aGlzLmhhbmRsZVBvaW50ZXJEb3duKTtcclxuXHRcdHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlKTtcclxuXHRcdHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgdGhpcy5oYW5kbGVQb2ludGVyVXApO1xyXG5cdFx0dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJvdXRcIiwgdGhpcy5oYW5kbGVQb2ludGVyVXApO1xyXG5cdH1cclxuXHJcblx0cHVibGljIGRpc2FibGVEcmF3aW5nKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMuaGFuZGxlUG9pbnRlckRvd24pO1xyXG5cdFx0dGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIHRoaXMuaGFuZGxlUG9pbnRlck1vdmUpO1xyXG5cdFx0dGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCB0aGlzLmhhbmRsZVBvaW50ZXJVcCk7XHJcblx0XHR0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm91dFwiLCB0aGlzLmhhbmRsZVBvaW50ZXJVcCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgY2xlYXIoKTogdm9pZCB7XHJcblx0XHR0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2V0QW5ub3RhdGlvbigpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuY2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xyXG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZXNpemVDYW52YXNCb3VuZCk7XHJcblx0XHR0aGlzLmRpc2FibGVEcmF3aW5nKCk7XHJcblx0XHRpZiAodGhpcy50b29sYmFyLnBhcmVudE5vZGUpIHRoaXMudG9vbGJhci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudG9vbGJhcik7XHJcblx0XHRpZiAodGhpcy5jYW52YXMucGFyZW50Tm9kZSkgdGhpcy5jYW52YXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmNhbnZhcyk7XHJcblx0fVxyXG59XHJcbiIsICJleHBvcnQgaW50ZXJmYWNlIFZpc3VhbGl6ZXJPcHRpb25zIHtcclxuXHQvKiogSGVpZ2h0IG9mIHRoZSB2aXN1YWxpemVyIGNhbnZhcyAoZS5nLiwgXCI4MHB4XCIpICovXHJcblx0aGVpZ2h0Pzogc3RyaW5nO1xyXG5cdC8qKiBTZWxlY3QgdGhlIGdyYWRpZW50IHR5cGU6IFwiYmx1ZS1yZWRcIiwgXCJyYWluYm93XCIsIG9yIFwiY3VzdG9tXCIgKi9cclxuXHRncmFkaWVudFR5cGU/OiBcImJsdWUtcmVkXCIgfCBcInJhaW5ib3dcIiB8IFwiY3VzdG9tXCI7XHJcblx0LyoqIElmIHVzaW5nIGEgY3VzdG9tIGdyYWRpZW50LCBzdXBwbHkgYW4gYXJyYXkgb2YgQ1NTIGNvbG9yIHN0cmluZ3MgKi9cclxuXHRjdXN0b21Db2xvcnM/OiBzdHJpbmdbXTtcclxuICB9XHJcbiAgXHJcbiAgZXhwb3J0IGNsYXNzIFZpc3VhbGl6ZXIge1xyXG5cdHByaXZhdGUgbWVkaWFFbGVtZW50OiBIVE1MTWVkaWFFbGVtZW50O1xyXG5cdHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIG9wdGlvbnM6IFZpc3VhbGl6ZXJPcHRpb25zO1xyXG5cdHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuXHRwcml2YXRlIGNhbnZhc0N0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cdHByaXZhdGUgYXVkaW9Db250ZXh0OiBBdWRpb0NvbnRleHQ7XHJcblx0cHJpdmF0ZSBhbmFseXNlcjogQW5hbHlzZXJOb2RlO1xyXG5cdHByaXZhdGUgc291cmNlOiBNZWRpYUVsZW1lbnRBdWRpb1NvdXJjZU5vZGU7XHJcblx0cHJpdmF0ZSBhbmltYXRpb25GcmFtZUlkOiBudW1iZXI7XHJcbiAgXHJcblx0Y29uc3RydWN0b3IobWVkaWFFbGVtZW50OiBIVE1MTWVkaWFFbGVtZW50LCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBWaXN1YWxpemVyT3B0aW9ucyA9IHt9KSB7XHJcblx0ICB0aGlzLm1lZGlhRWxlbWVudCA9IG1lZGlhRWxlbWVudDtcclxuXHQgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG5cdCAgLy8gU2V0IGRlZmF1bHQgb3B0aW9ucyB3aXRoIGEgZmFsbGJhY2sgaGVpZ2h0LlxyXG5cdCAgdGhpcy5vcHRpb25zID0ge1xyXG5cdFx0aGVpZ2h0OiBvcHRpb25zLmhlaWdodCA/PyBcIjEwMHB4XCIsXHJcblx0XHRncmFkaWVudFR5cGU6IG9wdGlvbnMuZ3JhZGllbnRUeXBlID8/IFwiYmx1ZS1yZWRcIixcclxuXHRcdGN1c3RvbUNvbG9yczogb3B0aW9ucy5jdXN0b21Db2xvcnMsXHJcblx0ICB9O1xyXG4gIFxyXG5cdCAgLy8gVXNlIGEgbG9jYWwgY29uc3RhbnQgZm9yIGhlaWdodCwgZW5zdXJpbmcgaXQgaXMgYWx3YXlzIGEgc3RyaW5nLlxyXG5cdCAgY29uc3QgcmVzb2x2ZWRIZWlnaHQ6IHN0cmluZyA9IHRoaXMub3B0aW9ucy5oZWlnaHQgPz8gXCIxMDBweFwiO1xyXG4gIFxyXG5cdCAgLy8gQ3JlYXRlIGEgY2FudmFzIG92ZXJsYXkuXHJcblx0ICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcblx0ICB0aGlzLmNhbnZhcy5jbGFzc0xpc3QuYWRkKFwidmlzdWFsaXplci1jYW52YXNcIik7XHJcblx0ICAvLyBBZGQgYSBoZWlnaHQtc3BlY2lmaWMgY2xhc3MgZm9yIENTUyBzdHlsaW5nLlxyXG5cdCAgY29uc3QgaGVpZ2h0VmFsdWUgPSByZXNvbHZlZEhlaWdodC5yZXBsYWNlKFwicHhcIiwgXCJcIik7XHJcblx0ICB0aGlzLmNhbnZhcy5jbGFzc0xpc3QuYWRkKGB2aXN1YWxpemVyLWhlaWdodC0ke2hlaWdodFZhbHVlfWApO1xyXG4gIFxyXG5cdCAgLy8gU2V0IGV4cGxpY2l0IGRpbWVuc2lvbnMgZm9yIHRoZSBjYW52YXMgZHJhd2luZyBidWZmZXIuXHJcblx0ICB0aGlzLmNhbnZhcy53aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aDtcclxuXHQgIC8vIFBhcnNlIHRoZSBoZWlnaHQgb3B0aW9uIChpbiBwaXhlbHMpIGZvciB0aGUgZHJhd2luZyByZXNvbHV0aW9uLlxyXG5cdCAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gcGFyc2VJbnQocmVzb2x2ZWRIZWlnaHQsIDEwKTtcclxuXHQgIHRoaXMuY2FudmFzQ3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpITtcclxuXHQgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNhbnZhcyk7XHJcbiAgXHJcblx0ICAvLyBTZXQgdXAgdGhlIGF1ZGlvIGNvbnRleHQgYW5kIGFuYWx5c2VyLlxyXG5cdCAgdGhpcy5hdWRpb0NvbnRleHQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgKHdpbmRvdyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dCkoKTtcclxuXHQgIHRoaXMuc291cmNlID0gdGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFFbGVtZW50U291cmNlKHRoaXMubWVkaWFFbGVtZW50KTtcclxuXHQgIHRoaXMuYW5hbHlzZXIgPSB0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVBbmFseXNlcigpO1xyXG5cdCAgdGhpcy5hbmFseXNlci5mZnRTaXplID0gNTEyO1xyXG5cdCAgdGhpcy5hbmFseXNlci5zbW9vdGhpbmdUaW1lQ29uc3RhbnQgPSAwLjA1O1xyXG5cdCAgdGhpcy5hbmFseXNlci5taW5EZWNpYmVscyA9IC0xMDA7XHJcblx0ICB0aGlzLmFuYWx5c2VyLm1heERlY2liZWxzID0gLTMwO1xyXG5cdCAgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmFuYWx5c2VyKTtcclxuXHQgIHRoaXMuYW5hbHlzZXIuY29ubmVjdCh0aGlzLmF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XHJcbiAgXHJcblx0ICB0aGlzLmFuaW1hdGlvbkZyYW1lSWQgPSAwO1xyXG5cdCAgdGhpcy5kcmF3KCk7XHJcblx0fVxyXG4gIFxyXG5cdHByaXZhdGUgZHJhdygpIHtcclxuXHQgIGNvbnN0IGJ1ZmZlckxlbmd0aCA9IHRoaXMuYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQ7XHJcblx0ICBjb25zdCBkYXRhQXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXJMZW5ndGgpO1xyXG5cdCAgY29uc3QgaGFsZkJpbnMgPSBNYXRoLmZsb29yKGJ1ZmZlckxlbmd0aCAvIDIpO1xyXG5cdCAgY29uc3QgZ2FwID0gMjsgLy8gR2FwIGJldHdlZW4gYmFycy5cclxuXHQgIGNvbnN0IGNhbnZhc1dpZHRoID0gdGhpcy5jYW52YXMud2lkdGg7XHJcblx0ICBjb25zdCBjYW52YXNIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XHJcblx0ICBjb25zdCBtaWRYID0gY2FudmFzV2lkdGggLyAyO1xyXG5cdCAgY29uc3QgYmFzZWxpbmUgPSBjYW52YXNIZWlnaHQgLyAyO1xyXG5cdCAgY29uc3Qgc2xvdFdpZHRoID0gbWlkWCAvIGhhbGZCaW5zO1xyXG5cdCAgY29uc3QgYmFyV2lkdGggPSBzbG90V2lkdGggKiAwLjY7XHJcbiAgXHJcblx0ICBjb25zdCBkcmF3QmFycyA9ICgpID0+IHtcclxuXHRcdHRoaXMuYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEoZGF0YUFycmF5KTtcclxuXHRcdHRoaXMuY2FudmFzQ3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KTtcclxuICBcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgaGFsZkJpbnM7IGkrKykge1xyXG5cdFx0ICBjb25zdCByYXdJbnRlbnNpdHkgPSBkYXRhQXJyYXlbaV0gLyAyNTU7XHJcblx0XHQgIGNvbnN0IGludGVuc2l0eSA9IE1hdGgucG93KHJhd0ludGVuc2l0eSwgMik7XHJcblx0XHQgIGNvbnN0IGJhckhlaWdodCA9IGludGVuc2l0eSAqIGJhc2VsaW5lO1xyXG5cdFx0ICBsZXQgZ3JhZGllbnQ6IENhbnZhc0dyYWRpZW50O1xyXG4gIFxyXG5cdFx0ICBpZiAodGhpcy5vcHRpb25zLmdyYWRpZW50VHlwZSA9PT0gXCJibHVlLXJlZFwiKSB7XHJcblx0XHRcdGdyYWRpZW50ID0gdGhpcy5jYW52YXNDdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgYmFzZWxpbmUsIDAsIGJhc2VsaW5lIC0gYmFySGVpZ2h0KTtcclxuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIFwiaHNsKDI0MCw4MCUsNDAlKVwiKTtcclxuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwiaHNsKDAsOTAlLDUwJSlcIik7XHJcblx0XHQgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmdyYWRpZW50VHlwZSA9PT0gXCJyYWluYm93XCIpIHtcclxuXHRcdFx0Z3JhZGllbnQgPSB0aGlzLmNhbnZhc0N0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCBiYXNlbGluZSwgMCwgYmFzZWxpbmUgLSBiYXJIZWlnaHQpO1xyXG5cdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgXCJoc2woMjQwLDEwMCUsNTAlKVwiKTsgIC8vIGJsdWVcclxuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuMjUsIFwiaHNsKDE4MCwxMDAlLDUwJSlcIik7IC8vIGN5YW5cclxuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNSwgXCJoc2woMTIwLDEwMCUsNTAlKVwiKTsgIC8vIGdyZWVuXHJcblx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjc1LCBcImhzbCg2MCwxMDAlLDUwJSlcIik7ICAvLyB5ZWxsb3dcclxuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwiaHNsKDAsMTAwJSw1MCUpXCIpOyAgICAgIC8vIHJlZFxyXG5cdFx0ICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5ncmFkaWVudFR5cGUgPT09IFwiY3VzdG9tXCIgJiYgdGhpcy5vcHRpb25zLmN1c3RvbUNvbG9ycyAmJiB0aGlzLm9wdGlvbnMuY3VzdG9tQ29sb3JzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Z3JhZGllbnQgPSB0aGlzLmNhbnZhc0N0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCBiYXNlbGluZSwgMCwgYmFzZWxpbmUgLSBiYXJIZWlnaHQpO1xyXG5cdFx0XHRjb25zdCBuID0gdGhpcy5vcHRpb25zLmN1c3RvbUNvbG9ycy5sZW5ndGg7XHJcblx0XHRcdGZvciAobGV0IGogPSAwOyBqIDwgbjsgaisrKSB7XHJcblx0XHRcdCAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKGogLyAobiAtIDEpLCB0aGlzLm9wdGlvbnMuY3VzdG9tQ29sb3JzW2pdKTtcclxuXHRcdFx0fVxyXG5cdFx0ICB9IGVsc2Uge1xyXG5cdFx0XHQvLyBGYWxsYmFjayB0byByYWluYm93IGdyYWRpZW50LlxyXG5cdFx0XHRncmFkaWVudCA9IHRoaXMuY2FudmFzQ3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIGJhc2VsaW5lLCAwLCBiYXNlbGluZSAtIGJhckhlaWdodCk7XHJcblx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCBcImhzbCgyNDAsMTAwJSw1MCUpXCIpO1xyXG5cdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoMC4yNSwgXCJoc2woMTgwLDEwMCUsNTAlKVwiKTtcclxuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNSwgXCJoc2woMTIwLDEwMCUsNTAlKVwiKTtcclxuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNzUsIFwiaHNsKDYwLDEwMCUsNTAlKVwiKTtcclxuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsIFwiaHNsKDAsMTAwJSw1MCUpXCIpO1xyXG5cdFx0ICB9XHJcbiAgXHJcblx0XHQgIC8vIENhbGN1bGF0ZSBzeW1tZXRyaWMgcG9zaXRpb25zIGZvciB0aGUgbGVmdCBhbmQgcmlnaHQgYmFycy5cclxuXHRcdCAgY29uc3QgeFJpZ2h0ID0gbWlkWCArIGkgKiAoYmFyV2lkdGggKyBnYXApO1xyXG5cdFx0ICBjb25zdCB4TGVmdCA9IG1pZFggLSAoaSArIDEpICogKGJhcldpZHRoICsgZ2FwKTtcclxuICBcclxuXHRcdCAgLy8gRHJhdyB0aGUgYmFycyBmcm9tIHRoZSBiYXNlbGluZSB1cHdhcmQuXHJcblx0XHQgIHRoaXMuY2FudmFzQ3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xyXG5cdFx0ICB0aGlzLmNhbnZhc0N0eC5maWxsUmVjdCh4UmlnaHQsIGJhc2VsaW5lIC0gYmFySGVpZ2h0LCBiYXJXaWR0aCwgYmFySGVpZ2h0KTtcclxuXHRcdCAgdGhpcy5jYW52YXNDdHguZmlsbFJlY3QoeExlZnQsIGJhc2VsaW5lIC0gYmFySGVpZ2h0LCBiYXJXaWR0aCwgYmFySGVpZ2h0KTtcclxuXHRcdH1cclxuXHRcdHRoaXMuYW5pbWF0aW9uRnJhbWVJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3QmFycyk7XHJcblx0ICB9O1xyXG5cdCAgZHJhd0JhcnMoKTtcclxuXHR9XHJcbiAgXHJcblx0cHVibGljIGRlc3Ryb3koKSB7XHJcblx0ICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkZyYW1lSWQpO1xyXG5cdCAgdGhpcy5jYW52YXMucmVtb3ZlKCk7XHJcblx0ICB0aGlzLnNvdXJjZS5kaXNjb25uZWN0KCk7XHJcblx0ICB0aGlzLmFuYWx5c2VyLmRpc2Nvbm5lY3QoKTtcclxuXHQgIGlmICh0aGlzLmF1ZGlvQ29udGV4dC5zdGF0ZSAhPT0gXCJjbG9zZWRcIikge1xyXG5cdFx0dGhpcy5hdWRpb0NvbnRleHQuY2xvc2UoKTtcclxuXHQgIH1cclxuXHR9XHJcbiAgfVxyXG4gICJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQSxzQkFBNEg7OztBQ0Q1SCxlQUFzQixjQUNyQixVQUNBLFdBQW1CLEtBQ25CLFlBQW9CLEtBQ3BCLFVBQWtCLEtBQ0E7QUFDbEIsU0FBTyxJQUFJLFFBQVEsQ0FBQyxTQUFTLFdBQVc7QUFDdkMsVUFBTSxNQUFNLElBQUksTUFBTTtBQUV0QixRQUFJLGNBQWM7QUFDbEIsUUFBSSxTQUFTLE1BQU07QUFDbEIsVUFBSSxFQUFFLE9BQU8sT0FBTyxJQUFJO0FBQ3hCLFVBQUksV0FBVztBQUNmLFVBQUksWUFBWTtBQUdoQixVQUFJLFFBQVEsWUFBWSxTQUFTLFdBQVc7QUFDM0MsY0FBTSxhQUFhLFdBQVc7QUFDOUIsY0FBTSxjQUFjLFlBQVk7QUFDaEMsY0FBTSxRQUFRLEtBQUssSUFBSSxZQUFZLFdBQVc7QUFDOUMsbUJBQVcsUUFBUTtBQUNuQixvQkFBWSxTQUFTO0FBQUEsTUFDdEI7QUFHQSxZQUFNLFNBQVMsU0FBUyxjQUFjLFFBQVE7QUFDOUMsYUFBTyxRQUFRO0FBQ2YsYUFBTyxTQUFTO0FBQ2hCLFlBQU0sTUFBTSxPQUFPLFdBQVcsSUFBSTtBQUNsQyxVQUFJLENBQUMsS0FBSztBQUNULGVBQU8sOEJBQThCO0FBQ3JDO0FBQUEsTUFDRDtBQUNBLFVBQUksVUFBVSxLQUFLLEdBQUcsR0FBRyxVQUFVLFNBQVM7QUFDNUMsWUFBTSxVQUFVLE9BQU8sVUFBVSxjQUFjLE9BQU87QUFDdEQsY0FBUSxPQUFPO0FB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
